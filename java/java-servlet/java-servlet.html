<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.57" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>Java Servlet | Java æˆç¥ä¹‹è·¯</title><meta name="description" content="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª VuePress ç«™ç‚¹">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-72ee67ce.css" as="style" /><link rel="stylesheet" href="/assets/style-72ee67ce.css" />
    <link rel="modulepreload" href="/assets/app-c593f505.js"><link rel="modulepreload" href="/assets/framework-4ec38622.js"><link rel="modulepreload" href="/assets/java-servlet.html-c7a54ede.js"><link rel="modulepreload" href="/assets/java-servlet.html-f9646dd1.js"><link rel="prefetch" href="/assets/index.html-4e1da2c4.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-df701e40.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-overview.html-94372eca.js" as="script" /><link rel="prefetch" href="/assets/gitbook.html-432908fc.js" as="script" /><link rel="prefetch" href="/assets/mysql-advance.html-b6faea43.js" as="script" /><link rel="prefetch" href="/assets/mysql-apply.html-e0982e6c.js" as="script" /><link rel="prefetch" href="/assets/mysql-base.html-15774da0.js" as="script" /><link rel="prefetch" href="/assets/mysql-devops.html-5cee1349.js" as="script" /><link rel="prefetch" href="/assets/redis-base.html-e17677ed.js" as="script" /><link rel="prefetch" href="/assets/redis-cluster.html-8712f49e.js" as="script" /><link rel="prefetch" href="/assets/redis-overview.html-1fca9f7e.js" as="script" /><link rel="prefetch" href="/assets/java-base.html-ca97d2c7.js" as="script" /><link rel="prefetch" href="/assets/java-sql.html-bbe6c4c2.js" as="script" /><link rel="prefetch" href="/assets/java-time.html-ce7c9496.js" as="script" /><link rel="prefetch" href="/assets/java-collection-list.html-8bbef8fd.js" as="script" /><link rel="prefetch" href="/assets/java-collection-map.html-9ee599cf.js" as="script" /><link rel="prefetch" href="/assets/java-collection-overview.html-31570b40.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-base.html-2e26c5a1.js" as="script" /><link rel="prefetch" href="/assets/Java-concurrent-container.html-e5f75933.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-interview.html-d289133d.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-lock.html-cbd95e38.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-pool.html-a9ecee05.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-tools.html-76151b53.js" as="script" /><link rel="prefetch" href="/assets/java-bio.html-d706ae9b.js" as="script" /><link rel="prefetch" href="/assets/java-io-base.html-bb263882.js" as="script" /><link rel="prefetch" href="/assets/java-nio.html-2de47e3f.js" as="script" /><link rel="prefetch" href="/assets/Javaå†…å­˜æ¨¡å‹.html-0e76463e.js" as="script" /><link rel="prefetch" href="/assets/JVMå†…å­˜ç»“æ„.html-b17bcef0.js" as="script" /><link rel="prefetch" href="/assets/JVMåƒåœ¾å›æ”¶.html-ee219a34.js" as="script" /><link rel="prefetch" href="/assets/JVMæ¦‚è§ˆ.html-b4ce8fc6.js" as="script" /><link rel="prefetch" href="/assets/JVMç±»åŠ è½½å™¨.html-dd7f5a89.js" as="script" /><link rel="prefetch" href="/assets/JVMç±»æ–‡ä»¶ç»“æ„.html-8859cd08.js" as="script" /><link rel="prefetch" href="/assets/JVMè°ƒä¼˜.html-0d15b1ba.js" as="script" /><link rel="prefetch" href="/assets/java-lambda.html-56b847d2.js" as="script" /><link rel="prefetch" href="/assets/java-stream.html-6167e062.js" as="script" /><link rel="prefetch" href="/assets/HikariCP-base.html-f5a4e8e5.js" as="script" /><link rel="prefetch" href="/assets/HikariCP-source.html-7a2f3fac.js" as="script" /><link rel="prefetch" href="/assets/jackson-overview.html-57cfb768.js" as="script" /><link rel="prefetch" href="/assets/kafka-broker.html-a30f3377.js" as="script" /><link rel="prefetch" href="/assets/kafka-consumer.html-2a1327ac.js" as="script" /><link rel="prefetch" href="/assets/kafka-overview.html-698972bc.js" as="script" /><link rel="prefetch" href="/assets/kafka-producer.html-579ce0f8.js" as="script" /><link rel="prefetch" href="/assets/spring-kafka.html-b1a1e4d1.js" as="script" /><link rel="prefetch" href="/assets/log-framework.html-98a12691.js" as="script" /><link rel="prefetch" href="/assets/1.Hello World.html-4b77eac1.js" as="script" /><link rel="prefetch" href="/assets/2.Global Config.html-bd544474.js" as="script" /><link rel="prefetch" href="/assets/index.html-905c3f62.js" as="script" /><link rel="prefetch" href="/assets/sharding-sphere.html-a30db686.js" as="script" /><link rel="prefetch" href="/assets/shiro-overview.html-fa31ba73.js" as="script" /><link rel="prefetch" href="/assets/tomcat.html-4ad2c770.js" as="script" /><link rel="prefetch" href="/assets/data-structure-list.html-17b01002.js" as="script" /><link rel="prefetch" href="/assets/data-structure-overview.html-44ed6838.js" as="script" /><link rel="prefetch" href="/assets/data-structure-tree.html-c806dd3b.js" as="script" /><link rel="prefetch" href="/assets/design-adapter.html-0e9d816d.js" as="script" /><link rel="prefetch" href="/assets/design-chain.html-bb17cabc.js" as="script" /><link rel="prefetch" href="/assets/design-composite.html-1d475fbf.js" as="script" /><link rel="prefetch" href="/assets/design-decorator.html-4f27f10a.js" as="script" /><link rel="prefetch" href="/assets/design-overview.html-0a940fb3.js" as="script" /><link rel="prefetch" href="/assets/design-proxy.html-100e60b2.js" as="script" /><link rel="prefetch" href="/assets/design-strategy.html-a2df8a49.js" as="script" /><link rel="prefetch" href="/assets/æ»‘åŠ¨çª—å£.html-86771022.js" as="script" /><link rel="prefetch" href="/assets/linux-overview.html-2bd9af93.js" as="script" /><link rel="prefetch" href="/assets/encoding.html-304390cc.js" as="script" /><link rel="prefetch" href="/assets/encryption-algorithm.html-fb0becaa.js" as="script" /><link rel="prefetch" href="/assets/temp.html-ac4ce374.js" as="script" /><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-c6481b26.js" as="script" /><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-ba0c8ae7.js" as="script" /><link rel="prefetch" href="/assets/spring-source-overview.html-9371e343.js" as="script" /><link rel="prefetch" href="/assets/spring-boot-condition.html-a415267e.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-commons-base.html-f75ee2c9.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-gateway.html-03291875.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-ccdc0547.js" as="script" /><link rel="prefetch" href="/assets/nacos-client-discovery.html-17a81d03.js" as="script" /><link rel="prefetch" href="/assets/nacos-overview.html-539b7085.js" as="script" /><link rel="prefetch" href="/assets/cloud-openfeign-action.html-7761387f.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-10212321.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-8669a44d.js" as="script" /><link rel="prefetch" href="/assets/sentinel-source.html-dc297934.js" as="script" /><link rel="prefetch" href="/assets/git.html-cb7e5449.js" as="script" /><link rel="prefetch" href="/assets/gitlab.html-eb2126d8.js" as="script" /><link rel="prefetch" href="/assets/junit4.html-6c786952.js" as="script" /><link rel="prefetch" href="/assets/junit5.html-e36d7d70.js" as="script" /><link rel="prefetch" href="/assets/maven.html-e0151a0f.js" as="script" /><link rel="prefetch" href="/assets/reactor.html-cd44ff8d.js" as="script" /><link rel="prefetch" href="/assets/spring-source-web-init.html-b8105d34.js" as="script" /><link rel="prefetch" href="/assets/spring-source-web-listener.html-7b8c6479.js" as="script" /><link rel="prefetch" href="/assets/404.html-f04ced3e.js" as="script" /><link rel="prefetch" href="/assets/index.html-62ca9f14.js" as="script" /><link rel="prefetch" href="/assets/index.html-fc52137e.js" as="script" /><link rel="prefetch" href="/assets/index.html-ee301928.js" as="script" /><link rel="prefetch" href="/assets/index.html-d0c5f0f0.js" as="script" /><link rel="prefetch" href="/assets/index.html-25bcd8c4.js" as="script" /><link rel="prefetch" href="/assets/index.html-37f2094a.js" as="script" /><link rel="prefetch" href="/assets/index.html-50de9de4.js" as="script" /><link rel="prefetch" href="/assets/index.html-a6bbb2fe.js" as="script" /><link rel="prefetch" href="/assets/index.html-afe963e2.js" as="script" /><link rel="prefetch" href="/assets/index.html-e1231d43.js" as="script" /><link rel="prefetch" href="/assets/index.html-c4d07d46.js" as="script" /><link rel="prefetch" href="/assets/index.html-19c8c7e9.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-b5da756c.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-overview.html-ff9b794b.js" as="script" /><link rel="prefetch" href="/assets/gitbook.html-5a50abf0.js" as="script" /><link rel="prefetch" href="/assets/mysql-advance.html-79a57a00.js" as="script" /><link rel="prefetch" href="/assets/mysql-apply.html-b76d628d.js" as="script" /><link rel="prefetch" href="/assets/mysql-base.html-95625c2f.js" as="script" /><link rel="prefetch" href="/assets/mysql-devops.html-74e24111.js" as="script" /><link rel="prefetch" href="/assets/redis-base.html-0c64fcd1.js" as="script" /><link rel="prefetch" href="/assets/redis-cluster.html-d9e53ddd.js" as="script" /><link rel="prefetch" href="/assets/redis-overview.html-d8ed14d9.js" as="script" /><link rel="prefetch" href="/assets/java-base.html-bb254e89.js" as="script" /><link rel="prefetch" href="/assets/java-sql.html-98f87090.js" as="script" /><link rel="prefetch" href="/assets/java-time.html-1149c2e2.js" as="script" /><link rel="prefetch" href="/assets/java-collection-list.html-dcb82f95.js" as="script" /><link rel="prefetch" href="/assets/java-collection-map.html-20b29455.js" as="script" /><link rel="prefetch" href="/assets/java-collection-overview.html-0153adc1.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-base.html-4092d51f.js" as="script" /><link rel="prefetch" href="/assets/Java-concurrent-container.html-f22d5109.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-interview.html-02742a0a.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-lock.html-41872812.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-pool.html-b7de958e.js" as="script" /><link rel="prefetch" href="/assets/java-concurrent-tools.html-b9ad45db.js" as="script" /><link rel="prefetch" href="/assets/java-bio.html-a5769212.js" as="script" /><link rel="prefetch" href="/assets/java-io-base.html-e3ef5e77.js" as="script" /><link rel="prefetch" href="/assets/java-nio.html-a3fa4765.js" as="script" /><link rel="prefetch" href="/assets/Javaå†…å­˜æ¨¡å‹.html-087adb9d.js" as="script" /><link rel="prefetch" href="/assets/JVMå†…å­˜ç»“æ„.html-4bc916e1.js" as="script" /><link rel="prefetch" href="/assets/JVMåƒåœ¾å›æ”¶.html-c6e0e3e0.js" as="script" /><link rel="prefetch" href="/assets/JVMæ¦‚è§ˆ.html-435f6ec8.js" as="script" /><link rel="prefetch" href="/assets/JVMç±»åŠ è½½å™¨.html-0c7f8931.js" as="script" /><link rel="prefetch" href="/assets/JVMç±»æ–‡ä»¶ç»“æ„.html-5afd6d1d.js" as="script" /><link rel="prefetch" href="/assets/JVMè°ƒä¼˜.html-9a1a4154.js" as="script" /><link rel="prefetch" href="/assets/java-lambda.html-1db83529.js" as="script" /><link rel="prefetch" href="/assets/java-stream.html-8b490468.js" as="script" /><link rel="prefetch" href="/assets/HikariCP-base.html-d01cd368.js" as="script" /><link rel="prefetch" href="/assets/HikariCP-source.html-27512376.js" as="script" /><link rel="prefetch" href="/assets/jackson-overview.html-ccca046f.js" as="script" /><link rel="prefetch" href="/assets/kafka-broker.html-7cc959b4.js" as="script" /><link rel="prefetch" href="/assets/kafka-consumer.html-35141192.js" as="script" /><link rel="prefetch" href="/assets/kafka-overview.html-b243daf8.js" as="script" /><link rel="prefetch" href="/assets/kafka-producer.html-93a69d00.js" as="script" /><link rel="prefetch" href="/assets/spring-kafka.html-0032d80c.js" as="script" /><link rel="prefetch" href="/assets/log-framework.html-5769500e.js" as="script" /><link rel="prefetch" href="/assets/1.Hello World.html-78e7fc50.js" as="script" /><link rel="prefetch" href="/assets/2.Global Config.html-d3157ebb.js" as="script" /><link rel="prefetch" href="/assets/index.html-44ddef87.js" as="script" /><link rel="prefetch" href="/assets/sharding-sphere.html-2e54e4df.js" as="script" /><link rel="prefetch" href="/assets/shiro-overview.html-e44b2286.js" as="script" /><link rel="prefetch" href="/assets/tomcat.html-653f98cd.js" as="script" /><link rel="prefetch" href="/assets/data-structure-list.html-420dc821.js" as="script" /><link rel="prefetch" href="/assets/data-structure-overview.html-e227421d.js" as="script" /><link rel="prefetch" href="/assets/data-structure-tree.html-752ceeb1.js" as="script" /><link rel="prefetch" href="/assets/design-adapter.html-41aa7652.js" as="script" /><link rel="prefetch" href="/assets/design-chain.html-8685e4e6.js" as="script" /><link rel="prefetch" href="/assets/design-composite.html-4375b033.js" as="script" /><link rel="prefetch" href="/assets/design-decorator.html-2b2ae807.js" as="script" /><link rel="prefetch" href="/assets/design-overview.html-300948fd.js" as="script" /><link rel="prefetch" href="/assets/design-proxy.html-e1813076.js" as="script" /><link rel="prefetch" href="/assets/design-strategy.html-a31637dd.js" as="script" /><link rel="prefetch" href="/assets/æ»‘åŠ¨çª—å£.html-ae330cc5.js" as="script" /><link rel="prefetch" href="/assets/linux-overview.html-8ac20a5d.js" as="script" /><link rel="prefetch" href="/assets/encoding.html-f8e7f158.js" as="script" /><link rel="prefetch" href="/assets/encryption-algorithm.html-bfb3dc64.js" as="script" /><link rel="prefetch" href="/assets/temp.html-ec342781.js" as="script" /><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-a44c5c69.js" as="script" /><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-edba8ecd.js" as="script" /><link rel="prefetch" href="/assets/spring-source-overview.html-576738e8.js" as="script" /><link rel="prefetch" href="/assets/spring-boot-condition.html-b4e4df1a.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-commons-base.html-39238198.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-gateway.html-7a4e7b1f.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-7a202164.js" as="script" /><link rel="prefetch" href="/assets/nacos-client-discovery.html-1f7ae7f3.js" as="script" /><link rel="prefetch" href="/assets/nacos-overview.html-43d7250d.js" as="script" /><link rel="prefetch" href="/assets/cloud-openfeign-action.html-7559bcf7.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-47e8c26d.js" as="script" /><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-a27e5c44.js" as="script" /><link rel="prefetch" href="/assets/sentinel-source.html-dc357213.js" as="script" /><link rel="prefetch" href="/assets/git.html-eefdc275.js" as="script" /><link rel="prefetch" href="/assets/gitlab.html-65555382.js" as="script" /><link rel="prefetch" href="/assets/junit4.html-c35363b6.js" as="script" /><link rel="prefetch" href="/assets/junit5.html-bdf5716e.js" as="script" /><link rel="prefetch" href="/assets/maven.html-7c434596.js" as="script" /><link rel="prefetch" href="/assets/reactor.html-f20890c4.js" as="script" /><link rel="prefetch" href="/assets/spring-source-web-init.html-27ad7747.js" as="script" /><link rel="prefetch" href="/assets/spring-source-web-listener.html-2166addd.js" as="script" /><link rel="prefetch" href="/assets/404.html-46b6c18e.js" as="script" /><link rel="prefetch" href="/assets/index.html-ed68d2be.js" as="script" /><link rel="prefetch" href="/assets/index.html-398e9a2c.js" as="script" /><link rel="prefetch" href="/assets/index.html-902245d5.js" as="script" /><link rel="prefetch" href="/assets/index.html-93ba03a9.js" as="script" /><link rel="prefetch" href="/assets/index.html-70956359.js" as="script" /><link rel="prefetch" href="/assets/index.html-f0a732cd.js" as="script" /><link rel="prefetch" href="/assets/index.html-3344b751.js" as="script" /><link rel="prefetch" href="/assets/index.html-6d2a3ffd.js" as="script" /><link rel="prefetch" href="/assets/index.html-a5787a89.js" as="script" /><link rel="prefetch" href="/assets/index.html-440f50d2.js" as="script" /><link rel="prefetch" href="/assets/index.html-a7274cc8.js" as="script" /><link rel="prefetch" href="/assets/clientConfigs-bdea5ab7.js" as="script" /><link rel="prefetch" href="/assets/clientConfigs-bdea5ab7.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">Java æˆç¥ä¹‹è·¯</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java ç¬”è®°"><span class="title"><!---->Java ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Java åŸºç¡€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/java-base/java-base.html" class="nav-link" aria-label="Java åŸºç¡€çŸ¥è¯†"><!---->Java åŸºç¡€çŸ¥è¯†<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Java IO</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/java-io/java-io-base.html" class="nav-link" aria-label="Java IO åŸºç¡€çŸ¥è¯†"><!---->Java IO åŸºç¡€çŸ¥è¯†<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Java é›†åˆ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/java-collection/java-collection-overview.html" class="nav-link" aria-label="Java é›†åˆæ¦‚è§ˆ"><!---->Java é›†åˆæ¦‚è§ˆ<!----></a></li><li class="dropdown-subitem"><a href="/java/java-collection/java-collection-list.html" class="nav-link" aria-label="Java Listé›†åˆ"><!---->Java Listé›†åˆ<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Java å¹¶å‘</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/java-concurrent/java-concurrent-base.html" class="nav-link" aria-label="Java å¹¶å‘åŸºç¡€"><!---->Java å¹¶å‘åŸºç¡€<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JVM è¯¦è§£</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/java-jvm/JVM%E6%A6%82%E8%A7%88.html" class="nav-link" aria-label="JVMæ¦‚è§ˆ"><!---->JVMæ¦‚è§ˆ<!----></a></li><li class="dropdown-subitem"><a href="/java/java-jvm/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84.html" class="nav-link" aria-label="JVMå†…å­˜ç»“æ„"><!---->JVMå†…å­˜ç»“æ„<!----></a></li><li class="dropdown-subitem"><a href="/java/java-jvm/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" class="nav-link" aria-label="JVMåƒåœ¾å›æ”¶"><!---->JVMåƒåœ¾å›æ”¶<!----></a></li><li class="dropdown-subitem"><a href="/java/java-jvm/JVM%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.html" class="nav-link" aria-label="JVMç±»æ–‡ä»¶ç»“æ„"><!---->JVMç±»æ–‡ä»¶ç»“æ„<!----></a></li><li class="dropdown-subitem"><a href="/java/java-jvm/JVM%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.html" class="nav-link" aria-label="JVMç±»åŠ è½½å™¨"><!---->JVMç±»åŠ è½½å™¨<!----></a></li><li class="dropdown-subitem"><a href="/java/java-jvm/JVMå†…å­˜æ¨¡å‹.html" class="nav-link" aria-label="Javaå†…å­˜æ¨¡å‹"><!---->Javaå†…å­˜æ¨¡å‹<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring ç¬”è®°"><span class="title"><!---->Spring ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring IOC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/test02.html" class="nav-link" aria-label="Spring IOCè¯¦è§£"><!---->Spring IOCè¯¦è§£<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring åç½®å¤„ç†å™¨è§£æ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/spring-bean-post-processor/BeanPostProcessor-base.html" class="nav-link" aria-label="Spring åç½®å¤„ç†å™¨æ€»è§ˆ"><!---->Spring åç½®å¤„ç†å™¨æ€»è§ˆ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring Cloud"><span class="title"><!---->Spring Cloud</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-overview.html" class="nav-link" aria-label="Spring Cloud Overview"><!---->Spring Cloud Overview<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-nacos.md" class="nav-link" aria-label="Spring Cloud Nacos"><!---->Spring Cloud Nacos<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-sentinel.md" class="nav-link" aria-label="Spring Cloud Sentinel"><!---->Spring Cloud Sentinel<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-seate.html" class="nav-link" aria-label="Spring Cloud Seate"><!---->Spring Cloud Seate<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-ribbon/spring-cloud-ribbon.html" class="nav-link" aria-label="Spring Cloud Ribbon"><!---->Spring Cloud Ribbon<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ•°æ®åº“"><span class="title"><!---->æ•°æ®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>MySQL</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/mysql/mysql-base.html" class="nav-link" aria-label="MySQL åŸºç¡€ç¯‡"><!---->MySQL åŸºç¡€ç¯‡<!----></a></li><li class="dropdown-subitem"><a href="/database/mysql/mysql-advance.html" class="nav-link" aria-label="MySQL è¿›é˜¶ç¯‡"><!---->MySQL è¿›é˜¶ç¯‡<!----></a></li><li class="dropdown-subitem"><a href="/database/mysql/mysql-devops.html" class="nav-link" aria-label="MySQL è¿ç»´ç¯‡"><!---->MySQL è¿ç»´ç¯‡<!----></a></li><li class="dropdown-subitem"><a href="/database/mysql/mysql-apply.html" class="nav-link" aria-label="MySQL åº”ç”¨ç¯‡"><!---->MySQL åº”ç”¨ç¯‡<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è‡ªæˆ‘ä¿®å…»"><span class="title"><!---->è‡ªæˆ‘ä¿®å…»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/quality/design-mode/design-overview.html" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a></li><li class="dropdown-item"><a href="/quality/data-structure/data-structure-overview.html" class="nav-link" aria-label="æ•°æ®ç»“æ„"><!---->æ•°æ®ç»“æ„<!----></a></li><li class="dropdown-item"><a href="/quality/linux/linux-overview.html" class="nav-link" aria-label="Linux æ€»ç»“"><!---->Linux æ€»ç»“<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä¸­é—´ä»¶"><span class="title"><!---->ä¸­é—´ä»¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/middleware/tomcat/tomcat.html" class="nav-link" aria-label="Tomcat ä¸“é¢˜"><!---->Tomcat ä¸“é¢˜<!----></a></li><li class="dropdown-item"><a href="/middleware/kafka/kafka-overview.html" class="nav-link" aria-label="Kafka ä¸“é¢˜"><!---->Kafka ä¸“é¢˜<!----></a></li><li class="dropdown-item"><a href="/middleware/redis/redis-overview.md" class="nav-link" aria-label="Redis ä¸“é¢˜"><!---->Redis ä¸“é¢˜<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å·¥å…·åŒ…"><span class="title"><!---->å·¥å…·åŒ…</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Junit æµ‹è¯•æ¡†æ¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tools/junit/junit5.html" class="nav-link" aria-label="Junit 5 ä½¿ç”¨æ€»ç»“"><!---->Junit 5 ä½¿ç”¨æ€»ç»“<!----></a></li></ul></li><li class="dropdown-item"><a href="/tools/log/log-framework.md" class="nav-link" aria-label="Java æ—¥å¿—æ¡†æ¶"><!---->Java æ—¥å¿—æ¡†æ¶<!----></a></li><li class="dropdown-item"><a href="/tools/maven/maven.html" class="nav-link" aria-label="Maven ä½¿ç”¨å…¥é—¨"><!---->Maven ä½¿ç”¨å…¥é—¨<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">Java é›†åˆ</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/java/java-collection/java-collection-overview.html" class="nav-link sidebar-link sidebar-page" aria-label="Java é›†åˆæ€»è§ˆ"><!---->Java é›†åˆæ€»è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-collection/java-collection-list.html" class="nav-link sidebar-link sidebar-page" aria-label="Java é›†åˆä¹‹List"><!---->Java é›†åˆä¹‹List<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-collection/java-collection-map.html" class="nav-link sidebar-link sidebar-page" aria-label="Java é›†åˆä¹‹Map"><!---->Java é›†åˆä¹‹Map<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">Java IO æ¨¡å‹</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/java/java-io/java-io-base.html" class="nav-link sidebar-link sidebar-page" aria-label="Java IO å‰ç½®çŸ¥è¯†"><!---->Java IO å‰ç½®çŸ¥è¯†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-io/java-bio.html" class="nav-link sidebar-link sidebar-page" aria-label="Java BIO"><!---->Java BIO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-io/java-nio.html" class="nav-link sidebar-link sidebar-page" aria-label="NIO"><!---->NIO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">Java å¹¶å‘ç¼–ç¨‹</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/java/java-concurrent/java-concurrent-base.html" class="nav-link sidebar-link sidebar-page" aria-label="Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€"><!---->Javaå¹¶å‘ç¼–ç¨‹åŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-concurrent/java-concurrent-container.html" class="nav-link sidebar-link sidebar-page" aria-label="Java å¹¶å‘å®¹å™¨"><!---->Java å¹¶å‘å®¹å™¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-concurrent/java-concurrent-lock.html" class="nav-link sidebar-link sidebar-page" aria-label="Javaä¸­çš„é”"><!---->Javaä¸­çš„é”<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-concurrent/java-concurrent-pool.html" class="nav-link sidebar-link sidebar-page" aria-label="Java  çº¿ç¨‹æ± "><!---->Java  çº¿ç¨‹æ± <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-concurrent/java-concurrent-tools.html" class="nav-link sidebar-link sidebar-page" aria-label="Java å¹¶å‘å·¥å…·åŒ…"><!---->Java å¹¶å‘å·¥å…·åŒ…<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">JVMæ¦‚è§ˆ</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/java/java-jvm/JVM%E6%A6%82%E8%A7%88.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM æ¦‚è§ˆ"><!---->JVM æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-jvm/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM å†…å­˜ç»“æ„"><!---->JVM å†…å­˜ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-jvm/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="åƒåœ¾å›æ”¶"><!---->åƒåœ¾å›æ”¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-jvm/JVM%E7%B1%BB%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.html" class="nav-link sidebar-link sidebar-page" aria-label="ç±»æ–‡ä»¶ç»“æ„"><!---->ç±»æ–‡ä»¶ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-jvm/JVM%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶"><!---->è™šæ‹Ÿæœºç±»åŠ è½½æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-jvm/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="Java å†…å­˜æ¨¡å‹"><!---->Java å†…å­˜æ¨¡å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Java Servlet</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-29T13:09:28.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 38 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT38M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#ä¸€ã€å¼•è¨€" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€å¼•è¨€</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-1-c-sæ¶æ„å’Œb-sæ¶æ„" class="router-link-active router-link-exact-active toc-link level3">1.1 C/Sæ¶æ„å’ŒB/Sæ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-2-c-sæ¶æ„-client-server" class="router-link-active router-link-exact-active toc-link level3">1.2 c/sæ¶æ„ (Client/Server)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-3-b-sæ¶æ„-browser-server" class="router-link-active router-link-exact-active toc-link level3">1.3 B/Sæ¶æ„(Browser/Server)</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#äºŒã€æœåŠ¡å™¨" class="router-link-active router-link-exact-active toc-link level2">äºŒã€æœåŠ¡å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-1-æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">2.1 æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-2-å¸¸è§æœåŠ¡å™¨" class="router-link-active router-link-exact-active toc-link level3">2.2 å¸¸è§æœåŠ¡å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-3-tomcatæœåŠ¡å™¨" class="router-link-active router-link-exact-active toc-link level3">2.3 TomcatæœåŠ¡å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-4-tomcat-å®‰è£…" class="router-link-active router-link-exact-active toc-link level3">2.4 Tomcat:å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-5-tomcatå¯åŠ¨å’Œåœæ­¢" class="router-link-active router-link-exact-active toc-link level3">2.5 Tomcatå¯åŠ¨å’Œåœæ­¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-6-é¡¹ç›®éƒ¨ç½²åŠè®¿é—®é™æ€èµ„æº" class="router-link-active router-link-exact-active toc-link level3">2.6 é¡¹ç›®éƒ¨ç½²åŠè®¿é—®é™æ€èµ„æº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-7å¸¸è§é”™è¯¯" class="router-link-active router-link-exact-active toc-link level3">2.7å¸¸è§é”™è¯¯</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#ä¸‰ã€servlet-ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ã€Servlet ç®€ä»‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-1-æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">3.1 æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-2-servletå¼€å‘æ­¥éª¤" class="router-link-active router-link-exact-active toc-link level3">3.2 Servletå¼€å‘æ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-3-è¿è¡Œæµ‹è¯•" class="router-link-active router-link-exact-active toc-link level3">3.3 è¿è¡Œæµ‹è¯•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-4-å¸¸è§é”™è¯¯" class="router-link-active router-link-exact-active toc-link level3">3.4 å¸¸è§é”™è¯¯</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#å››ã€http-åè®®" class="router-link-active router-link-exact-active toc-link level2">å››ã€HTTP åè®®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-1-ä»€ä¹ˆæ˜¯http" class="router-link-active router-link-exact-active toc-link level3">5.1 ä»€ä¹ˆæ˜¯HTTP</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-2-httpåè®®ç‰¹ç‚¹" class="router-link-active router-link-exact-active toc-link level3">5.2 HTTPåè®®ç‰¹ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-3-httpåè®®é€šä¿¡æµç¨‹" class="router-link-active router-link-exact-active toc-link level3">5.3 HTTPåè®®é€šä¿¡æµç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-4-è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡" class="router-link-active router-link-exact-active toc-link level3">5.4 è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#å…­ã€servlet-è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">å…­ã€Servlet è¯¦è§£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-1-servletæ ¸å¿ƒæ¥å£å’Œç±»" class="router-link-active router-link-exact-active toc-link level3">6.1 Servletæ ¸å¿ƒæ¥å£å’Œç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-2-servletä¸¤ç§åˆ›å»ºæ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">6.2 Servletä¸¤ç§åˆ›å»ºæ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-3-servletä¸¤ç§é…ç½®æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">6.3 Servletä¸¤ç§é…ç½®æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-3-4-webservlet" class="router-link-active router-link-exact-active toc-link level3">6.3.4 @WebServlet</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#ä¸ƒã€servlet-åº”ç”¨" class="router-link-active router-link-exact-active toc-link level2">ä¸ƒã€Servlet åº”ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-1-requestå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">7.1 requestå¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-2-response-å¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">7.2 response å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-3-ç»¼åˆæ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">7.3 ç»¼åˆæ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#å…«ã€è½¬å‘ä¸é‡å®šå‘" class="router-link-active router-link-exact-active toc-link level2">å…«ã€è½¬å‘ä¸é‡å®šå‘</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-1-ç°æœ‰é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">8.1 ç°æœ‰é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-2-è½¬å‘" class="router-link-active router-link-exact-active toc-link level3">8.2 è½¬å‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-3-é‡å®šå‘" class="router-link-active router-link-exact-active toc-link level3">8.3 é‡å®šå‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-4-è½¬å‘ã€é‡å®šå‘æ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">8.4 è½¬å‘ã€é‡å®šå‘æ€»ç»“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#ä¹ã€servletç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active toc-link level2">ä¹ã€Servletç”Ÿå‘½å‘¨æœŸ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_9-1-ç”Ÿå‘½å‘¨æœŸå››ä¸ªé˜¶æ®µ" class="router-link-active router-link-exact-active toc-link level3">9.1 ç”Ÿå‘½å‘¨æœŸå››ä¸ªé˜¶æ®µ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#åã€servletç‰¹æ€§" class="router-link-active router-link-exact-active toc-link level2">åã€Servletç‰¹æ€§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_10-1-çº¿ç¨‹å®‰å…¨é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">10.1 çº¿ç¨‹å®‰å…¨é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_10-2-å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨" class="router-link-active router-link-exact-active toc-link level3">10.2 å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#åä¸€ã€çŠ¶æ€ç®¡ç†" class="router-link-active router-link-exact-active toc-link level2">åä¸€ã€çŠ¶æ€ç®¡ç†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-1-ç°æœ‰é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">11.1 ç°æœ‰é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-2-æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">11.2 æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-3-çŠ¶æ€ç®¡ç†åˆ†ç±»" class="router-link-active router-link-exact-active toc-link level3">11.3 çŠ¶æ€ç®¡ç†åˆ†ç±»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#åäºŒã€cookieçš„ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">åäºŒã€Cookieçš„ä½¿ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-1-ä»€ä¹ˆæ˜¯cookie" class="router-link-active router-link-exact-active toc-link level3">12.1 ä»€ä¹ˆæ˜¯Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-2-åˆ›å»ºcookie" class="router-link-active router-link-exact-active toc-link level3">12.2 åˆ›å»ºCookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-3-è·å–cookie" class="router-link-active router-link-exact-active toc-link level3">12.3 è·å–Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-4-ä¿®æ”¹cookie" class="router-link-active router-link-exact-active toc-link level3">12.4 ä¿®æ”¹Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-5-cookieç¼–ç ä¸è§£ç " class="router-link-active router-link-exact-active toc-link level3">12.5 Cookieç¼–ç ä¸è§£ç </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-6-cookietä¼˜ç‚¹å’Œç¼ºç‚¹" class="router-link-active router-link-exact-active toc-link level3">12.6 Cookietä¼˜ç‚¹å’Œç¼ºç‚¹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#åä¸‰ã€sessionå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level2">åä¸‰ã€Sessionå¯¹è±¡</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-1-sessionæ¦‚è¿°" class="router-link-active router-link-exact-active toc-link level3">13.1 Sessionæ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-2-sessionåŸç†" class="router-link-active router-link-exact-active toc-link level3">13.2 SessionåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-3-sessionä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">13.3 Sessionä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-3-1è·å–session" class="router-link-active router-link-exact-active toc-link level3">13.3.1è·å–Session</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-4-sessionä¸requeståº”ç”¨åŒºåˆ«" class="router-link-active router-link-exact-active toc-link level3">13.4 Sessionä¸Requeståº”ç”¨åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-5-sessionçš„ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active toc-link level3">13.5 Sessionçš„ç”Ÿå‘½å‘¨æœŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-4-æµè§ˆå™¨ç¦ç”¨cookie" class="router-link-active router-link-exact-active toc-link level3">13.4 æµè§ˆå™¨ç¦ç”¨Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-5-sessionå®æˆ˜æƒé™éªŒè¯" class="router-link-active router-link-exact-active toc-link level3">13.5 Sessionå®æˆ˜æƒé™éªŒè¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-6-session-å®æˆ˜ä¿å­˜éªŒè¯ç " class="router-link-active router-link-exact-active toc-link level3">13.6 Session å®æˆ˜ä¿å­˜éªŒè¯ç </a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#åå››ã€servletcontext-å¯¹è±¡" class="router-link-active router-link-exact-active toc-link level2">åå››ã€ServletContext å¯¹è±¡</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-1-servletcontextiæ¦‚è¿°" class="router-link-active router-link-exact-active toc-link level3">14.1 ServletContextiæ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-2-è·å–servletcontext-å¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">14.2 è·å–ServletContext.å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-3-servletcontextä½œç”¨" class="router-link-active router-link-exact-active toc-link level3">14.3 ServletContextä½œç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-4-servletcontextç‰¹ç‚¹" class="router-link-active router-link-exact-active toc-link level3">14.4 ServletContextç‰¹ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-5-servletcontext-åº”ç”¨åœºæ™¯" class="router-link-active router-link-exact-active toc-link level3">14.5 ServletContext/åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-6ä½œç”¨åŸŸæ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">14.6ä½œç”¨åŸŸæ€»ç»“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#åäº”ã€è¿‡æ»¤å™¨" class="router-link-active router-link-exact-active toc-link level2">åäº”ã€è¿‡æ»¤å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-1-ç°æœ‰é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">15.1 ç°æœ‰é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-2-æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">15.2 æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-3-è¿‡æ»¤å™¨ä½œç”¨" class="router-link-active router-link-exact-active toc-link level3">15.3 è¿‡æ»¤å™¨ä½œç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-4-ç¼–å†™è¿‡æ»¤å™¨" class="router-link-active router-link-exact-active toc-link level3">15.4 ç¼–å†™è¿‡æ»¤å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-5-è¿‡æ»¤å™¨é…ç½®" class="router-link-active router-link-exact-active toc-link level3">15.5 è¿‡æ»¤å™¨é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-6è¿‡æ»¤å™¨é“¾å’Œä¼˜å…ˆçº§" class="router-link-active router-link-exact-active toc-link level3">15.6è¿‡æ»¤å™¨é“¾å’Œä¼˜å…ˆçº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-7è¿‡æ»¤å™¨å…¸å‹åº”ç”¨" class="router-link-active router-link-exact-active toc-link level3">15.7è¿‡æ»¤å™¨å…¸å‹åº”ç”¨</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="java-servlet" tabindex="-1"><a class="header-anchor" href="#java-servlet" aria-hidden="true">#</a> Java Servlet</h1><h2 id="ä¸€ã€å¼•è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å¼•è¨€" aria-hidden="true">#</a> ä¸€ã€å¼•è¨€</h2><h3 id="_1-1-c-sæ¶æ„å’Œb-sæ¶æ„" tabindex="-1"><a class="header-anchor" href="#_1-1-c-sæ¶æ„å’Œb-sæ¶æ„" aria-hidden="true">#</a> 1.1 C/Sæ¶æ„å’ŒB/Sæ¶æ„</h3><blockquote><p>C/Så’ŒB/Sæ˜¯è½¯ä»¶å‘å±•è¿‡ç¨‹ä¸­å‡ºç°çš„ä¸¤ç§è½¯ä»¶æ¶æ„æ–¹å¼ã€‚</p></blockquote><h3 id="_1-2-c-sæ¶æ„-client-server" tabindex="-1"><a class="header-anchor" href="#_1-2-c-sæ¶æ„-client-server" aria-hidden="true">#</a> 1.2 c/sæ¶æ„ (Client/Server)</h3><blockquote><ul><li>ç‰¹ç‚¹ï¼šå¿…é¡»åœ¨å®¢æˆ·ç«¯å®‰è£…ç‰¹å®šè½¯ä»¶</li><li>ä¼˜ç‚¹ï¼šå›¾å½¢æ•ˆæœæ˜¾ç¤ºè¾ƒå¥½ï¼ˆå¦‚ï¼š3Dæ¸¸æˆã€‹</li><li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨çš„è½¯ä»¶å’ŒåŠŸèƒ½è¿›è¡Œå‡çº§ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¿…é¡»å‡çº§ã€ä¸åˆ©äºç»´æŠ¤</li><li>å¸¸è§çš„C/Sç¨‹åºï¼šQQã€å¾®ä¿¡ç­‰</li></ul></blockquote><p><img src="/assets/image-20221129113403052-0577f7c0.png" alt="image-20221129113403052"></p><h3 id="_1-3-b-sæ¶æ„-browser-server" tabindex="-1"><a class="header-anchor" href="#_1-3-b-sæ¶æ„-browser-server" aria-hidden="true">#</a> 1.3 B/Sæ¶æ„(Browser/Server)</h3><blockquote><p>ç‰¹ç‚¹ï¼šæ— éœ€å®‰è£…å®¢æˆ·ç«¯ï¼Œä»»ä½•æµè§ˆå™¨éƒ½å¯ç›´æ¥è®¿é—®</p><p>ä¼˜ç‚¹ï¼šæ¶‰åŠåˆ°åŠŸèƒ½çš„å‡çº§ï¼Œåªéœ€è¦å‡çº§æœåŠ¡å™¨ç«¯ã€‚</p><p>ç¼ºç‚¹ï¼šå›¾å½¢æ˜¾ç¤ºæ•ˆæœä¸å¦‚C/Sæ¶æ„</p><p>éœ€è¦é€šè¿‡HTTPåè®®è®¿é—®</p></blockquote><h2 id="äºŒã€æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#äºŒã€æœåŠ¡å™¨" aria-hidden="true">#</a> äºŒã€æœåŠ¡å™¨</h2><h3 id="_2-1-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_2-1-æ¦‚å¿µ" aria-hidden="true">#</a> 2.1 æ¦‚å¿µ</h3><h4 id="_2-1-1-ä»€ä¹ˆæ˜¯web" tabindex="-1"><a class="header-anchor" href="#_2-1-1-ä»€ä¹ˆæ˜¯web" aria-hidden="true">#</a> 2.1.1 ä»€ä¹ˆæ˜¯web</h4><p>Web(World Wide Web)ç§°ä¸ºä¸‡ç»´ç½‘ï¼Œç®€å•ç†è§£å°±æ˜¯ç½‘ç«™ï¼Œå®ƒç”¨æ¥è¡¨ç¤ºInternetä¸»æœºä¸Šä¾›å¤–ç•Œè®¿é—®çš„èµ„æºã€‚</p><p>Internetä¸Šä¾›å¤–ç•Œè®¿é—®çš„èµ„æºåˆ†ä¸ºä¸¤å¤§ç±»</p><ul><li><p>é™æ€èµ„æºï¼šæŒ‡Wbé¡µé¢ä¸­ä¾›äººä»¬æµè§ˆçš„æ•°æ®å§‹ç»ˆæ˜¯ä¸å˜çš„ã€‚(HTMLã€CSS)</p></li><li><p>åŠ¨æ€èµ„æºï¼šæŒ‡wbé¡µé¢ä¸­ä¾›äººä»¬æµè§ˆçš„æ•°æ®æ˜¯ç”±ç¨‹åºäº§ç”Ÿçš„ï¼Œä¸åŒæ—¶é—´ç‚¹ï¼Œç”šè‡³ä¸åŒè®¾å¤‡è®¿é—®wbé¡µé¢çœ‹åˆ°çš„å†…å®¹å„ä¸ç›¸åŒã€‚(JSP/Servlet)</p></li><li><p>åœ¨Javaä¸­ï¼ŒåŠ¨æ€Webèµ„æºå¼€å‘æŠ€æœ¯æˆ‘ä»¬ç»Ÿç§°ä¸ºJava Webã€‚</p></li></ul><h4 id="_2-1-2-ä»€ä¹ˆæ˜¯webæœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#_2-1-2-ä»€ä¹ˆæ˜¯webæœåŠ¡å™¨" aria-hidden="true">#</a> 2.1.2 ä»€ä¹ˆæ˜¯webæœåŠ¡å™¨</h4><p>WebæœåŠ¡å™¨æ˜¯è¿è¡ŒåŠå‘å¸ƒWbåº”ç”¨çš„å®¹å™¨ï¼Œåªæœ‰å°†å¼€å‘çš„Webé¡¹ç›®æ”¾ç½®åˆ°è¯¥å®¹å™¨ä¸­ï¼Œæ‰èƒ½ä½¿ç½‘ç»œä¸­çš„æ‰€æœ‰ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è¿›è¡Œè®¿é—®ã€‚</p><h3 id="_2-2-å¸¸è§æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#_2-2-å¸¸è§æœåŠ¡å™¨" aria-hidden="true">#</a> 2.2 å¸¸è§æœåŠ¡å™¨</h3><ul><li>å¼€æºï¼šOpenSourceï¼ˆ1ã€å¼€æ”¾æºä»£ç  2ã€å…è´¹ï¼‰ <ul><li>Tomcat(ä¸»æµWebæœåŠ¡å™¨ä¹‹ä¸€ï¼Œé€‚åˆåˆå­¦è€…)</li><li>jetty(æ·˜å®ï¼Œè¿è¡Œæ•ˆç‡æ¯”Tomcatié«˜)</li><li>resin(æ–°æµªï¼Œæ‰€æœ‰å¼€æºæœåŠ¡å™¨è½¯ä»¶ä¸­ï¼Œè¿è¡Œæ•ˆç‡æœ€é«˜çš„)</li><li>ã€‚ä¸‰è€…çš„ç”¨æ³•ä»ä»£ç è§’åº¦å®Œå…¨ç›¸åŒï¼Œåªæœ‰åœ¨å¼€å¯ã€å…³é—­æœåŠ¡å™¨è½¯ä»¶æ—¶å¯¹åº”çš„å‘½ä»¤ç¨æœ‰åŒºåˆ«ã€‚æŒæ¡ä¸€ä¸ªå³æŒæ¡æ‰€æœ‰</li></ul></li><li>æ”¶è´¹ <ul><li>WebLogic (Oracle)</li><li>WebSphere (IBM)</li><li>æä¾›ç›¸åº”çš„æœåŠ¡ä¸æ”¯æŒï¼Œè½¯ä»¶å¤§ï¼Œè€—èµ„æº</li></ul></li></ul><h3 id="_2-3-tomcatæœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-tomcatæœåŠ¡å™¨" aria-hidden="true">#</a> 2.3 TomcatæœåŠ¡å™¨</h3><p>Tomcatæ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼š(Apache Software Foundation)çš„Jakartaé¡¹ç›®ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ï¼Œå…è´¹å¼€æºã€å¹¶æ”¯æŒServletå’ŒJSPè§„èŒƒã€‚ç›®å‰Tomcatiæœ€æ–°ç‰ˆæœ¬ä¸º9.0ã€‚</p><p>TomcatæŠ€æœ¯å…ˆè¿›ã€æ€§èƒ½ç¨³å®šï¼Œæ·±å—Jvaçˆ±å¥½è€…å–œçˆ±å¹¶å¾—åˆ°äº†éƒ¨åˆ†è½¯ä»¶å¼€å‘å•†çš„è®¤å¯ï¼Œæˆä¸ºç›®å‰æ¯”è¾ƒæµè¡Œçš„Webåº”ç”¨æœåŠ¡å™¨ã€‚</p><h3 id="_2-4-tomcat-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_2-4-tomcat-å®‰è£…" aria-hidden="true">#</a> 2.4 Tomcat:å®‰è£…</h3><h4 id="_2-4-1-ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#_2-4-1-ä¸‹è½½" aria-hidden="true">#</a> 2.4.1 ä¸‹è½½</h4><p>å®˜ç½‘ä¸‹è½½(http:/tomcat..apache.org/)Tomcata8.5è§£å‹ç¼©ç‰ˆæœ¬</p><h4 id="_2-4-2-è§£å‹å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_2-4-2-è§£å‹å®‰è£…" aria-hidden="true">#</a> 2.4.2 è§£å‹å®‰è£…</h4><p>å°†Tomcatè§£å‹åˆ°ä¸€ä¸ªæ²¡æœ‰ç‰¹æ®Šç¬¦å·çš„ç›®å½•ä¸­ï¼ˆä¸€èˆ¬çº¯è‹±æ–‡å³å¯ï¼‰</p><p>æ³¨æ„</p><ul><li>ä¸å»ºè®®å°†æœåŠ¡å™¨è½¯ä»¶æ”¾åœ¨ç£ç›˜å±‚æ¬¡å¾ˆå¤šçš„æ–‡ä»¶å¤¹</li><li>ä¸å»ºè®®æ”¾åœ¨ä¸­æ–‡è·¯å¾„ä¸‹</li></ul><h4 id="_2-4-3-tomcatç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-4-3-tomcatç›®å½•ç»“æ„" aria-hidden="true">#</a> 2.4.3 Tomcatç›®å½•ç»“æ„</h4><table><thead><tr><th>æ–‡ä»¶å¤¹</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>bin</td><td>è¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶</td><td>startup.batå¯åŠ¨Tomcatã€shutdown.batåœæ­¢Tomcat</td></tr><tr><td>conf</td><td>è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•<br>è¿™ä¸ªç›®å½•ä¸‹æœ‰ä¸¤ä¸ªæœ€ä¸ºé‡è¦çš„æ–‡ä»¶server.xmlå’Œweb.xml</td><td>server.xml: é…ç½®æ•´ä¸ªæœåŠ¡å™¨ä¿¡æ¯ã€‚ä¾‹å¦‚ä¿®æ”¹ç«¯å£å·ï¼Œç¼–ç æ ¼å¼ç­‰ã€‚<br>web.xml:é¡¹ç›®éƒ¨ç½²æè¿°ç¬¦æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­æ³¨å†Œäº†å¾ˆå¤šMIMEç±»å‹ï¼Œå³æ–‡æ¡£ç±»å‹ã€‚</td></tr><tr><td>lib</td><td>Tomcatçš„ç±»åº“ï¼Œé‡Œé¢å­˜æ”¾Tomcatè¿è¡Œæ‰€éœ€è¦çš„jaræ–‡ä»¶ã€‚</td><td></td></tr><tr><td>logs</td><td>å­˜æ”¾æ—¥å¿—æ–‡ä»¶ï¼Œè®°å½•äº†Tomcat)å¯åŠ¨å’Œå…³é—­çš„ä¿¡æ¯ï¼Œ<br>å¦‚æœå¯åŠ¨Tomcatæ—¶æœ‰é”™è¯¯ï¼Œå¼‚å¸¸ä¹Ÿä¼šè®°å½•åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</td><td></td></tr><tr><td>temp</td><td>Tomcatçš„ä¸´æ—¶æ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„ä¸œè¥¿åœ¨åœæ­¢Tomcatååˆ é™¤ã€‚</td><td></td></tr><tr><td>webapps</td><td>å­˜æ”¾webé¡¹ç›®çš„ç›®å½•ï¼Œå…¶ä¸­æ¯ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªé¡¹ç›®ï¼›<br>å…¶ä¸­rootæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é¡¹ç›®ï¼Œåœ¨åœ°å€æ ä¸­æ²¡æœ‰ç»™å‡ºé¡¹ç›®ç›®å½•æ—¶ï¼Œå¯¹åº”çš„å°±æ˜¯ROOTé¡¹ç›®ã€‚</td><td></td></tr><tr><td>work</td><td>è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæœ€ç»ˆè¿è¡Œçš„æ–‡ä»¶éƒ½åœ¨è¿™é‡Œã€‚</td><td>å½“å®¢æˆ·ç«¯ç”¨æˆ·è®¿é—®ä¸€ä¸ªJSPæ–‡ä»¶æ—¶ï¼ŒTomcatä¼šé€šè¿‡JSPç”ŸæˆJavaæ–‡ä»¶ï¼Œ<br>ç„¶åå†ç¼–è¯‘Javaæ–‡ä»¶ç”Ÿæˆclassæ–‡ä»¶ï¼Œç”Ÿæˆçš„javaå’Œclassæ–‡ä»¶éƒ½ä¼šå­˜æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</td></tr></tbody></table><h3 id="_2-5-tomcatå¯åŠ¨å’Œåœæ­¢" tabindex="-1"><a class="header-anchor" href="#_2-5-tomcatå¯åŠ¨å’Œåœæ­¢" aria-hidden="true">#</a> 2.5 Tomcatå¯åŠ¨å’Œåœæ­¢</h3><h4 id="_2-5-1-å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#_2-5-1-å¯åŠ¨" aria-hidden="true">#</a> 2.5.1 å¯åŠ¨</h4><p>è¿›å…¥tomcatå®‰è£…ç›®å½•binä¸‹ï¼ŒåŒå‡»startup.batå¯åŠ¨ç¨‹åºå³å¯</p><h4 id="_2-5-2-éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_2-5-2-éªŒè¯" aria-hidden="true">#</a> 2.5.2 éªŒè¯</h4><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥http://localhost:8080ï¼Œå¦‚æœå‡ºç°è®¿é—®ç•Œé¢è¯æ˜Tomcatå¯åŠ¨æˆåŠŸã€‚</p><h4 id="_2-5-3-åœæ­¢" tabindex="-1"><a class="header-anchor" href="#_2-5-3-åœæ­¢" aria-hidden="true">#</a> 2.5.3 åœæ­¢</h4><p>åŒå‡»shutdown.batå³å¯å…³é—­Tomcat)å¯åŠ¨çª—å£ã€‚</p><h4 id="_2-5-4-ä¿®æ”¹ç«¯å£å·" tabindex="-1"><a class="header-anchor" href="#_2-5-4-ä¿®æ”¹ç«¯å£å·" aria-hidden="true">#</a> 2.5.4 ä¿®æ”¹ç«¯å£å·</h4><p>Tomcaté»˜è®¤ç«¯å£å·ä¸º8080ï¼Œå¯ä»¥é€šè¿‡conf/server.xmlæ–‡ä»¶ä¿®æ”¹</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8080<span class="token punctuation">&quot;</span></span><span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HTTP/1.1<span class="token punctuation">&quot;</span></span>
		   <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20000<span class="token punctuation">&quot;</span></span>
		   <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8443<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„ï¼šä¿®æ”¹ç«¯å£å·éœ€è¦é‡æ–°å¯åŠ¨Tomcat:æ‰èƒ½ç”Ÿæ•ˆ</li></ul><h3 id="_2-6-é¡¹ç›®éƒ¨ç½²åŠè®¿é—®é™æ€èµ„æº" tabindex="-1"><a class="header-anchor" href="#_2-6-é¡¹ç›®éƒ¨ç½²åŠè®¿é—®é™æ€èµ„æº" aria-hidden="true">#</a> 2.6 é¡¹ç›®éƒ¨ç½²åŠè®¿é—®é™æ€èµ„æº</h3><p>Tomcatæ˜¯WebæœåŠ¡å™¨ï¼Œæˆ‘ä»¬çš„é¡¹ç›®åº”ç”¨æ˜¯éƒ¨ç½²åœ¨webappsä¸‹ï¼Œç„¶åé€šè¿‡ç‰¹å®šçš„URLè®¿é—®ã€‚</p><h4 id="_2-6-1-åˆ›å»ºé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_2-6-1-åˆ›å»ºé¡¹ç›®" aria-hidden="true">#</a> 2.6.1 åˆ›å»ºé¡¹ç›®</h4><ul><li><p>åœ¨webappsä¸­å»ºç«‹æ–‡ä»¶å¤¹ï¼ˆé¡¹ç›®åº”ç”¨ï¼‰ï¼Œæ¯”å¦‚ï¼šmyweb</p><ul><li><p>åˆ›å»ºWEB-NFæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾é¡¹ç›®çš„æ ¸å¿ƒå†…å®¹</p><ul><li>åˆ›å»ºclasses,ç”¨äºå­˜æ”¾.classæ–‡ä»¶</li><li>åˆ›å»ºib,ç”¨äºå­˜æ”¾jaræ–‡ä»¶</li><li>åˆ›å»ºweb.xml,é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆåˆ°ROOTé¡¹ç›®ä¸‹çš„WEB-NFå¤åˆ¶å³å¯ï¼‰</li></ul></li><li><p>æŠŠç½‘é¡µhello.htmlå¤åˆ¶åˆ°mywebæ–‡ä»¶å¤¹ä¸­ï¼Œä¸WEB-INFåœ¨åŒçº§ç›®å½•</p></li></ul></li></ul><h4 id="_2-6-2-urlè®¿é—®èµ„æº" tabindex="-1"><a class="header-anchor" href="#_2-6-2-urlè®¿é—®èµ„æº" aria-hidden="true">#</a> 2.6.2 URLè®¿é—®èµ„æº</h4><p>æµè§ˆå™¨åœ°å€ä¸­è¾“å…¥URL:http://localhost:8080/myweb/hello.html</p><ul><li>ç»éªŒï¼šURLä¸»è¦æœ‰4éƒ¨åˆ†ç»„æˆï¼šåè®®ã€ä¸»æœºã€ç«¯å£ã€èµ„æºè·¯å¾„</li></ul><p><img src="/assets/image-20221129120044838-a35652f4.png" alt="image-20221129120044838"></p><h4 id="_2-6-3-tomcatå“åº”æµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#_2-6-3-tomcatå“åº”æµç¨‹å›¾" aria-hidden="true">#</a> 2.6.3 Tomcatå“åº”æµç¨‹å›¾</h4><p><img src="/assets/image-20221129120230013-9a25b529.png" alt="image-20221129120230013"></p><h3 id="_2-7å¸¸è§é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_2-7å¸¸è§é”™è¯¯" aria-hidden="true">#</a> 2.7å¸¸è§é”™è¯¯</h3><h4 id="_2-7-1-tomcatæ§åˆ¶å°é—ªé€€" tabindex="-1"><a class="header-anchor" href="#_2-7-1-tomcatæ§åˆ¶å°é—ªé€€" aria-hidden="true">#</a> 2.7.1 Tomcatæ§åˆ¶å°é—ªé€€</h4><p>é—ªé€€é—®é¢˜æ˜¯ç”±äºJAVA_HOMEé…ç½®å¯¼è‡´çš„ï¼Œæ£€æŸ¥JAVA_HOMEé…ç½®æ˜¯å¦æ­£ç¡®</p><h4 id="_2-7-2-404" tabindex="-1"><a class="header-anchor" href="#_2-7-2-404" aria-hidden="true">#</a> 2.7.2 404</h4><p>è®¿é—®èµ„æºä¸å­˜åœ¨ï¼Œå‡ºç°404é”™è¯¯</p><p><img src="/assets/image-20221129120403186-48515dd7.png" alt="image-20221129120403186"></p><h2 id="ä¸‰ã€servlet-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€servlet-ç®€ä»‹" aria-hidden="true">#</a> ä¸‰ã€Servlet ç®€ä»‹</h2><h3 id="_3-1-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_3-1-æ¦‚å¿µ" aria-hidden="true">#</a> 3.1 æ¦‚å¿µ</h3><ul><li><p>Servlet:Server Appletçš„ç®€ç§°ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„ç¨‹åºï¼ˆä»£ç ã€åŠŸèƒ½å®ç°ï¼‰ï¼Œå¯äº¤äº’å¼çš„å¤„ç†å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œå¹¶å®Œæˆæ“ä½œå“åº”ã€‚</p></li><li><p>åŠ¨æ€ç½‘é¡µæŠ€æœ¯</p></li><li><p>JavaWebç¨‹åºå¼€å‘çš„åŸºç¡€ï¼ŒJavaEEè§„èŒƒï¼ˆä¸€å¥—æ¥å£ï¼‰çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p></li></ul><h4 id="_3-1-1-servletfä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_3-1-1-servletfä½œç”¨" aria-hidden="true">#</a> 3.1.1 Servletfä½œç”¨</h4><ul><li>æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå®Œæˆæ“ä½œã€‚</li><li>åŠ¨æ€ç”Ÿæˆç½‘é¡µï¼ˆé¡µé¢æ•°æ®å¯å˜ï¼‰</li><li>å°†åŒ…å«æ“ä½œç»“æœçš„åŠ¨æ€ç½‘é¡µå“åº”ç»™å®¢æˆ·ç«¯ã€‚</li></ul><h3 id="_3-2-servletå¼€å‘æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_3-2-servletå¼€å‘æ­¥éª¤" aria-hidden="true">#</a> 3.2 Servletå¼€å‘æ­¥éª¤</h3><h4 id="_3-2-1-æ­å»ºå¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_3-2-1-æ­å»ºå¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> 3.2.1 æ­å»ºå¼€å‘ç¯å¢ƒ</h4><p>å°†Servletiç›¸å…³jaråŒ…(lib\servlet-.api.jar)é…ç½®åˆ°classpathä¸­</p><h4 id="_3-2-2-ç¼–å†™servlet" tabindex="-1"><a class="header-anchor" href="#_3-2-2-ç¼–å†™servlet" aria-hidden="true">#</a> 3.2.2 ç¼–å†™Servlet</h4><ul><li>å®ç°javax.servlet.Servlet</li><li>é‡å†™5ä¸ªä¸»è¦æ–¹æ³•</li><li>åœ¨æ ¸å¿ƒçš„service()æ–¹æ³•ä¸­ç¼–å†™è¾“å‡ºè¯­å¥ï¼Œæ‰“å°è®¿é—®ç»“æœ</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Servlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;My First Servlet!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
	<span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-3-éƒ¨ç½²servlet" tabindex="-1"><a class="header-anchor" href="#_3-2-3-éƒ¨ç½²servlet" aria-hidden="true">#</a> 3.2.3 éƒ¨ç½²Servlet</h4><p>ç¼–è¯‘MyServletåï¼Œå°†ç”Ÿæˆçš„.classæ–‡ä»¶æ”¾åœ¨WEB-INF/classes.æ–‡ä»¶ä¸­ã€‚</p><h4 id="_3-2-4-é…ç½®servlet" tabindex="-1"><a class="header-anchor" href="#_3-2-4-é…ç½®servlet" aria-hidden="true">#</a> 3.2.4 é…ç½®Servlet</h4><p>ç¼–å†™WEB-INFä¸‹é¡¹ç›®é…ç½®æ–‡ä»¶web.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span> <span class="token attr-name">xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span><span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!--1ã€æ·»åŠ serv1etèŠ‚ç‚¹--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.qf.servlet.MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
	
    <span class="token comment">&lt;!--2 æ·»åŠ servlet-mappingèŠ‚ç‚¹ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/myservlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„ï¼šurl-patterné…ç½®çš„å†…å®¹å°±æ˜¯æµè§ˆå™¨åœ°å€æ è¾“å…¥çš„URLä¸­é¡¹ç›®åç§°åèµ„æºçš„å†…å®¹</li></ul><h3 id="_3-3-è¿è¡Œæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-3-è¿è¡Œæµ‹è¯•" aria-hidden="true">#</a> 3.3 è¿è¡Œæµ‹è¯•</h3><p>å¯åŠ¨Tomcat,åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥http://localhost:8080/myweb/myservletè®¿é—®ï¼Œåœ¨Tomcatä¸­æ‰“å°æ—¶é—´è¡¨ç¤ºæˆåŠŸã€‚</p><h3 id="_3-4-å¸¸è§é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_3-4-å¸¸è§é”™è¯¯" aria-hidden="true">#</a> 3.4 å¸¸è§é”™è¯¯</h3><h4 id="_3-4-1-500é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_3-4-1-500é”™è¯¯" aria-hidden="true">#</a> 3.4.1 500é”™è¯¯</h4><p>æœåŠ¡ç«¯å‡ºç°å¼‚å¸¸</p><p><img src="/assets/image-20221129121735475-160d6da8.png" alt="image-20221129121735475"></p><h2 id="å››ã€http-åè®®" tabindex="-1"><a class="header-anchor" href="#å››ã€http-åè®®" aria-hidden="true">#</a> å››ã€HTTP åè®®</h2><h3 id="_5-1-ä»€ä¹ˆæ˜¯http" tabindex="-1"><a class="header-anchor" href="#_5-1-ä»€ä¹ˆæ˜¯http" aria-hidden="true">#</a> 5.1 ä»€ä¹ˆæ˜¯HTTP</h3><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®(HTTP,HyperText Transfer Protocol))æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œæ˜¯ä¸€ä¸ªåŸºäºè¯·æ±‚ä¸å“åº”æ¨¡å¼çš„ã€æ— çŠ¶æ€çš„ã€åº”ç”¨å±‚çš„åè®®ï¼Œè¿è¡ŒäºTCPåè®®åŸºç¡€ä¹‹ä¸Šã€‚</p><h3 id="_5-2-httpåè®®ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_5-2-httpåè®®ç‰¹ç‚¹" aria-hidden="true">#</a> 5.2 HTTPåè®®ç‰¹ç‚¹</h3><ul><li>æ”¯æŒå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰/æœåŠ¡å™¨æ¨¡å¼ã€‚</li><li>ç®€å•å¿«é€Ÿï¼šå®¢æˆ·ç«¯åªå‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ï¼ŒæœåŠ¡å™¨å³å¯å“åº”æ•°æ®ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¾ˆå¿«ã€‚è¯·æ±‚æ–¹æ³•å¸¸ç”¨çš„æœ‰GTã€POSTç­‰ã€‚</li><li>çµæ´»ï¼šHTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œä¼ è¾“çš„æ•°æ®ç±»å‹ç”±Content-Typeæ ‡è¯†ã€‚</li><li>æ— è¿æ¥ï¼šæ— è¿æ¥æŒ‡çš„æ˜¯æ¯æ¬¡TCPè¿æ¥åªå¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚åï¼Œå³æ–­å¼€è¿æ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚ <ul><li>HTTP1.0 ç‰ˆæœ¬æ˜¯ä¸€ä¸ªè¯·æ±‚å“åº”ä¹‹åï¼Œç›´æ¥å°±æ–­å¼€äº†ã€‚ç§°ä¸ºçŸ­è¿æ¥ã€‚</li><li>HTTP1.1 ç‰ˆæœ¬ä¸æ˜¯å“åº”åç›´æ¥å°±æ–­å¼€äº†ï¼Œè€Œæ˜¯ç­‰å‡ ç§’é’Ÿï¼Œè¿™å‡ ç§’é’Ÿä¹‹å†…æœ‰æ–°çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè¿˜æ˜¯é€šè¿‡ä¹‹å‰çš„è¿æ¥é€šé“æ¥æ”¶å‘æ¶ˆæ¯ï¼Œå¦‚æœè¿‡äº†è¿™å‡ ç§’é’Ÿç”¨æˆ·æ²¡æœ‰å‘é€æ–°çš„è¯·æ±‚ï¼Œå°±ä¼šæ–­å¼€è¿æ¥ã€‚ç§°ä¸ºé•¿è¿æ¥ã€‚</li></ul></li><li>æ— çŠ¶æ€ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚ <ul><li>æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚</li></ul></li></ul><h3 id="_5-3-httpåè®®é€šä¿¡æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-3-httpåè®®é€šä¿¡æµç¨‹" aria-hidden="true">#</a> 5.3 HTTPåè®®é€šä¿¡æµç¨‹</h3><ul><li>å®¢æˆ·ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰</li><li>å®¢æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨æ¥å—è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚è¿”å›ç›¸åº”çš„æ–‡ä»¶ä½œä¸ºåº”ç­”ã€‚</li><li>å®¢æˆ·ä¸æœåŠ¡å™¨å…³é—­è¿æ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ã€‚</li></ul><p><img src="/assets/image-20221129123827790-a3a7ce73.png" alt="image-20221129123827790"></p><h3 id="_5-4-è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡" tabindex="-1"><a class="header-anchor" href="#_5-4-è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡" aria-hidden="true">#</a> 5.4 è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡</h3><h4 id="_5-4-1-httpè¯·æ±‚æŠ¥æ–‡" tabindex="-1"><a class="header-anchor" href="#_5-4-1-httpè¯·æ±‚æŠ¥æ–‡" aria-hidden="true">#</a> 5.4.1 HTTPè¯·æ±‚æŠ¥æ–‡</h4><p>å½“æµè§ˆå™¨å‘WbæœåŠ¡å™¨å‘å‡ºè¯·æ±‚æ—¶ï¼Œå®ƒå‘æœåŠ¡å™¨ä¼ é€’äº†ä¸€ä¸ªæ•°æ®å—ï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚ä¿¡æ¯ï¼ˆè¯·æ±‚æŠ¥æ–‡ï¼‰ï¼ŒHTTPè¯·æ±‚ä¿¡æ¯ç”±4éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>è¯·æ±‚è¡Œè¯·æ±‚æ–¹æ³•/åœ°å€URIåè®®/ç‰ˆæœ¬</li><li>è¯·æ±‚å¤´(Request Header)</li><li>ç©ºè¡Œ</li><li>è¯·æ±‚æ­£æ–‡</li></ol><p><img src="/assets/image-20221129124006386-d91d0d0c.png" alt="image-20221129124006386"></p><h4 id="_5-4-2httpå“åº”æŠ¥æ–‡" tabindex="-1"><a class="header-anchor" href="#_5-4-2httpå“åº”æŠ¥æ–‡" aria-hidden="true">#</a> 5.4.2HTTPå“åº”æŠ¥æ–‡</h4><p>HTTPå“åº”æŠ¥æ–‡ä¸HTTPè¯·æ±‚æŠ¥æ–‡ç›¸ä¼¼ï¼ŒHTTPå“åº”ä¹Ÿç”±4ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><ol><li>çŠ¶æ€è¡Œ</li><li>å“åº”å¤´(Response Header)</li><li>ç©ºè¡Œ</li><li>å“åº”æ­£æ–‡</li></ol><p><img src="/assets/image-20221129124154833-9e9665b2.png" alt="image-20221129124154833"></p><h4 id="_5-4-3-å¸¸è§çŠ¶æ€ç " tabindex="-1"><a class="header-anchor" href="#_5-4-3-å¸¸è§çŠ¶æ€ç " aria-hidden="true">#</a> 5.4.3 å¸¸è§çŠ¶æ€ç </h4><table><thead><tr><th>çŠ¶æ€ä»£ç </th><th>çŠ¶æ€æè¿°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>200</td><td>OK</td><td>å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ</td></tr><tr><td>302</td><td>Found</td><td>ä¸´æ—¶é‡å®šå‘</td></tr><tr><td>403</td><td>Forbidden</td><td>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚æœåŠ¡å™¨é€šå¸¸ä¼šåœ¨å“åº”æ­£æ–‡ä¸­ç»™å‡ºä¸æä¾›æœåŠ¡çš„åŸå› </td></tr><tr><td>404</td><td>Not Found</td><td>è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œä¾‹å¦‚ï¼Œè¾“å…¥äº†é”™è¯¯çš„URLã€‚</td></tr><tr><td>500</td><td>Internal Server Error</td><td>æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ï¼Œå¯¼è‡´æ— æ³•å®Œæˆå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</td></tr></tbody></table><h2 id="å…­ã€servlet-è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#å…­ã€servlet-è¯¦è§£" aria-hidden="true">#</a> å…­ã€Servlet è¯¦è§£</h2><h3 id="_6-1-servletæ ¸å¿ƒæ¥å£å’Œç±»" tabindex="-1"><a class="header-anchor" href="#_6-1-servletæ ¸å¿ƒæ¥å£å’Œç±»" aria-hidden="true">#</a> 6.1 Servletæ ¸å¿ƒæ¥å£å’Œç±»</h3><p>åœ¨Servletä½“ç³»ç»“æ„ä¸­ï¼Œé™¤äº†å®ç°Servletæ¥å£ï¼Œè¿˜å¯ä»¥é€šè¿‡ç»§æ‰¿GenericServletæˆ–HttpServletç±»ï¼Œå®Œæˆç¼–å†™ã€‚</p><h4 id="_6-1-1-servletæ¥å£" tabindex="-1"><a class="header-anchor" href="#_6-1-1-servletæ¥å£" aria-hidden="true">#</a> 6.1.1 Servletæ¥å£</h4><p>åœ¨Servlet APIEä¸­æœ€é‡è¦çš„æ˜¯Servlet:æ¥å£ï¼Œæ‰€æœ‰Servletéƒ½ä¼šç›´æ¥æˆ–é—´æ¥çš„ä¸è¯¥æ¥å£å‘ç”Ÿè”ç³»ï¼Œæˆ–æ˜¯ç›´æ¥å®ç°è¯¥æ¥å£ï¼Œæˆ–é—´æ¥ç»§æ‰¿è‡ªå®ç°äº†è¯¥æ¥å£çš„ç±»ã€‚è¯¥æ¥å£åŒ…æ‹¬ä»¥ä¸‹äº”ä¸ªæ–¹æ³•ï¼š</p><ul><li>init(ServletConfig config)</li><li>ServletConfig getServletConfig()</li><li>service(ServletRequest req,ServletResponse res)</li><li>String getServletInfo()</li><li>destroy()</li></ul><h4 id="_6-1-2-genericservletæŠ½è±¡ç±»" tabindex="-1"><a class="header-anchor" href="#_6-1-2-genericservletæŠ½è±¡ç±»" aria-hidden="true">#</a> 6.1.2 GenericServletæŠ½è±¡ç±»</h4><p>GenericServletä½¿ç¼–å†™Servletå˜å¾—æ›´å®¹æ˜“ã€‚å®ƒæä¾›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•initå’Œdestroyçš„ç®€å•å®ç°ï¼Œè¦ç¼–å†™ä¸€èˆ¬çš„Servlet.,åªéœ€é‡å†™æŠ½è±¡serviceæ–¹æ³•å³å¯ã€‚</p><h4 id="_6-1-3-httpservletç±»" tabindex="-1"><a class="header-anchor" href="#_6-1-3-httpservletç±»" aria-hidden="true">#</a> 6.1.3 HttpServletç±»</h4><p>HttpServletæ˜¯ç»§æ‰¿GenericServletçš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥çš„æ‰©å±•ã€‚æä¾›å°†è¦è¢«å­ç±»åŒ–ä»¥åˆ›å»ºé€‚ç”¨äºWebç«™ç‚¹çš„HTTP servletçš„æŠ½è±¡ç±»ã€‚</p><p>HttpServletçš„å­ç±»è‡³å°‘å¿…é¡»é‡å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šå¸¸æ˜¯ä»¥ä¸‹è¿™äº›æ–¹æ³•ä¹‹ä¸€ï¼š</p><ol><li>doGetï¼Œå¦‚æœservletæ”¯æŒHTTP GETè¯·æ±‚</li><li>doPostï¼Œç”¨äºHTTP POSTè¯·æ±‚</li><li>doPutï¼Œ ç”¨äºHTTP PUTè¯·æ±‚</li><li>doDeleteï¼Œç”¨äºHTTP DELETEè¯·æ±‚</li></ol><h3 id="_6-2-servletä¸¤ç§åˆ›å»ºæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_6-2-servletä¸¤ç§åˆ›å»ºæ–¹å¼" aria-hidden="true">#</a> 6.2 Servletä¸¤ç§åˆ›å»ºæ–¹å¼</h3><h4 id="_6-2-1-å®ç°æ¥å£servlet" tabindex="-1"><a class="header-anchor" href="#_6-2-1-å®ç°æ¥å£servlet" aria-hidden="true">#</a> 6.2.1 å®ç°æ¥å£Servlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servletåˆ›å»ºçš„ç¬¬ä¸€ç§æ–¹å¼ï¼šå®ç°æ¥å£Servlet
 * */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet2</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span><span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> arg0<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;welcome use servlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦å®ç°æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•ã€‚</p><h4 id="_6-2-2-ç»§æ‰¿httpservlet" tabindex="-1"><a class="header-anchor" href="#_6-2-2-ç»§æ‰¿httpservlet" aria-hidden="true">#</a> 6.2.2 ç»§æ‰¿HttpServlet</h4><p>æ¨èä½¿ç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class HelloServlet
 * Servlet çš„ç¬¬äºŒç§åˆ›å»ºæ–¹å¼ï¼Œç»§æ‰¿HttpServlet.ä¹Ÿæ˜¯å¼€å‘ä¸­æ¨èçš„
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span><span class="token punctuation">{</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;welcome use servlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
    	<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-2-3-å¸¸è§é”™è¯¯" tabindex="-1"><a class="header-anchor" href="#_6-2-3-å¸¸è§é”™è¯¯" aria-hidden="true">#</a> 6.2.3 å¸¸è§é”™è¯¯</h4><ul><li>HTTP Status 404èµ„æºæ‰¾ä¸åˆ°ã€‚ <ul><li>ç¬¬ä¸€ç§æƒ…å†µï¼šåœ°å€ä¹¦å†™é”™è¯¯ã€‚</li><li>ç¬¬äºŒç§æƒ…å†µï¼šåœ°å€æ²¡æœ‰é—®é¢˜ï¼ŒæŠŠIDEAé¡¹ç›®ä¸­outç›®å½•åˆ é™¤ï¼Œç„¶åé‡æ–°è¿è¡Œã€‚</li></ul></li><li>Serlvetåœ°å€é…ç½®é‡å¤ã€‚both mapped to the url--pattern [/helloservlet] which is not permittedã€‚</li><li>Serlvetåœ°å€é…ç½®é”™è¯¯ã€‚æ¯”å¦‚æ²¡æœ‰å†™ /Invalid [helloservlet2] in servlet mappingã€‚</li></ul><h3 id="_6-3-servletä¸¤ç§é…ç½®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_6-3-servletä¸¤ç§é…ç½®æ–¹å¼" aria-hidden="true">#</a> 6.3 Servletä¸¤ç§é…ç½®æ–¹å¼</h3><h4 id="_6-3-1-ä½¿ç”¨web-xml" tabindex="-1"><a class="header-anchor" href="#_6-3-1-ä½¿ç”¨web-xml" aria-hidden="true">#</a> 6.3.1 ä½¿ç”¨web.xml</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
		 <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
		 <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Web_Day11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!--Servleté…ç½®--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- åç§° --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Servletçš„å…¨ç§°ç±»å --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.qf.web.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- å¯åŠ¨çš„ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°è¶Šå…ˆèµ·ä½œç”¨ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--æ˜ å°„é…ç½®--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--åç§°--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--èµ„æºçš„åŒ¹é…è§„åˆ™ï¼šç²¾ç¡®åŒ¹é…--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file-list</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file</span><span class="token punctuation">&gt;</span></span>login.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file-list</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-3-2-é…ç½®å±æ€§" tabindex="-1"><a class="header-anchor" href="#_6-3-2-é…ç½®å±æ€§" aria-hidden="true">#</a> 6.3.2 é…ç½®å±æ€§</h4><p><strong>url-patternå®šä¹‰åŒ¹é…è§„åˆ™ï¼Œå–å€¼è¯´æ˜ï¼š</strong></p><p>ç²¾ç¡®åŒ¹é… /å…·ä½“çš„åç§° åªæœ‰urlè·¯å¾„æ˜¯å…·ä½“çš„åç§°çš„æ—¶å€™æ‰ä¼šè§¦å‘Servlet</p><p>åç¼€åŒ¹é… *.XXX åªè¦æ˜¯ä»¥xxxç»“å°¾çš„å°±åŒ¹é…è§¦å‘Servlet</p><p>é€šé…ç¬¦åŒ¹é… /* åŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼ŒåŒ…å«æœåŠ¡å™¨çš„æ‰€æœ‰èµ„æº</p><p>é€šé…ç¬¦åŒ¹é… / åŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼ŒåŒ…å«æœåŠ¡å™¨çš„æ‰€æœ‰èµ„æºï¼Œä¸åŒ…æ‹¬.jsp</p><p><strong>load-on-startup</strong></p><p>1ã€å…ƒç´ æ ‡è®°å®¹å™¨æ˜¯å¦åº”è¯¥åœ¨webåº”ç”¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™å°±åŠ è½½è¿™ä¸ªservletã€‚</p><p>2ã€å®ƒçš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºserv1etè¢«åŠ è½½çš„å…ˆåé¡ºåºã€‚</p><p>3ã€å¦‚æœè¯¥å…ƒç´ çš„å€¼ä¸ºè´Ÿæ•°æˆ–è€…æ²¡æœ‰è®¾ç½®ï¼Œåˆ™å®¹å™¨ä¼šå½“Servletè¢«è¯·æ±‚æ—¶å†åŠ è½½ã€‚</p><p>4ã€å¦‚æœå€¼ä¸ºæ­£æ•´æ•°æˆ–è€…0æ—¶ï¼Œè¡¨ç¤ºå®¹å™¨åœ¨åº”ç”¨å¯åŠ¨æ—¶å°±åŠ è½½å¹¶åˆå§‹åŒ–è¿™ä¸ªservlet,å€¼è¶Šå°ï¼Œservletçš„ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå°±è¶Šå…ˆè¢«åŠ è½½ã€‚å€¼ç›¸åŒæ—¶ï¼Œå®¹å™¨å°±ä¼šè‡ªå·±é€‰æ‹©é¡ºåºæ¥åŠ è½½ã€‚</p><h4 id="_6-3-3-ä½¿ç”¨æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_6-3-3-ä½¿ç”¨æ³¨è§£" aria-hidden="true">#</a> 6.3.3 ä½¿ç”¨æ³¨è§£</h4><p>æ³¨è§£å½¢å¼åœ¨Servlet3.0ç‰ˆæœ¬åæ‰æ”¯æŒï¼Œæ¨èä½¿ç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* Servlet implementation class HelloServlet
* æ¼”ç¤ºServletæ³¨è§£å¼é…ç½®
*/</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span>
	
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">getwriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    	<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-webservlet" tabindex="-1"><a class="header-anchor" href="#_6-3-4-webservlet" aria-hidden="true">#</a> 6.3.4 @WebServlet</h3><p>æ³¨è§£ä¸­çš„å¸¸ç”¨å±æ€§</p><ul><li>nameï¼šSerlvetåå­—ï¼ˆå¯é€‰ï¼‰</li><li>valueï¼šé…ç½®urlè·¯å¾„ï¼Œå¯ä»¥é…ç½®å¤šä¸ª</li><li>urlPatternsï¼šé…ç½®urlè·¯å¾„ï¼Œå’Œvalueä½œç”¨ä¸€æ ·ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨</li><li>loadOnStartupï¼šé…ç½®Servletçš„åˆ›å»ºçš„æ—¶æœºï¼Œå¦‚æœæ˜¯0æˆ–è€…æ­£æ•°å¯åŠ¨ç¨‹åºæ—¶åˆ›å»ºï¼Œå¦‚æœæ˜¯è´Ÿæ•°ï¼Œåˆ™è®¿é—®æ—¶åˆ›å»ºã€‚æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</li></ul><h2 id="ä¸ƒã€servlet-åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€servlet-åº”ç”¨" aria-hidden="true">#</a> ä¸ƒã€Servlet åº”ç”¨</h2><h3 id="_7-1-requestå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_7-1-requestå¯¹è±¡" aria-hidden="true">#</a> 7.1 requestå¯¹è±¡</h3><p>åœ¨Servletä¸­ç”¨æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚éœ€è¦ç”¨doGetæˆ–doPostæ–¹æ³•çš„requestå¯¹è±¡</p><p><img src="/assets/image-20221130130934704-1eb8ae13.png" alt="image-20221130130934704"></p><h4 id="_7-1-1-get-å’Œ-post-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_7-1-1-get-å’Œ-post-åŒºåˆ«" aria-hidden="true">#</a> 7.1.1 get å’Œ post åŒºåˆ«</h4><p><strong>getè¯·æ±‚</strong></p><ul><li>get æäº¤çš„æ•°æ®ä¼šæ”¾åœ¨URLä¹‹åï¼Œä»¥?åˆ†å‰²URLå’Œä¼ è¾“æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥&amp;ç›¸è¿</li><li>get æ–¹å¼æ˜æ–‡ä¼ é€’ï¼Œæ•°æ®é‡å°ï¼Œä¸å®‰å…¨</li><li>æ•ˆç‡é«˜ï¼Œæµè§ˆå™¨é»˜è®¤è¯·æ±‚æ–¹å¼ä¸ºGETè¯·æ±‚</li><li>å¯¹åº”çš„Servletçš„æ–¹æ³•æ˜¯doGet</li></ul><p><strong>postè¯·æ±‚</strong></p><ul><li>postæ–¹æ³•æ˜¯æŠŠæäº¤çš„æ•°æ®æ”¾åœ¨HTTPåŒ…çš„Bodyä¸­</li><li>å¯†æ–‡ä¼ é€’æ•°æ®ï¼Œæ•°æ®é‡å¤§ï¼Œå®‰å…¨</li><li>æ•ˆç‡ç›¸å¯¹æ²¡æœ‰GETé«˜</li><li>å¯¹åº”çš„Servletçš„æ–¹æ³•æ˜¯doPost</li></ul><h4 id="_7-1-2-request-ä¸»è¦æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_7-1-2-request-ä¸»è¦æ–¹æ³•" aria-hidden="true">#</a> 7.1.2 request ä¸»è¦æ–¹æ³•</h4><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>String getParameter(String name)</td><td>æ ¹æ®è¡¨å•ç»„ä»¶åç§°è·å–æäº¤æ•°æ®</td></tr><tr><td>void setCharacterEncoding(String charset)</td><td>æŒ‡å®šæ¯ä¸ªè¯·æ±‚çš„ç¼–ç </td></tr></tbody></table><h4 id="_7-1-3-request-åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_7-1-3-request-åº”ç”¨" aria-hidden="true">#</a> 7.1.3 request åº”ç”¨</h4><p><strong>HTMLé¡µé¢</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tit1e</span><span class="token punctuation">&gt;</span></span>æ¬¢è¿é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tit1e</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ¬¢è¿ä½ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HelloServlet<span class="token punctuation">&quot;</span></span><span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>å§“åï¼š&lt;/1abel&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>å¹´é¾„ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æäº¤<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Servletä»£ç </strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/HelloServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span><span class="token punctuation">{</span>
    
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        
        <span class="token operator">/</span>è·å–è¡¨å•æäº¤çš„å§“å
        <span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–å¹´é¾„</span>
        <span class="token class-name">String</span> age<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æœåŠ¡ç«¯è¾“å‡ºæ‰“å°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;å‘æ¥ä¿¡æ¯ï¼šå§“åï¼š&quot;</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">&quot;--&gt;å¹´é¾„ï¼š&quot;</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    	<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-1-4-get-è¯·æ±‚æ”¶å‚é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_7-1-4-get-è¯·æ±‚æ”¶å‚é—®é¢˜" aria-hidden="true">#</a> 7.1.4 get è¯·æ±‚æ”¶å‚é—®é¢˜</h4><p>äº§ç”Ÿä¹±ç æ˜¯å› ä¸ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ²Ÿé€šçš„ç¼–ç ä¸ä¸€è‡´é€ æˆçš„ï¼Œå› æ­¤è§£å†³çš„åŠæ³•æ˜¯ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è®¾ç½®ä¸€ä¸ªç»Ÿä¸€çš„ç¼–ç ï¼Œä¹‹åå°±æŒ‰ç…§æ­¤ç¼–ç è¿›è¡Œæ•°æ®çš„ä¼ è¾“å’Œæ¥æ”¶</p><h4 id="_7-1-5-get-ä¸­æ–‡ä¹±ç " tabindex="-1"><a class="header-anchor" href="#_7-1-5-get-ä¸­æ–‡ä¹±ç " aria-hidden="true">#</a> 7.1.5 get ä¸­æ–‡ä¹±ç </h4><p>åœ¨Tomcat7åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œå®¢æˆ·ç«¯ä»¥UTF-8çš„ç¼–ç ä¼ è¾“æ•°æ®åˆ°æœåŠ¡å™¨ç«¯ï¼Œè€ŒæœåŠ¡å™¨ç«¯çš„requestå¯¹è±¡ä½¿ç”¨çš„æ˜¯ISO8859-1è¿™ä¸ªå­—ç¬¦ç¼–ç æ¥æ¥æ”¶æ•°æ®ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ²Ÿé€šçš„ç¼–ç ä¸ä¸€è‡´å› æ­¤æ‰ä¼šäº§ç”Ÿä¸­æ–‡ä¹±ç çš„ã€‚</p><ul><li>è§£å†³åŠæ³•ï¼šåœ¨æ¥æ”¶åˆ°æ•°æ®åï¼Œå…ˆè·å–requestå¯¹è±¡ä»¥S08859-1å­—ç¬¦ç¼–ç æ¥æ”¶åˆ°çš„åŸå§‹æ•°æ®çš„å­—èŠ‚æ•°ç»„ï¼Œç„¶åé€šè¿‡å­—èŠ‚æ•°ç»„ä»¥æŒ‡å®šçš„ç¼–ç æ„å»ºå­—ç¬¦ä¸²ï¼Œè§£å†³ä¹±ç é—®é¢˜ã€‚</li><li>Tomcata8 çš„ç‰ˆæœ¬ä¸­getæ–¹å¼ä¸ä¼šå‡ºç°ä¹±ç äº†ï¼Œå› ä¸ºæœåŠ¡å™¨å¯¹urlçš„ç¼–ç æ ¼å¼å¯ä»¥è¿›è¡Œè‡ªåŠ¨è½¬æ¢ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class HelloServlet
 * æ¼”ç¤ºServletçš„GETè¯·æ±‚ï¼Œä¸­æ–‡ä¹±ç çš„é—®é¢˜
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/GETServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–è¡¨å•æäº¤çš„å§“å</span>
        <span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;IS08859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–å¹´é¾„</span>
        <span class="token class-name">String</span> age <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æœåŠ¡ç«¯è¾“å‡ºæ‰“å°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;å‘æ¥ä¿¡æ¯ï¼šå§“åï¼š&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;---&gt;å¹´é¾„ï¼š&quot;</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>                   
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-1-6-post-ä¸­æ–‡ä¹±ç " tabindex="-1"><a class="header-anchor" href="#_7-1-6-post-ä¸­æ–‡ä¹±ç " aria-hidden="true">#</a> 7.1.6 post ä¸­æ–‡ä¹±ç </h4><p>ç”±äºå®¢æˆ·ç«¯æ˜¯ä»¥UTF-8å­—ç¬¦ç¼–ç å°†è¡¨å•æ•°æ®ä¼ è¾“åˆ°æœåŠ¡å™¨ç«¯çš„ï¼Œå› æ­¤æœåŠ¡å™¨ä¹Ÿéœ€è¦è®¾ç½®ä»¥UTF-8å­—ç¬¦ç¼–ç è¿›è¡Œæ¥æ”¶ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ä»ServletRequestæ¥å£ç»§æ‰¿è€Œæ¥çš„setCharacterEncoding(charset)æ–¹æ³•è¿›è¡Œç»Ÿä¸€çš„ç¼–ç è®¾ç½®ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class HelloServlet
 * æ¼”ç¤ºServ1letçš„GETè¯·æ±‚ï¼Œä¸­æ–‡ä¹±ç çš„é—®é¢˜
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/GETServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//è®¾ç½®è¯·æ±‚å‚æ•°çš„ç¼–ç æ ¼å¼--å¯¹GETæ— æ•ˆ</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–è¡¨å•æäº¤çš„ä¿¡æ¯</span>
        <span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æœåŠ¡ç«¯è¾“å‡ºæ‰“å°</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;å‘æ¥ä¿¡æ¯ï¼š&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-response-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_7-2-response-å¯¹è±¡" aria-hidden="true">#</a> 7.2 response å¯¹è±¡</h3><p>responseå¯¹è±¡ç”¨äºå“åº”å®¢æˆ·è¯·æ±‚å¹¶å‘å®¢æˆ·ç«¯è¾“å‡ºä¿¡æ¯ã€‚</p><p><img src="/assets/image-20221130132800225-b624beb0.png" alt="image-20221130132800225"></p><h4 id="_7-2-1-response-ä¸»è¦æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_7-2-1-response-ä¸»è¦æ–¹æ³•" aria-hidden="true">#</a> 7.2.1 response:ä¸»è¦æ–¹æ³•</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>setHeader(name, value)</td><td>è®¾ç½®å“åº”ä¿¡æ¯å¤´</td></tr><tr><td>setContentType(String)</td><td>è®¾ç½®å“åº”æ–‡ä»¶ç±»å‹ã€å“åº”å¼çš„ç¼–ç æ ¼å¼</td></tr><tr><td>setCharacterEncoding(String)</td><td>è®¾ç½®æœåŠ¡ç«¯å“åº”å†…å®¹ç¼–ç æ ¼å¼</td></tr><tr><td>getWriter()</td><td>è·å–å­—ç¬¦è¾“å‡ºæµ</td></tr></tbody></table><h4 id="_7-2-2-responseåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_7-2-2-responseåº”ç”¨" aria-hidden="true">#</a> 7.2.2 responseåº”ç”¨</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//è·å–è¯·æ±‚å‚æ•°ä»£ç çœç•¥</span>
<span class="token comment">//è·å–è¾“å‡ºæµ</span>
<span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&lt;title&gt;login&lt;/title&gt;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;Login Success!!!&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// out.print1n(&quot;&lt;h1&gt;ç™»å½•æˆåŠŸï¼ï¼&lt;/h1&gt;&quot;):</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœè¾“å‡ºå†…å®¹åŒ…å«ä¸­æ–‡ï¼Œåˆ™å‡ºç°ä¹±ç ï¼Œå› ä¸ºæœåŠ¡å™¨é»˜è®¤é‡‡ç”¨å¼•S08859-1ç¼–ç å“åº”å†…å®¹</li></ul><h4 id="_7-2-3-è§£å†³è¾“å‡ºä¸­æ–‡ä¹±ç " tabindex="-1"><a class="header-anchor" href="#_7-2-3-è§£å†³è¾“å‡ºä¸­æ–‡ä¹±ç " aria-hidden="true">#</a> 7.2.3 è§£å†³è¾“å‡ºä¸­æ–‡ä¹±ç </h4><p><strong>æ–¹æ³•ä¸€ï¼š</strong>ï¼ˆä¸æ¨èï¼‰</p><ul><li>è®¾ç½®æœåŠ¡å™¨ç«¯å“åº”çš„ç¼–ç æ ¼å¼</li><li>è®¾ç½®å®¢æˆ·ç«¯å“åº”å†…å®¹çš„å¤´å†…å®¹çš„æ–‡ä»¶ç±»å‹åŠç¼–ç æ ¼å¼</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">/</span>è®¾ç½®å“åº”ç¼–ç æ ¼å¼ä¸ºutf<span class="token operator">-</span><span class="token number">8</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ–¹æ³•äºŒï¼š</strong>ï¼ˆæ¨èï¼‰</p><ul><li>åŒæ—¶è®¾ç½®æœåŠ¡ç«¯çš„ç¼–ç æ ¼å¼å’Œå®¢æˆ·ç«¯å“åº”çš„æ–‡ä»¶ç±»å‹åŠå“åº”æ—¶çš„ç¼–ç æ ¼å¼</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7-3-ç»¼åˆæ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_7-3-ç»¼åˆæ¡ˆä¾‹" aria-hidden="true">#</a> 7.3 ç»¼åˆæ¡ˆä¾‹</h3><ul><li>è¦æ±‚ï¼šå®ç°ç™»å½•åŠŸèƒ½ï¼Œå±•ç¤ºæ‰€æœ‰ç”¨æˆ·åŠŸèƒ½</li><li>ä»¥ä¸‹ä»…å±•ç¤ºå…³é”®ä»£ç </li></ul><h4 id="_7-3-1-æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#_7-3-1-æ•°æ®åº“" aria-hidden="true">#</a> 7.3.1 æ•°æ®åº“</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> admin<span class="token punctuation">(</span>
	username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	PASSWORD <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	phone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	Address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span>PASSWORD<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>address<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;gav1n&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;12345678901&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;åŒ—äº¬å¸‚æ˜Œå¹³åŒº&#39;</span><span class="token punctuation">)</span>ï¼š
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span>PASSWORD<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>address<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;aaron&#39;</span><span class="token punctuation">,</span><span class="token number">123456</span><span class="token string">&#39;,&#39;</span><span class="token number">12345678901</span><span class="token string">&#39;,&#39;</span>åŒ—äº¬å¸‚æ˜Œå¹³åŒº&#39;<span class="token punctuation">)</span>ï¼š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-2-dbutils" tabindex="-1"><a class="header-anchor" href="#_7-3-2-dbutils" aria-hidden="true">#</a> 7.3.2 DBUtils</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>emp<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DbUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DruidDataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">&gt;</span></span> <span class="token constant">THREAD_LOCAL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;/database.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DruidDataSource</span><span class="token punctuation">)</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token constant">THREAD_LOCAL</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token constant">THREAD_LOCAL</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token function">closeAll</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token function">closeAll</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closeAll</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token constant">THREAD_LOCAL</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-3-admindaoimpl" tabindex="-1"><a class="header-anchor" href="#_7-3-3-admindaoimpl" aria-hidden="true">#</a> 7.3.3 AdminDaoImpl</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">AdminDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">DbUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span></span><span class="token class-name">QueryRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanListHandler</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AdminDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Admin</span> admin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Admin</span> admin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Admin</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Admin</span> admin <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                            <span class="token string">&quot;select * from admin where username=?;&quot;</span><span class="token punctuation">,</span>
                                            <span class="token keyword">new</span> <span class="token class-name">BeanHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Admin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> admin<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> admins <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                   <span class="token string">&quot;select * from admin&quot;</span><span class="token punctuation">,</span>
                                                   <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Admin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> admins<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-4-adminserviceimpl" tabindex="-1"><a class="header-anchor" href="#_7-3-4-adminserviceimpl" aria-hidden="true">#</a> 7.3.4 AdminServiceImpl</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">AdminDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminDaoImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">DbUtils</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AdminService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AdminDao</span> adminDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Admin</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Admin</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Admin</span> admin <span class="token operator">=</span> adminDao<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>admin<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    result <span class="token operator">=</span> admin<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> <span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> admins <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            admins <span class="token operator">=</span> adminDao<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> admins<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-5-htmlä»£ç " tabindex="-1"><a class="header-anchor" href="#_7-3-5-htmlä»£ç " aria-hidden="true">#</a> 7.3.5 HTMLä»£ç </h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>ç™»å½•é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ç”¨æˆ·å:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        å¯†ç :<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç™»å½•<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-6-loginservlet" tabindex="-1"><a class="header-anchor" href="#_7-3-6-loginservlet" aria-hidden="true">#</a> 7.3.6 LoginServlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.æ”¶å‚</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.è°ƒç”¨ä¸šåŠ¡é€»è¾‘</span>
        <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Admin</span> admin <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.å¤„ç†ç»“æœ</span>
        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>admin<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ªç»“æœé¡µé¢ï¼Œæ˜¾ç¤ºç™»å½•æˆåŠŸ</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;ç»“æœé¡µé¢&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ç™»å½•æˆåŠŸï¼&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ªç»“æœé¡µé¢ï¼Œæ˜¾ç¤ºç™»å½•å¤±è´¥ï¼</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;ç»“æœé¡µé¢&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ç™»å½•å¤±è´¥ï¼&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-7-showalladminservlet" tabindex="-1"><a class="header-anchor" href="#_7-3-7-showalladminservlet" aria-hidden="true">#</a> 7.3.7 ShowAllAdminServlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showall&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowAllAdminServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> adminList <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>adminList<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;æ˜¾ç¤ºæ‰€æœ‰&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;table border=&#39;1&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;username&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;password&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;phone&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;address&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;/tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Admin</span> admin <span class="token operator">:</span> adminList<span class="token punctuation">)</span><span class="token punctuation">{</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;/tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/table&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;æ˜¾ç¤ºæ‰€æœ‰&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h3&gt;å½“å‰æ²¡æœ‰ç”¨æˆ·ï¼&lt;/h3&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…«ã€è½¬å‘ä¸é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#å…«ã€è½¬å‘ä¸é‡å®šå‘" aria-hidden="true">#</a> å…«ã€è½¬å‘ä¸é‡å®šå‘</h2><h3 id="_8-1-ç°æœ‰é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_8-1-ç°æœ‰é—®é¢˜" aria-hidden="true">#</a> 8.1 ç°æœ‰é—®é¢˜</h3><p>åœ¨ä¹‹å‰æ¡ˆä¾‹ä¸­ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘å’Œæ˜¾ç¤ºç»“æœé¡µé¢éƒ½åœ¨åŒä¸€ä¸ªServlet!é‡Œï¼Œå°±ä¼šäº§ç”Ÿè®¾è®¡é—®é¢˜</p><ul><li>ä¸ç¬¦åˆå•ä¸€èŒèƒ½åŸåˆ™ã€å„å¸å…¶èŒçš„æ€æƒ³</li><li>ä¸åˆ©äºåç»­çš„ç»´æŠ¤</li></ul><p>åº”è¯¥å°†ä¸šåŠ¡é€»è¾‘å’Œæ˜¾ç¤ºç»“æœåˆ†ç¦»å¼€</p><p><img src="/assets/image-20221130141042330-3e5cb2c4.png" alt="image-20221130141042330"></p><h4 id="_8-1-1-ä¸šåŠ¡æ˜¾ç¤ºåˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#_8-1-1-ä¸šåŠ¡æ˜¾ç¤ºåˆ†ç¦»" aria-hidden="true">#</a> 8.1.1 ä¸šåŠ¡æ˜¾ç¤ºåˆ†ç¦»</h4><p><img src="/assets/image-20221130141123049-4cd9dbf2.png" alt="image-20221130141123049"></p><ul><li>é—®é¢˜ï¼šä¸šåŠ¡é€»è¾‘å’Œæ˜¾ç¤ºç»“æœåˆ†ç¦»åï¼Œå¦‚ä½•è·³è½¬åˆ°æ˜¾ç¤ºç»“æœçš„Servlet?</li><li>ä¸šåŠ¡é€»è¾‘å¾—åˆ°çš„æ•°æ®ç»“æœå¦‚ä½•ä¼ é€’ç»™æ˜¾ç¤ºç»“æœçš„Servlet?</li></ul><h3 id="_8-2-è½¬å‘" tabindex="-1"><a class="header-anchor" href="#_8-2-è½¬å‘" aria-hidden="true">#</a> 8.2 è½¬å‘</h3><p>è½¬å‘çš„ä½œç”¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ä¸Šçš„å…¶ä»–èµ„æºï¼Œä»¥å…±åŒå®Œæˆä¸€æ¬¡è¯·æ±‚çš„å¤„ç†ã€‚</p><h4 id="_8-2-1-é¡µé¢è·³è½¬" tabindex="-1"><a class="header-anchor" href="#_8-2-1-é¡µé¢è·³è½¬" aria-hidden="true">#</a> 8.2.1 é¡µé¢è·³è½¬</h4><p>åœ¨è°ƒç”¨ä¸šåŠ¡é€»è¾‘çš„Servletä¸­ï¼Œç¼–å†™ä»¥ä¸‹ä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/URL-pattern&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="/assets/image-20221130141248437-b0033a5f.png" alt="image-20221130141248437"></p><ul><li>ä½¿ç”¨forwardè·³è½¬æ—¶ï¼Œæ˜¯åœ¨æœåŠ¡å™¨å†…éƒ¨è·³è½¬ï¼Œåœ°å€æ ä¸å‘ç”Ÿå˜åŒ–ï¼Œå±äºåŒä¸€æ¬¡è¯·æ±‚</li></ul><h4 id="_8-2-2-æ•°æ®ä¼ é€’" tabindex="-1"><a class="header-anchor" href="#_8-2-2-æ•°æ®ä¼ é€’" aria-hidden="true">#</a> 8.2.2 æ•°æ®ä¼ é€’</h4><p>forwardï¼šè¡¨ç¤ºä¸€æ¬¡è¯·æ±‚ï¼Œæ˜¯åœ¨æœåŠ¡å™¨å†…éƒ¨è·³è½¬ï¼Œå¯ä»¥å…±äº«åŒä¸€æ¬¡requestä½œç”¨åŸŸä¸­çš„æ•°æ®</p><ul><li>requestä½œç”¨åŸŸï¼šæ‹¥æœ‰å­˜å‚¨æ•°æ®çš„ç©ºé—´ï¼Œä½œç”¨èŒƒå›´æ˜¯ä¸€æ¬¡è¯·æ±‚æœ‰æ•ˆï¼ˆä¸€æ¬¡è¯·æ±‚å¯ä»¥ç»è¿‡å¤šæ¬¡è½¬å‘ï¼‰ <ul><li>å¯ä»¥å°†æ•°æ®å­˜å…¥requeståï¼Œåœ¨ä¸€æ¬¡è¯·æ±‚è¿‡ç¨‹ä¸­çš„ä»»ä½•ä½ç½®è¿›è¡Œè·å–</li><li>å¯ä¼ é€’ä»»ä½•æ•°æ®ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡ã€æ•°ç»„ã€é›†åˆç­‰ï¼‰</li></ul></li><li>å­˜æ•°æ®ï¼š<code>request.setAttribute(key, value);</code><ul><li>ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨åœ¨requesttä½œç”¨åŸŸä¸­ã€‚keyä¸ºStringç±»å‹ï¼Œvalueä¸ºObjectç±»å‹</li></ul></li><li>å–æ•°æ®ï¼š<code>request.getAttribute(key);</code><ul><li>é€šè¿‡Stringç±»å‹çš„keyè®¿é—®Objectç±»å‹çš„value</li></ul></li></ul><h4 id="_8-2-3-è½¬å‘ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_8-2-3-è½¬å‘ç‰¹ç‚¹" aria-hidden="true">#</a> 8.2.3 è½¬å‘ç‰¹ç‚¹</h4><ul><li>è½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸º</li><li>è½¬å‘æ˜¯æµè§ˆå™¨åªåšäº†ä¸€æ¬¡è®¿é—®è¯·æ±‚</li><li>è½¬å‘æµè§ˆå™¨åœ°å€ä¸å˜</li><li>è½¬å‘ä¸¤æ¬¡è·³è½¬ä¹‹é—´ä¼ è¾“çš„ä¿¡æ¯ä¸ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡requestè¿›è¡Œæ•°æ®çš„ä¼ é€’ã€‚</li><li>è½¬å‘åªèƒ½å°†è¯·æ±‚è½¬å‘ç»™åŒä¸€ä¸ªWebåº”ç”¨ä¸­çš„ç»„ä»¶</li></ul><h3 id="_8-3-é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#_8-3-é‡å®šå‘" aria-hidden="true">#</a> 8.3 é‡å®šå‘</h3><p>é‡å®šå‘ä½œç”¨åœ¨å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ªæ–°çš„è¯·æ±‚åœ°å€ï¼Œå®¢æˆ·ç«¯é‡æ–°å‘é€æ–°è¯·æ±‚ã€‚</p><h4 id="_8-3-1-é¡µé¢è·³è½¬" tabindex="-1"><a class="header-anchor" href="#_8-3-1-é¡µé¢è·³è½¬" aria-hidden="true">#</a> 8.3.1 é¡µé¢è·³è½¬</h4><p>åœ¨è°ƒç”¨ä¸šåŠ¡é€»è¾‘çš„Servletä¸­ï¼Œç¼–å†™ä»¥ä¸‹ä»£ç </p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;ç›®æ ‡URI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>**URlï¼š**ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦(Uniform Resource ldentifier)ï¼Œç”¨æ¥è¡¨ç¤ºæœåŠ¡å™¨ä¸­å®šä½ä¸€ä¸ªèµ„æºï¼Œèµ„æºåœ¨webé¡¹ç›®ä¸­çš„è·¯å¾„(/project/source)</p><p><img src="/assets/image-20221130141844125-0c74dc7d.png" alt="image-20221130141844125"></p><ul><li>ä½¿ç”¨redirectè·³è½¬æ—¶ï¼Œæ˜¯åœ¨å®¢æˆ·ç«¯è·³è½¬ï¼Œåœ°å€æ å‘ç”Ÿå˜åŒ–ï¼Œå±äºå¤šæ¬¡è¯·æ±‚</li></ul><h4 id="_8-3-2-æ•°æ®ä¼ é€’" tabindex="-1"><a class="header-anchor" href="#_8-3-2-æ•°æ®ä¼ é€’" aria-hidden="true">#</a> 8.3.2 æ•°æ®ä¼ é€’</h4><p>sendRedirectè·³è½¬æ—¶ï¼Œåœ°å€æ æ”¹å˜ï¼Œä»£è¡¨å®¢æˆ·ç«¯é‡æ–°å‘é€çš„è¯·æ±‚ã€‚å±äºä¸¤æ¬¡è¯·æ±‚</p><ul><li>responseæ²¡æœ‰ä½œç”¨åŸŸï¼Œä¸¤æ¬¡requestè¯·æ±‚ä¸­çš„æ•°æ®æ— æ³•å…±äº«</li><li>ä¼ é€’æ•°æ®ï¼šé€šè¿‡URIçš„æ‹¼æ¥è¿›è¡Œæ•°æ®ä¼ é€’(&quot;/WebProject/b?username=tom&quot;);</li><li>è·å–æ•°æ®ï¼šrequest.getParameter(&quot;username&quot;);</li></ul><h4 id="_8-3-3-é‡å®šå‘ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_8-3-3-é‡å®šå‘ç‰¹ç‚¹" aria-hidden="true">#</a> 8.3.3 é‡å®šå‘ç‰¹ç‚¹</h4><ul><li>é‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚</li><li>é‡å®šå‘æ˜¯æµè§ˆå™¨åšäº†è‡³å°‘ä¸¤æ¬¡çš„è®¿é—®è¯·æ±‚ã€‚</li><li>é‡å®šå‘æµè§ˆå™¨åœ°å€æ”¹å˜ã€‚</li><li>é‡å®šå‘ä¸¤æ¬¡è·³è½¬ä¹‹é—´ä¼ è¾“çš„ä¿¡æ¯ä¼šä¸¢å¤±(requestèŒƒå›´)</li><li>é‡å®šå‘å¯ä»¥æŒ‡å‘ä»»ä½•çš„èµ„æºï¼ŒåŒ…æ‹¬å½“å‰åº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–èµ„æºã€åŒä¸€ä¸ªç«™ç‚¹ä¸Šçš„å…¶ä»–åº”ç”¨ç¨‹åºä¸­çš„èµ„æºã€å…¶ä»–ç«™ç‚¹çš„èµ„æºã€‚</li></ul><h3 id="_8-4-è½¬å‘ã€é‡å®šå‘æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_8-4-è½¬å‘ã€é‡å®šå‘æ€»ç»“" aria-hidden="true">#</a> 8.4 è½¬å‘ã€é‡å®šå‘æ€»ç»“</h3><p>å½“ä¸¤ä¸ªServletéœ€è¦ä¼ é€’æ•°æ®æ—¶ï¼Œé€‰æ‹©forwardè½¬å‘ã€‚ä¸å»ºè®®ä½¿ç”¨sendRedirectè¿›è¡Œä¼ é€’</p><h2 id="ä¹ã€servletç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ä¹ã€servletç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ä¹ã€Servletç”Ÿå‘½å‘¨æœŸ</h2><h3 id="_9-1-ç”Ÿå‘½å‘¨æœŸå››ä¸ªé˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#_9-1-ç”Ÿå‘½å‘¨æœŸå››ä¸ªé˜¶æ®µ" aria-hidden="true">#</a> 9.1 ç”Ÿå‘½å‘¨æœŸå››ä¸ªé˜¶æ®µ</h3><h4 id="_9-1-1-å®ä¾‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_9-1-1-å®ä¾‹åŒ–" aria-hidden="true">#</a> 9.1.1 å®ä¾‹åŒ–</h4><p>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®Servletæ—¶ï¼Œç”±å®¹å™¨è°ƒç”¨Servletçš„æ„é€ å™¨åˆ›å»ºå…·ä½“çš„Servletå¯¹è±¡ã€‚ä¹Ÿå¯ä»¥åœ¨å®¹å™¨å¯åŠ¨ä¹‹åç«‹åˆ»åˆ›å»ºå®ä¾‹ã€‚ä½¿ç”¨å¦‚ä¸‹ä»£ç å¯ä»¥è®¾ç½®Servletæ˜¯å¦åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶å°±åˆ›å»ºã€‚</p><ul><li>æ³¨æ„ï¼šåªæ‰§è¡Œä¸€æ¬¡</li></ul><h4 id="_9-1-2-åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_9-1-2-åˆå§‹åŒ–" aria-hidden="true">#</a> 9.1.2 åˆå§‹åŒ–</h4><p>åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œinit0æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•åœ¨javax.servlet.Servletæ¥å£ä¸­å®šä¹‰ã€‚å…¶ä¸­ï¼Œæ–¹æ³•ä»¥ä¸€ä¸ªServletConfigç±»å‹çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p><ul><li>æ³¨æ„ï¼šinitæ–¹æ³•åªè¢«æ‰§è¡Œä¸€æ¬¡</li></ul><h4 id="_9-1-3-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_9-1-3-æœåŠ¡" aria-hidden="true">#</a> 9.1.3 æœåŠ¡</h4><p>å½“å®¢æˆ·ç«¯æœ‰ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå®¹å™¨å°±ä¼šå°†è¯·æ±‚ServletRequestä¸å“åº”ServletResponseå¯¹è±¡è½¬ç»™Servlet,ä»¥å‚æ•°çš„å½¢å¼ä¼ ç»™serviceæ–¹æ³•ã€‚</p><ul><li>æ­¤æ–¹æ³•ä¼šæ‰§è¡Œå¤šæ¬¡</li></ul><h4 id="_9-1-4-é”€æ¯" tabindex="-1"><a class="header-anchor" href="#_9-1-4-é”€æ¯" aria-hidden="true">#</a> 9.1.4 é”€æ¯</h4><p>å½“Servletå®¹å™¨åœæ­¢æˆ–è€…é‡æ–°å¯åŠ¨éƒ½ä¼šå¼•èµ·é”€æ¯Servletå¯¹è±¡å¹¶è°ƒç”¨destroyæ–¹æ³•ã€‚</p><ul><li>destroyæ–¹æ³•æ‰§è¡Œä¸€æ¬¡</li></ul><h4 id="_9-1-5-servletæ‰§è¡Œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#_9-1-5-servletæ‰§è¡Œæµç¨‹" aria-hidden="true">#</a> 9.1.5 Servletæ‰§è¡Œæµç¨‹</h4><p><img src="/assets/image-20221130142442457-9c9c17ac.png" alt="image-20221130142442457"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class LifeServlet
 * æ¼”ç¤ºServletçš„ç”Ÿå‘½å‘¨æœŸï¼š
 * 1ã€å®ä¾‹åŒ–
 * 2ã€init:åˆå§‹åŒ–
 * 3ã€service:æœåŠ¡
 * 4ã€destory:é”€æ¯
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/lifeservlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LifeServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">LifeServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1ã€å®Œæˆäº†å®ä¾‹åŒ–&quot;</span><span class="token punctuation">)</span>ï¼š
	<span class="token punctuation">}</span>

    <span class="token annotation punctuation">@0verride</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2ã€å®Œæˆäº†åˆå§‹åŒ–&quot;</span><span class="token punctuation">)</span>ï¼š
    <span class="token punctuation">}</span>
	
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3ã€å°±ç»ªä¸­&quot;</span><span class="token punctuation">)</span>ï¼š
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Served at:&quot;</span><span class="token punctuation">)</span><span class="token function">append</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print1n</span><span class="token punctuation">(</span><span class="token string">&quot;4ã€é”€æ¯äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åã€servletç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#åã€servletç‰¹æ€§" aria-hidden="true">#</a> åã€Servletç‰¹æ€§</h2><h3 id="_10-1-çº¿ç¨‹å®‰å…¨é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_10-1-çº¿ç¨‹å®‰å…¨é—®é¢˜" aria-hidden="true">#</a> 10.1 çº¿ç¨‹å®‰å…¨é—®é¢˜</h3><p>Servletåœ¨è®¿é—®ä¹‹åï¼Œä¼šæ‰§è¡Œå®ä¾‹åŒ–æ“ä½œï¼Œåˆ›å»ºä¸€ä¸ªServletå¯¹è±¡ã€‚è€Œæˆ‘ä»¬Tomcatå®¹å™¨å¯ä»¥åŒæ—¶å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®åŒä¸€ä¸ªServletï¼Œå¦‚æœåœ¨æ–¹æ³•ä¸­å¯¹æˆå‘˜å˜é‡åšä¿®æ”¹æ“ä½œï¼Œå°±ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚</p><h3 id="_10-2-å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨" tabindex="-1"><a class="header-anchor" href="#_10-2-å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨" aria-hidden="true">#</a> 10.2 å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨</h3><ul><li>synchronized <ul><li>å°†å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä»£ç æ”¾åˆ°åŒæ­¥ä»£ç å—ä¸­</li></ul></li><li>å®ç°SingleThreadModelæ¥å£ <ul><li>servletå®ç°SingleThreadModelæ¥å£åï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ›å»ºservletå®ä¾‹ï¼Œè¿™æ ·æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å°±ä¸å­˜åœ¨å…±äº«èµ„æºçš„é—®é¢˜ï¼Œä½†æ˜¯servletå“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„æ•ˆç‡å¤ªä½ï¼Œæ‰€ä»¥å·²ç»æ·˜æ±°ã€‚</li></ul></li><li>å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">SingleThreadModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SafeServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token keyword">implements</span> <span class="token class-name">SingleThreadModel</span><span class="token punctuation">{</span>
	<span class="token comment">//private String message =&quot;&quot;</span>

    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> message <span class="token operator">=</span><span class="token string">&quot;&quot;</span>
        <span class="token comment">//å‡è®¾1ã€æ¥æ”¶å‚æ•°</span>
        <span class="token comment">//2ã€è°ƒç”¨ä¸šåŠ¡é€»è¾‘å¾—åˆ°ç™»å½•ç»“æœ</span>
        message<span class="token operator">=</span><span class="token string">&quot;ç™»å½•æˆåŠŸ&quot;</span>ï¼›<span class="token comment">//ç™»å½•å¤±è´¥ï¼</span>
        <span class="token class-name">PrintWriter</span> printWriter resp<span class="token punctuation">.</span><span class="token function">getwriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span><span class="token punctuation">{</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åä¸€ã€çŠ¶æ€ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#åä¸€ã€çŠ¶æ€ç®¡ç†" aria-hidden="true">#</a> åä¸€ã€çŠ¶æ€ç®¡ç†</h2><h3 id="_11-1-ç°æœ‰é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_11-1-ç°æœ‰é—®é¢˜" aria-hidden="true">#</a> 11.1 ç°æœ‰é—®é¢˜</h3><ul><li>HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸èƒ½ä¿å­˜æ¯æ¬¡æäº¤çš„ä¿¡æ¯</li><li>å¦‚æœç”¨æˆ·å‘æ¥ä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ— æ³•çŸ¥é“å®ƒæ˜¯å¦ä¸ä¸Šæ¬¡çš„è¯·æ±‚æœ‰è”ç³»ã€‚</li><li>å¯¹äºé‚£äº›éœ€è¦å¤šæ¬¡æäº¤æ•°æ®æ‰èƒ½å®Œæˆçš„Wbæ“ä½œï¼Œæ¯”å¦‚ç™»å½•æ¥è¯´ï¼Œå°±æˆé—®é¢˜äº†ã€‚</li></ul><h3 id="_11-2-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_11-2-æ¦‚å¿µ" aria-hidden="true">#</a> 11.2 æ¦‚å¿µ</h3><p>å°†æµè§ˆå™¨ä¸wbæœåŠ¡å™¨ä¹‹é—´å¤šæ¬¡äº¤äº’å½“ä½œä¸€ä¸ªæ•´ä½“æ¥å¤„ç†ï¼Œå¹¶ä¸”å°†å¤šæ¬¡äº¤äº’æ‰€æ¶‰åŠçš„æ•°æ®ï¼ˆå³çŠ¶æ€ï¼‰ä¿å­˜ä¸‹æ¥ã€‚</p><h3 id="_11-3-çŠ¶æ€ç®¡ç†åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_11-3-çŠ¶æ€ç®¡ç†åˆ†ç±»" aria-hidden="true">#</a> 11.3 çŠ¶æ€ç®¡ç†åˆ†ç±»</h3><ul><li>å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†æŠ€æœ¯ï¼šå°†çŠ¶æ€ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚ä»£è¡¨æ€§çš„æ˜¯CookieæŠ€æœ¯ã€‚</li><li>æœåŠ¡å™¨çŠ¶æ€ç®¡ç†æŠ€æœ¯ï¼šå°†çŠ¶æ€ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚ä»£è¡¨æ€§çš„æ˜¯sessionæŠ€æœ¯ï¼ˆæœåŠ¡å™¨ä¼ é€’sessionIDæ—¶éœ€è¦ä½¿ç”¨Cookieçš„æ–¹å¼ï¼‰</li></ul><h2 id="åäºŒã€cookieçš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åäºŒã€cookieçš„ä½¿ç”¨" aria-hidden="true">#</a> åäºŒã€Cookieçš„ä½¿ç”¨</h2><h3 id="_12-1-ä»€ä¹ˆæ˜¯cookie" tabindex="-1"><a class="header-anchor" href="#_12-1-ä»€ä¹ˆæ˜¯cookie" aria-hidden="true">#</a> 12.1 ä»€ä¹ˆæ˜¯Cookie</h3><ul><li>Cookieæ˜¯åœ¨æµè§ˆå™¨è®¿é—®WebæœåŠ¡å™¨çš„æŸä¸ªèµ„æºæ—¶ï¼Œç”±WebæœåŠ¡å™¨åœ¨HTTPå“åº”æ¶ˆæ¯å¤´ä¸­é™„å¸¦ä¼ é€ç»™æµè§ˆå™¨çš„ä¸€å°æ®µæ•°æ®ã€‚</li><li>ä¸€æ—¦Webæµè§ˆå™¨ä¿å­˜äº†æŸä¸ªCookieï¼Œé‚£ä¹ˆå®ƒåœ¨ä»¥åæ¯æ¬¡è®¿é—®è¯¥WebæœåŠ¡å™¨æ—¶ï¼Œéƒ½åº”åœ¨HTTPè¯·æ±‚å¤´ä¸­å°†è¿™ä¸ªCookieå›ä¼ ç»™WebæœåŠ¡å™¨ã€‚</li><li>ä¸€ä¸ªCookieä¸»è¦ç”±æ ‡è¯†è¯¥ä¿¡æ¯çš„åç§°(name)å’Œå€¼(value)ç»„æˆã€‚</li></ul><p><img src="/assets/image-20221130153100567-a4797a2e.png" alt="image-20221130153100567"></p><h3 id="_12-2-åˆ›å»ºcookie" tabindex="-1"><a class="header-anchor" href="#_12-2-åˆ›å»ºcookie" aria-hidden="true">#</a> 12.2 åˆ›å»ºCookie</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åˆ›å»ºCookie</span>
<span class="token class-name">Cookie</span> ck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
ck<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/webs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è®¾ç½®Cookiefçš„è·¯å¾„</span>
ck<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å†…å­˜å­˜å‚¨ï¼Œå–å€¼æœ‰ä¸‰ç§ï¼š&gt;0æœ‰æ•ˆæœŸï¼Œå•ä½ç§’ï¼›=0æµè§ˆå™¨å…³é—­ï¼›&lt;Bå†…å­˜å­˜å‚¨ï¼Œé»˜è®¤-1</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>ck<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ·»åŠ åˆ°responseå¯¹è±¡ä¸­ï¼Œå“åº”æ—¶å‘é€ç»™å®¢æˆ·ç«¯</span>
<span class="token comment">//æ³¨æ„ï¼šæœ‰æ•ˆè·¯å¾„ï¼šå½“å‰è®¿é—®èµ„æºçš„ä¸Šä¸€çº§ç›®å½•ï¼Œä¸å¸¦ä¸»æœºå</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>chromeæµè§ˆå™¨æŸ¥çœ‹cookietä¿¡æ¯ï¼šchrome:/settings/content/,cookies</li></ul><h3 id="_12-3-è·å–cookie" tabindex="-1"><a class="header-anchor" href="#_12-3-è·å–cookie" aria-hidden="true">#</a> 12.3 è·å–Cookie</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//è·å–æ‰€æœ‰çš„Cookie</span>
<span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span>cks<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//éå†Cook1e</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> ck<span class="token operator">:</span>cks<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//æ£€ç´¢å‡ºè‡ªå·±çš„Cookie</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ck<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token comment">//è®°å½•Cooki1eçš„å€¼</span>
    	code<span class="token operator">=</span>ck<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-4-ä¿®æ”¹cookie" tabindex="-1"><a class="header-anchor" href="#_12-4-ä¿®æ”¹cookie" aria-hidden="true">#</a> 12.4 ä¿®æ”¹Cookie</h3><p>åªéœ€è¦ä¿è¯Cookieçš„åå’Œè·¯å¾„ä¸€è‡´å³å¯ä¿®æ”¹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ä¿®æ”¹Cookie</span>
<span class="token class-name">Cookie</span> ck<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
ck<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/webs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®Cookieçš„è·¯å¾„</span>
ck<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>å†…å­˜å­˜å‚¨ï¼Œå–å€¼æœ‰ä¸‰ç§ï¼š<span class="token operator">&gt;</span><span class="token number">0</span>æœ‰æ•ˆæœŸï¼Œå•ä½ç§’ï¼›<span class="token operator">=</span><span class="token number">0</span>å¤±æ•ˆï¼›<span class="token operator">&lt;</span><span class="token number">8</span>å†…å­˜å­˜å‚¨
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>ck<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®©æµè§ˆå™¨æ·»åŠ Cookie</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„ï¼šå¦‚æœæ”¹å˜cookielçš„nameå’Œæœ‰æ•ˆè·¯å¾„ä¼šæ–°å»ºcookie,è€Œæ”¹å˜cookieå€¼ã€æœ‰æ•ˆæœŸä¼šè¦†ç›–åŸæœ‰cookie</li></ul><h3 id="_12-5-cookieç¼–ç ä¸è§£ç " tabindex="-1"><a class="header-anchor" href="#_12-5-cookieç¼–ç ä¸è§£ç " aria-hidden="true">#</a> 12.5 Cookieç¼–ç ä¸è§£ç </h3><p>Cookieé»˜è®¤ä¸æ”¯æŒä¸­æ–‡ï¼Œåªèƒ½åŒ…å«ASCIIå­—ç¬¦ï¼Œæ‰€ä»¥Cookieéœ€è¦å¯¹Unicodeå­—ç¬¦è¿›è¡Œç¼–ç ï¼Œå¦åˆ™ä¼šå‡ºç°ä¹±ç ã€‚</p><ul><li>ç¼–ç å¯ä»¥ä½¿ç”¨java.net.URLEncoderç±»çš„encode(String str, String encoding)æ–¹æ³•</li><li>è§£ç ä½¿ç”¨java.net.URLDecoderç±»çš„decode(String str, String encoding)æ–¹æ³•</li></ul><h4 id="_12-5-1åˆ›å»ºå¸¦ä¸­æ–‡cookie" tabindex="-1"><a class="header-anchor" href="#_12-5-1åˆ›å»ºå¸¦ä¸­æ–‡cookie" aria-hidden="true">#</a> 12.5.1åˆ›å»ºå¸¦ä¸­æ–‡Cookie</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ä½¿ç”¨ä¸­æ–‡çš„Cookie, nameä¸valueéƒ½ä½¿ç”¨UTF-8ç¼–ç .</span>
<span class="token class-name">Cookie</span> cookie <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span>
<span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;å§“å&quot;</span>ï¼Œ<span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;è€é‚¢&quot;</span>ï¼Œ<span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å‘é€åˆ°å®¢æˆ·ç«¯</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-5-2è¯»å–å¸¦ä¸­æ–‡cookie" tabindex="-1"><a class="header-anchor" href="#_12-5-2è¯»å–å¸¦ä¸­æ–‡cookie" aria-hidden="true">#</a> 12.5.2è¯»å–å¸¦ä¸­æ–‡Cookie</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cc <span class="token operator">:</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> cookieName <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> cookievalue <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookieName <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookieValue <span class="token operator">+</span> <span class="token string">&quot;; &lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cookieå·²ç»å†™å…¥å®¢æˆ·ç«¯.è¯·åˆ·æ–°é¡µé¢.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-6-cookietä¼˜ç‚¹å’Œç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_12-6-cookietä¼˜ç‚¹å’Œç¼ºç‚¹" aria-hidden="true">#</a> 12.6 Cookietä¼˜ç‚¹å’Œç¼ºç‚¹</h3><h4 id="_12-6-1ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#_12-6-1ä¼˜ç‚¹" aria-hidden="true">#</a> 12.6.1ä¼˜ç‚¹</h4><ul><li>å¯é…ç½®åˆ°æœŸè§„åˆ™ã€‚</li><li>ç®€å•æ€§ï¼šCookieæ˜¯ä¸€ç§åŸºäºæ–‡æœ¬çš„è½»é‡ç»“æ„ï¼ŒåŒ…å«ç®€å•çš„é”®å€¼å¯¹ã€‚</li><li>æ•°æ®æŒä¹…æ€§ï¼šCookieé»˜è®¤åœ¨è¿‡æœŸä¹‹å‰æ˜¯å¯ä»¥ä¸€ç›´å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸Šçš„ã€‚</li></ul><h4 id="_12-6-2ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_12-6-2ç¼ºç‚¹" aria-hidden="true">#</a> 12.6.2ç¼ºç‚¹</h4><ul><li>å¤§å°å—åˆ°é™åˆ¶ï¼šå¤§å¤šæ•°æµè§ˆå™¨å¯¹Cookieçš„å¤§å°æœ‰4Kã€8Kå­—èŠ‚çš„é™åˆ¶ã€‚</li><li>ç”¨æˆ·é…ç½®ä¸ºç¦ç”¨ï¼šæœ‰äº›ç”¨æˆ·ç¦ç”¨äº†æµè§ˆå™¨æˆ–å®¢æˆ·ç«¯è®¾å¤‡æ¥æ”¶Cookieçš„èƒ½åŠ›ï¼Œå› æ­¤é™åˆ¶äº†è¿™ä¸€åŠŸèƒ½ã€‚</li><li>æ½œåœ¨çš„å®‰å…¨é£é™©ï¼šCookieå¯èƒ½ä¼šè¢«ç¯¡æ”¹ã€‚ä¼šå¯¹å®‰å…¨æ€§é€ æˆæ½œåœ¨é£é™©æˆ–è€…å¯¼è‡´ä¾èµ–äºCookieçš„åº”ç”¨ç¨‹åºå¤±è´¥ã€‚</li></ul><h2 id="åä¸‰ã€sessionå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#åä¸‰ã€sessionå¯¹è±¡" aria-hidden="true">#</a> åä¸‰ã€Sessionå¯¹è±¡</h2><h3 id="_13-1-sessionæ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_13-1-sessionæ¦‚è¿°" aria-hidden="true">#</a> 13.1 Sessionæ¦‚è¿°</h3><ul><li><p>Sessionç”¨äºè®°å½•ç”¨æˆ·çš„çŠ¶æ€ã€‚SessionæŒ‡çš„æ˜¯åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå•ä¸ªå®¢æˆ·ç«¯ä¸WebæœåŠ¡å™¨çš„ä¸€è¿ä¸²ç›¸å…³çš„äº¤äº’è¿‡ç¨‹ã€‚</p></li><li><p>åœ¨ä¸€ä¸ªSessionä¸­ï¼Œå®¢æˆ·å¯èƒ½ä¼šå¤šæ¬¡è¯·æ±‚è®¿é—®åŒä¸€ä¸ªèµ„æºï¼Œä¹Ÿæœ‰å¯èƒ½è¯·æ±‚è®¿é—®å„ç§ä¸åŒçš„æœåŠ¡å™¨èµ„æºã€‚</p></li></ul><h3 id="_13-2-sessionåŸç†" tabindex="-1"><a class="header-anchor" href="#_13-2-sessionåŸç†" aria-hidden="true">#</a> 13.2 SessionåŸç†</h3><ul><li>æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸€æ¬¡ä¼šè¯åˆ†é…ä¸€ä¸ªSession.å¯¹è±¡</li><li>åŒä¸€ä¸ªæµè§ˆå™¨å‘èµ·çš„å¤šæ¬¡è¯·æ±‚ï¼ŒåŒå±äºä¸€æ¬¡ä¼šè¯(Session)</li><li>é¦–æ¬¡ä½¿ç”¨åˆ°Sessionlæ—¶ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨åˆ›å»ºSession,å¹¶åˆ›å»ºCookieå­˜å‚¨Sessionldå‘é€å›å®¢æˆ·ç«¯</li></ul><p>æ³¨æ„ï¼šsessionæ˜¯ç”±æœåŠ¡ç«¯åˆ›å»ºçš„ã€‚</p><h3 id="_13-3-sessionä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_13-3-sessionä½¿ç”¨" aria-hidden="true">#</a> 13.3 Sessionä½¿ç”¨</h3><ul><li>Sessionä½œç”¨åŸŸï¼šæ‹¥æœ‰å­˜å‚¨æ•°æ®çš„ç©ºé—´ï¼Œä½œç”¨èŒƒå›´æ˜¯ä¸€æ¬¡ä¼šè¯æœ‰æ•ˆ <ul><li>ä¸€æ¬¡ä¼šè¯æ˜¯ä½¿ç”¨åŒä¸€æµè§ˆå™¨å‘é€çš„å¤šæ¬¡è¯·æ±‚ã€‚ä¸€æ—¦æµè§ˆå™¨å…³é—­ï¼Œåˆ™ç»“æŸä¼šè¯</li><li>å¯ä»¥å°†æ•°æ®å­˜å…¥Sessionä¸­ï¼Œåœ¨ä¸€æ¬¡ä¼šè¯çš„ä»»æ„ä½ç½®è¿›è¡Œè·å–</li><li>å¯ä¼ é€’ä»»ä½•æ•°æ®ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡ã€é›†åˆã€æ•°ç»„</li></ul></li></ul><h3 id="_13-3-1è·å–session" tabindex="-1"><a class="header-anchor" href="#_13-3-1è·å–session" aria-hidden="true">#</a> 13.3.1è·å–Session</h3><p>sessionæ˜¯æœåŠ¡å™¨ç«¯è‡ªåŠ¨åˆ›å»ºçš„ï¼Œé€šè¿‡requestå¯¹è±¡è·å–</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//è·å–Sessionå¯¹è±¡</span>
<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Id:&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å”¯-æ ‡è®°ï¼Œ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-3-2-sessionä¿å­˜æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_13-3-2-sessionä¿å­˜æ•°æ®" aria-hidden="true">#</a> 13.3.2 Sessionä¿å­˜æ•°æ®</h4><p><code>setAttribute(nameï¼ŒObject)</code>; ä¿å­˜æ•°æ®åˆ°sessionä¸­</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨åœ¨sessionä½œç”¨åŸŸä¸­ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_13-3-3-sessionè·å–æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_13-3-3-sessionè·å–æ•°æ®" aria-hidden="true">#</a> 13.3.3 Sessionè·å–æ•°æ®</h4><p>getAttribute(å±æ€§å)ï¼›è·å–sessionä¸­æ•°æ®</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>session.getAttribute(&quot;key&quot;)://é€šè¿‡Stringç±»å‹çš„keyè®¿é—®Objectç±»å‹çš„value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_13-3-4-sessionç§»é™¤æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_13-3-4-sessionç§»é™¤æ•°æ®" aria-hidden="true">#</a> 13.3.4 Sessionç§»é™¤æ•°æ®</h4><p>removeAttribute(å±æ€§å)ï¼›ä»sessionä¸­åˆ é™¤æ•°æ®</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>session.removeAttribute(&quot;key&quot;);//é€šè¿‡é”®ç§»é™¤sessionä½œç”¨åŸŸä¸­çš„å€¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_13-4-sessionä¸requeståº”ç”¨åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_13-4-sessionä¸requeståº”ç”¨åŒºåˆ«" aria-hidden="true">#</a> 13.4 Sessionä¸Requeståº”ç”¨åŒºåˆ«</h3><ul><li>requestæ˜¯ä¸€æ¬¡è¯·æ±‚æœ‰æ•ˆï¼Œè¯·æ±‚æ”¹å˜ï¼Œåˆ™requestæ”¹å˜</li><li>sessionæ˜¯ä¸€æ¬¡ä¼šè¯æœ‰æ•ˆï¼Œæµè§ˆå™¨æ”¹å˜ï¼Œåˆ™sessionæ”¹å˜</li></ul><h4 id="_13-4-1-sessionåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_13-4-1-sessionåº”ç”¨" aria-hidden="true">#</a> 13.4.1 Sessionåº”ç”¨</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;SessionServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/ss&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.é€šè¿‡requestå¯¹è±¡è·å–Sessionå¯¹è±¡</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.ä½¿ç”¨sessionä¿å­˜æ•°æ®</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;gavin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/getValue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-4-2-getvalueservlet" tabindex="-1"><a class="header-anchor" href="#_13-4-2-getvalueservlet" aria-hidden="true">#</a> 13.4.2 GetValueServlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;GetValueServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/getValue&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetValueServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.é€šè¿‡requestè·å–sessionå¯¹è±¡</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»sessionä¸­è·å¾—äº†ï¼š&quot;</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»reqeustä¸­è·å¾—äº†ï¼š&quot;</span><span class="token operator">+</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-5-sessionçš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#_13-5-sessionçš„ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> 13.5 Sessionçš„ç”Ÿå‘½å‘¨æœŸ</h3><ul><li>å¼€å§‹ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨åˆ°Sessionçš„è¯·æ±‚äº§ç”Ÿï¼Œåˆ™åˆ›å»ºSession</li><li>ç»“æŸï¼š <ul><li>æµè§ˆå™¨å…³é—­ï¼Œåˆ™å¤±æ•ˆ</li><li>Sessionè¶…æ—¶ï¼Œåˆ™å¤±æ•ˆ <ul><li>session.setMaxlnactivelnterval(seconds); // è®¾ç½®æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‘</li></ul></li><li>æ‰‹å·¥é”€æ¯ï¼Œåˆ™å¤±æ•ˆ <ul><li>session.invalidate( ); //ç™»å½•é€€å‡ºã€æ³¨é”€</li></ul></li></ul></li></ul><h4 id="_13-5-1-sessionå¤±æ•ˆ" tabindex="-1"><a class="header-anchor" href="#_13-5-1-sessionå¤±æ•ˆ" aria-hidden="true">#</a> 13.5.1 Sessionå¤±æ•ˆ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è®¾ç½®sessionæœ€å¤§æœ‰æ•ˆæœŸä¸ºä¸€å°æ—¶</span>
session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ‰‹å·¥é”€æ¯</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-4-æµè§ˆå™¨ç¦ç”¨cookie" tabindex="-1"><a class="header-anchor" href="#_13-4-æµè§ˆå™¨ç¦ç”¨cookie" aria-hidden="true">#</a> 13.4 æµè§ˆå™¨ç¦ç”¨Cookie</h3><h4 id="_13-4-1-æµè§ˆå™¨ç¦ç”¨cookielçš„åæœ" tabindex="-1"><a class="header-anchor" href="#_13-4-1-æµè§ˆå™¨ç¦ç”¨cookielçš„åæœ" aria-hidden="true">#</a> 13.4.1 æµè§ˆå™¨ç¦ç”¨Cookielçš„åæœ</h4><p>æœåŠ¡å™¨åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨Cookieçš„æ–¹å¼å°†sessionlD.å‘é€ç»™æµè§ˆå™¨ï¼Œå¦‚æœç”¨æˆ·ç¦æ­¢Cookie,åˆ™sessionIDä¸ä¼šè¢«æµè§ˆå™¨ä¿å­˜ï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å¦‚URLé‡å†™è¿™æ ·çš„æ–¹å¼æ¥å‘é€sessionIDã€‚</p><h4 id="_13-4-2-urlé‡å†™" tabindex="-1"><a class="header-anchor" href="#_13-4-2-urlé‡å†™" aria-hidden="true">#</a> 13.4.2 URLé‡å†™</h4><p>æµè§ˆå™¨åœ¨è®¿é—®æœåŠ¡å™¨ä¸Šçš„æŸä¸ªåœ°å€æ—¶ï¼Œä¸å†ä½¿ç”¨åŸæ¥çš„é‚£ä¸ªåœ°å€ï¼Œè€Œæ˜¯ä½¿ç”¨ç»è¿‡æ”¹å†™çš„åœ°å€ï¼ˆå³åœ¨åŸæ¥çš„åœ°å€åé¢åŠ ä¸Šäº†sessionlD)ã€‚</p><h4 id="_13-4-3-å®ç°urlé‡å†™" tabindex="-1"><a class="header-anchor" href="#_13-4-3-å®ç°urlé‡å†™" aria-hidden="true">#</a> 13.4.3 å®ç°URLé‡å†™</h4><p>response.encodeRedirectURL(String url))ç”Ÿæˆé‡å†™çš„URLã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//é‡å†™URLè¿½åŠ SessionId</span>
<span class="token class-name">String</span> newUrl <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">encodeRedirectURL</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/cs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>newUrl<span class="token punctuation">)</span>
response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>newUr12<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-5-sessionå®æˆ˜æƒé™éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_13-5-sessionå®æˆ˜æƒé™éªŒè¯" aria-hidden="true">#</a> 13.5 Sessionå®æˆ˜æƒé™éªŒè¯</h3><p><img src="/assets/image-20221130160241935-acef0f07.png" alt="image-20221130160241935"></p><h4 id="_13-5-1-åˆ›å»ºç®¡ç†å‘˜è¡¨" tabindex="-1"><a class="header-anchor" href="#_13-5-1-åˆ›å»ºç®¡ç†å‘˜è¡¨" aria-hidden="true">#</a> 13.5.1 åˆ›å»ºç®¡ç†å‘˜è¡¨</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Manager<span class="token punctuation">(</span>
    username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    password <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-5-2-ç™»å½•é¡µé¢" tabindex="-1"><a class="header-anchor" href="#_13-5-2-ç™»å½•é¡µé¢" aria-hidden="true">#</a> 13.5.2 ç™»å½•é¡µé¢</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>ç®¡ç†å‘˜ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/loginMgr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        éªŒè¯ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputVcode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/createCode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç™»å½•<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-5-3-loginmgrcontroller" tabindex="-1"><a class="header-anchor" href="#_13-5-3-loginmgrcontroller" aria-hidden="true">#</a> 13.5.3 LoginMgrController</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ManagerService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">ManagerServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;LoginMgrController&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/loginMgr&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginMgrController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.å¤„ç†ä¹±ç </span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.æ”¶å‚</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.è°ƒç”¨ä¸šåŠ¡æ–¹æ³•</span>
        <span class="token class-name">ManagerService</span> managerService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ManagerServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> mgr <span class="token operator">=</span> managerService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.å¤„ç†ç»“æœï¼Œæµç¨‹è·³è½¬</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mgr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//ç™»å½•æˆåŠŸ</span>
            <span class="token comment">//å°†ç®¡ç†å‘˜ä¿¡æ¯å­˜å‚¨åœ¨Sessioné‡Œ</span>
            <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">,</span> mgr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è·³è½¬  ç›®æ ‡ã€æ–¹å¼</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/showallcontroller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//ç™»å½•å¤±è´¥</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-5-4-showalladmincontroller" tabindex="-1"><a class="header-anchor" href="#_13-5-4-showalladmincontroller" aria-hidden="true">#</a> 13.5.4 ShowAllAdminController</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">RequestDispatcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showallcontroller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowAllAdminController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
          <span class="token comment">//é€šè¿‡HttpSessionå®Œæˆæƒé™æ§åˆ¶</span>
          <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">Manager</span> mgr  <span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>mgr <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//åªè´Ÿè´£è°ƒç”¨ä¸šåŠ¡é€»è¾‘åŠŸèƒ½</span>
            <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> adminList <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//requestä½œç”¨åŸŸå­˜å‚¨æ•°æ®</span>
            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;admins&quot;</span><span class="token punctuation">,</span>adminList<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//é€šè¿‡è½¬å‘ è·³è½¬åˆ°æ˜¾ç¤ºç»“æœservlet</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/showalljsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
              resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-6-session-å®æˆ˜ä¿å­˜éªŒè¯ç " tabindex="-1"><a class="header-anchor" href="#_13-6-session-å®æˆ˜ä¿å­˜éªŒè¯ç " aria-hidden="true">#</a> 13.6 Session å®æˆ˜ä¿å­˜éªŒè¯ç </h3><h4 id="_13-6-1-åˆ›å»ºéªŒè¯ç " tabindex="-1"><a class="header-anchor" href="#_13-6-1-åˆ›å»ºéªŒè¯ç " aria-hidden="true">#</a> 13.6.1 åˆ›å»ºéªŒè¯ç </h4><ul><li>å¯¼å…¥ValidateCode.jar</li><li>åˆ›å»ºç”ŸæˆéªŒè¯ç çš„Servlet</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>dsna<span class="token punctuation">.</span>util<span class="token punctuation">.</span>images<span class="token punctuation">.</span></span><span class="token class-name">ValidateCode</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;CreateCodeController&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/createCode&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateCodeController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.åˆ›å»ºéªŒè¯ç å›¾ç‰‡</span>
        <span class="token class-name">ValidateCode</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ValidateCode</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> codes <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;codes&quot;</span><span class="token punctuation">,</span>codes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.éªŒè¯ç å›¾ç‰‡å“åº”ç»™å®¢æˆ·ç«¯</span>
        code<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-6-2-ç™»å½•é¡µé¢" tabindex="-1"><a class="header-anchor" href="#_13-6-2-ç™»å½•é¡µé¢" aria-hidden="true">#</a> 13.6.2 ç™»å½•é¡µé¢</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>ç®¡ç†å‘˜ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/loginMgr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        éªŒè¯ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputVcode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/createCode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç™»å½•<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-6-3-loginmgrcontroller" tabindex="-1"><a class="header-anchor" href="#_13-6-3-loginmgrcontroller" aria-hidden="true">#</a> 13.6.3 LoginMgrController</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ManagerService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">ManagerServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;LoginMgrController&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/loginMgr&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginMgrController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.å¤„ç†ä¹±ç </span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.æ”¶å‚</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> inputVcode <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;inputVcode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> codes <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;codes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inputVcode<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> inputVcode<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>codes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//3.è°ƒç”¨ä¸šåŠ¡æ–¹æ³•</span>
            <span class="token class-name">ManagerService</span> managerService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ManagerServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Manager</span> mgr <span class="token operator">=</span> managerService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4.å¤„ç†ç»“æœï¼Œæµç¨‹è·³è½¬</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mgr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//ç™»å½•æˆåŠŸ</span>
                <span class="token comment">//å°†ç®¡ç†å‘˜ä¿¡æ¯å­˜å‚¨åœ¨Sessioné‡Œ</span>
                <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">,</span> mgr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//è·³è½¬  ç›®æ ‡ã€æ–¹å¼</span>
                response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/showallcontroller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//ç™»å½•å¤±è´¥</span>
                response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åå››ã€servletcontext-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#åå››ã€servletcontext-å¯¹è±¡" aria-hidden="true">#</a> åå››ã€ServletContext å¯¹è±¡</h2><h3 id="_14-1-servletcontextiæ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_14-1-servletcontextiæ¦‚è¿°" aria-hidden="true">#</a> 14.1 ServletContextiæ¦‚è¿°</h3><ul><li>å…¨å±€å¯¹è±¡ï¼Œä¹Ÿæ‹¥æœ‰ä½œç”¨åŸŸï¼Œå¯¹åº”ä¸€ä¸ªTomcatä¸­çš„Webåº”ç”¨</li><li>å½“WebæœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºåˆ›å»ºä¸€å—å…±äº«çš„å­˜å‚¨åŒºåŸŸ(ServletContext)</li><li>ServletContextåœ¨webæœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»ºï¼ŒæœåŠ¡å™¨å…³é—­æ—¶é”€æ¯ã€‚</li></ul><h3 id="_14-2-è·å–servletcontext-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_14-2-è·å–servletcontext-å¯¹è±¡" aria-hidden="true">#</a> 14.2 è·å–ServletContext.å¯¹è±¡</h3><ul><li>GenericServletæä¾›äº†getServletContext(0æ–¹æ³•ã€‚ï¼ˆæ¨èï¼‰this.getServletContext(0;</li><li>HttpServletRequestæä¾›äº†getServletContext()æ–¹æ³•ã€‚ï¼ˆæ¨èï¼‰</li><li>HttpSession:æä¾›äº†getServletContext0æ–¹æ³•ã€‚</li></ul><h3 id="_14-3-servletcontextä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_14-3-servletcontextä½œç”¨" aria-hidden="true">#</a> 14.3 ServletContextä½œç”¨</h3><h4 id="_14-3-1-è·å–é¡¹ç›®çœŸå®è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_14-3-1-è·å–é¡¹ç›®çœŸå®è·¯å¾„" aria-hidden="true">#</a> 14.3.1 è·å–é¡¹ç›®çœŸå®è·¯å¾„</h4><p>è·å–å½“å‰é¡¹ç›®åœ¨æœåŠ¡å™¨å‘å¸ƒçš„çœŸå®è·¯å¾„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> realpath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_14-3-2-è·å–é¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_14-3-2-è·å–é¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„" aria-hidden="true">#</a> 14.3.2 è·å–é¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„</h4><p>è·å–å½“å‰é¡¹ç›®ä¸Šä¸‹æ–‡è·¯å¾„ï¼ˆåº”ç”¨ç¨‹åºåç§°ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printIn</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//ä¸Šä¸‹æ–‡è·¯å¾„ï¼ˆåº”ç”¨ç¨‹åºåç§°ï¼‰</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-3-3-å…¨å±€å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_14-3-3-å…¨å±€å®¹å™¨" aria-hidden="true">#</a> 14.3.3 å…¨å±€å®¹å™¨</h4><p>ServletContextæ‹¥æœ‰ä½œç”¨åŸŸï¼Œå¯ä»¥å­˜å‚¨æ•°æ®åˆ°å…¨å±€å®¹å™¨ä¸­</p><ul><li>å­˜å‚¨æ•°æ®ï¼šservletContext.setAttribute(&quot;name&quot;,value);</li><li>è·å–æ•°æ®ï¼šservletContext.getAttribute(&quot;name&quot;;</li><li>ç§»é™¤æ•°æ®ï¼šservletContext.removeAttribute(&quot;name&quot;:</li></ul><h3 id="_14-4-servletcontextç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_14-4-servletcontextç‰¹ç‚¹" aria-hidden="true">#</a> 14.4 ServletContextç‰¹ç‚¹</h3><ul><li>å”¯ä¸€æ€§ï¼šä¸€ä¸ªåº”ç”¨å¯¹åº”ä¸€ä¸ªServletContextã€‚</li><li>ç”Ÿå‘½å‘¨æœŸï¼šåªè¦å®¹å™¨ä¸å…³é—­æˆ–è€…åº”ç”¨ä¸å¸è½½ï¼ŒServletContextå°±ä¸€ç›´å­˜åœ¨ã€‚</li></ul><h3 id="_14-5-servletcontext-åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_14-5-servletcontext-åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> 14.5 ServletContext/åº”ç”¨åœºæ™¯</h3><p>ServletContextç»Ÿè®¡å½“å‰é¡¹ç›®è®¿é—®æ¬¡æ•°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;CounterController&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/counterController&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CounterController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.è·å–ServletContextå¯¹è±¡</span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.è·å–è®¡æ•°å™¨</span>
        <span class="token class-name">Integer</span> counter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            counter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            counter<span class="token operator">++</span><span class="token punctuation">;</span>
            servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;counter:&quot;</span><span class="token operator">+</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-6ä½œç”¨åŸŸæ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_14-6ä½œç”¨åŸŸæ€»ç»“" aria-hidden="true">#</a> 14.6ä½œç”¨åŸŸæ€»ç»“</h3><ul><li>HttpServletRequest:ä¸€æ¬¡è¯·æ±‚ï¼Œè¯·æ±‚å“åº”ä¹‹å‰æœ‰æ•ˆ</li><li>HttpSession:ä¸€æ¬¡ä¼šè¯å¼€å§‹ï¼Œæµè§ˆå™¨ä¸å…³é—­æˆ–ä¸è¶…æ—¶ä¹‹å‰æœ‰æ•ˆ</li><li>ServletContext:æœåŠ¡å™¨å¯åŠ¨å¼€å§‹ï¼ŒæœåŠ¡å™¨åœæ­¢ä¹‹å‰æœ‰æ•ˆ</li></ul><h2 id="åäº”ã€è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#åäº”ã€è¿‡æ»¤å™¨" aria-hidden="true">#</a> åäº”ã€è¿‡æ»¤å™¨</h2><h3 id="_15-1-ç°æœ‰é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_15-1-ç°æœ‰é—®é¢˜" aria-hidden="true">#</a> 15.1 ç°æœ‰é—®é¢˜</h3><p>åœ¨ä»¥å¾€çš„Servletä¸­ï¼Œæœ‰æ²¡æœ‰å†—ä½™çš„ä»£ç ï¼Œå¤šä¸ªServletéƒ½è¦è¿›è¡Œç¼–å†™ã€‚</p><h3 id="_15-2-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_15-2-æ¦‚å¿µ" aria-hidden="true">#</a> 15.2 æ¦‚å¿µ</h3><p>è¿‡æ»¤å™¨(Filter)æ˜¯å¤„äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç›®æ ‡èµ„æºä¹‹é—´çš„ä¸€é“è¿‡æ»¤æŠ€æœ¯ã€‚</p><p><img src="/assets/image-20221130162754720-c4416d2c.png" alt="image-20221130162754720"></p><h3 id="_15-3-è¿‡æ»¤å™¨ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_15-3-è¿‡æ»¤å™¨ä½œç”¨" aria-hidden="true">#</a> 15.3 è¿‡æ»¤å™¨ä½œç”¨</h3><ul><li>æ‰§è¡Œåœ°ä½åœ¨Servlet,ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œä¼šå…ˆç»è¿‡Filterï¼Œå†åˆ°è¾¾ç›®æ ‡Servletä¸­ï¼›å“åº”æ—¶ï¼Œä¼šæ ¹æ®æ‰§è¡Œæµç¨‹å†æ¬¡åå‘æ‰§è¡ŒFilter</li><li>å¯ä»¥è§£å†³å¤šä¸ªServletå…±æ€§ä»£ç çš„å†—ä½™é—®é¢˜ï¼ˆä¾‹å¦‚ï¼šä¹±ç å¤„ç†ã€ç™»å½•éªŒè¯ï¼‰</li></ul><h3 id="_15-4-ç¼–å†™è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#_15-4-ç¼–å†™è¿‡æ»¤å™¨" aria-hidden="true">#</a> 15.4 ç¼–å†™è¿‡æ»¤å™¨</h3><p>Servlet APIä¸­æä¾›äº†ä¸€ä¸ªFilteræ¥å£ï¼Œå¼€å‘äººå‘˜ç¼–å†™ä¸€ä¸ªJavaç±»å®ç°äº†è¿™ä¸ªæ¥å£å³å¯ï¼Œè¿™ä¸ªJavaç±»ç§°ä¹‹ä¸ºè¿‡æ»¤å™¨(Filter)</p><h4 id="_15-4-1-å®ç°è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_15-4-1-å®ç°è¿‡ç¨‹" aria-hidden="true">#</a> 15.4.1 å®ç°è¿‡ç¨‹</h4><ul><li>ç¼–å†™Javaç±»å®ç°Filteræ¥å£</li><li>åœ¨doFilteræ–¹æ³•ä¸­ç¼–å†™æ‹¦æˆªé€»è¾‘</li><li>è®¾ç½®æ‹¦æˆªè·¯å¾„</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFi1ter</span><span class="token punctuation">(</span><span class="token string">&quot;/myservlet1&quot;</span><span class="token punctuation">)</span><span class="token operator">/</span>è¿‡æ»¤è·¯å¾„
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter1</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span><span class="token punctuation">{</span>
    
    <span class="token comment">//åˆå§‹åŒ–è¿‡æ»¤å™¨</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¿‡æ»¤å™¨åˆå§‹åŒ–äº†......init.,&quot;</span><span class="token operator">+</span>fi1 terConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//æ‰§è¡Œè¿‡æ»¤</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¿‡æ»¤å‰.....doF1lter&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printin</span><span class="token punctuation">(</span><span class="token string">&quot;è¿‡æ»¤å....doFilter&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>ã€
    <span class="token punctuation">}</span>
    <span class="token comment">//é”€æ¯</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é”€æ¯äº†ï¼Œ....destroy&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-5-è¿‡æ»¤å™¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#_15-5-è¿‡æ»¤å™¨é…ç½®" aria-hidden="true">#</a> 15.5 è¿‡æ»¤å™¨é…ç½®</h3><h4 id="_15-5-1-æ³¨è§£é…ç½®" tabindex="-1"><a class="header-anchor" href="#_15-5-1-æ³¨è§£é…ç½®" aria-hidden="true">#</a> 15.5.1 æ³¨è§£é…ç½®</h4><p>åœ¨è‡ªå®šä¹‰çš„Filterç±»ä¸Šä½¿ç”¨æ³¨è§£@WebFilter(value=â€œ/è¿‡æ»¤ç›®æ ‡èµ„æº&quot;)</p><h4 id="_15-5-2-xmlé…ç½®" tabindex="-1"><a class="header-anchor" href="#_15-5-2-xmlé…ç½®" aria-hidden="true">#</a> 15.5.2 xmlé…ç½®</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- è¿‡æ»¤å™¨çš„Ã—m1é…ç½® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- åç§° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>sf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è¿‡æ»¤å™¨ç±»å…¨ç§° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.qf.web.filter.SecondFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- æ˜ å°„è·¯å¾„é…ç½® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- åç§° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>sf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è¿‡æ»¤çš„ur1åŒ¹é…è§„åˆ™å’ŒServ1etç±»ä¼¼ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-5-3è¿‡æ»¤å™¨è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_15-5-3è¿‡æ»¤å™¨è·¯å¾„" aria-hidden="true">#</a> 15.5.3è¿‡æ»¤å™¨è·¯å¾„</h4><p>è¿‡æ»¤å™¨çš„è¿‡æ»¤è·¯å¾„é€šå¸¸æœ‰ä¸‰ç§å½¢å¼ï¼š</p><p>ç²¾ç¡®è¿‡æ»¤åŒ¹é…ï¼Œæ¯”å¦‚/index.jsp /myservlet1</p><p>åç¼€è¿‡æ»¤åŒ¹é…ï¼Œæ¯”å¦‚ *.jspã€*.htmlã€*.jpg</p><p>é€šé…ç¬¦è¿‡æ»¤åŒ¹é…ï¼Œ/*ï¼Œè¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰ã€‚æ³¨æ„è¿‡æ»¤å™¨ä¸èƒ½ä½¿ç”¨/åŒ¹é…ã€‚</p><h3 id="_15-6è¿‡æ»¤å™¨é“¾å’Œä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_15-6è¿‡æ»¤å™¨é“¾å’Œä¼˜å…ˆçº§" aria-hidden="true">#</a> 15.6è¿‡æ»¤å™¨é“¾å’Œä¼˜å…ˆçº§</h3><h4 id="_15-6-1è¿‡æ»¤å™¨é“¾" tabindex="-1"><a class="header-anchor" href="#_15-6-1è¿‡æ»¤å™¨é“¾" aria-hidden="true">#</a> 15.6.1è¿‡æ»¤å™¨é“¾</h4><p>å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨è¯·æ±‚ä¹‹åï¼ŒæœåŠ¡å™¨è°ƒç”¨Servlet;ä¹‹å‰ä¼šæ‰§è¡Œä¸€ç»„è¿‡æ»¤å™¨ï¼ˆå¤šä¸ªè¿‡æ»¤å™¨ï¼‰ï¼Œé‚£ä¹ˆè¿™ç»„è¿‡æ»¤å™¨å°±ç§°ä¸ºä¸€æ¡è¿‡æ»¤å™¨é“¾ã€‚</p><p>æ¯ä¸ªè¿‡æ»¤å™¨å®ç°æŸä¸ªç‰¹å®šçš„åŠŸèƒ½ï¼Œå½“ç¬¬ä¸€ä¸ªFilterçš„doFilteræ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒWebæœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªä»£è¡¨Filteré“¾çš„FilterChainå¯¹è±¡ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚åœ¨doFilteræ–¹æ³•ä¸­ï¼Œå¼€å‘äººå‘˜å¦‚æœè°ƒç”¨äº†FilterChainå¯¹è±¡çš„doFilteræ–¹æ³•ï¼Œåˆ™WebæœåŠ¡å™¨ä¼šæ£€æŸ¥FilterChainå¯¹è±¡ä¸­æ˜¯å¦è¿˜æœ‰filter,å¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨ç¬¬2ä¸ªfilter,å¦‚æœæ²¡æœ‰ï¼Œåˆ™è°ƒç”¨ç›®æ ‡èµ„æºã€‚</p><p><img src="/assets/image-20221130164434270-4d65374a.png" alt="image-20221130164434270"></p><h4 id="_15-6-2è¿‡æ»¤å™¨ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_15-6-2è¿‡æ»¤å™¨ä¼˜å…ˆçº§" aria-hidden="true">#</a> 15.6.2è¿‡æ»¤å™¨ä¼˜å…ˆçº§</h4><p>åœ¨ä¸€ä¸ªWebåº”ç”¨ä¸­ï¼Œå¯ä»¥å¼€å‘ç¼–å†™å¤šä¸ªFilter,è¿™äº›Filterç»„åˆèµ·æ¥ç§°ä¹‹ä¸ºä¸€ä¸ªFilteré“¾ã€‚ä¼˜å…ˆçº§ï¼š</p><ul><li>å¦‚æœä¸ºæ³¨è§£çš„è¯ï¼Œæ˜¯æŒ‰ç…§ç±»å…¨åç§°çš„å­—ç¬¦ä¸²é¡ºåºå†³å®šä½œç”¨é¡ºåº</li><li>å¦‚æœweb.xmlï¼ŒæŒ‰ç…§filter-mappingæ³¨å†Œé¡ºåºï¼Œä»ä¸Šå¾€ä¸‹</li><li>web.xmlé…ç½®é«˜äºæ³¨è§£æ–¹å¼</li><li>å¦‚æœæ³¨è§£å’Œweb.xmlåŒæ—¶é…ç½®ï¼Œä¼šåˆ›å»ºå¤šä¸ªè¿‡æ»¤å™¨å¯¹è±¡ï¼Œé€ æˆè¿‡æ»¤å¤šæ¬¡ã€‚</li></ul><h3 id="_15-7è¿‡æ»¤å™¨å…¸å‹åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_15-7è¿‡æ»¤å™¨å…¸å‹åº”ç”¨" aria-hidden="true">#</a> 15.7è¿‡æ»¤å™¨å…¸å‹åº”ç”¨</h3><h4 id="_15-7-1è¿‡æ»¤å™¨è§£å†³ç¼–ç " tabindex="-1"><a class="header-anchor" href="#_15-7-1è¿‡æ»¤å™¨è§£å†³ç¼–ç " aria-hidden="true">#</a> 15.7.1è¿‡æ»¤å™¨è§£å†³ç¼–ç </h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token string">&quot;/*&quot;</span>ï¼‰
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EncodingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
	
    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span><span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        <span class="token comment">//ç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”çš„ä¹±ç </span>
        servletRequest<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        servletResponse<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-7-2-æƒé™éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_15-7-2-æƒé™éªŒè¯" aria-hidden="true">#</a> 15.7.2 æƒé™éªŒè¯</h4><p><strong>CheckFilter</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showallcontroller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æƒé™éªŒè¯   éªŒè¯ç®¡ç†å‘˜æ˜¯å¦ç™»å½•ï¼</span>
        <span class="token comment">//å‘ä¸‹è½¬å‹  æ‹†ç®±</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>servletRequest<span class="token punctuation">;</span>
        <span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span>servletResponse<span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> mgr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>mgr<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//ç™»å½•è¿‡ï¼</span>
            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ShowAllAdminController</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">RequestDispatcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showallcontroller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowAllAdminController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//åªè´Ÿè´£è°ƒç”¨ä¸šåŠ¡é€»è¾‘åŠŸèƒ½</span>
        <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> adminList <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//requestä½œç”¨åŸŸå­˜å‚¨æ•°æ®</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;admins&quot;</span><span class="token punctuation">,</span>adminList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é€šè¿‡è½¬å‘ è·³è½¬åˆ°æ˜¾ç¤ºç»“æœservlet</span>
        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/showalljsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 895252461@qq.com">xuliang</span><!--]--><!--]--></div></footer><!----><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-c593f505.js" defer></script>
  </body>
</html>
