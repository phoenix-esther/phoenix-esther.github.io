<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.59" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>Java Servlet | Java 成神之路</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-f1658162.css" as="style"><link rel="stylesheet" href="/assets/style-f1658162.css">
    <link rel="modulepreload" href="/assets/app-0de2ad7c.js"><link rel="modulepreload" href="/assets/framework-5dde3bca.js"><link rel="modulepreload" href="/assets/java-servlet.html-8537acfe.js"><link rel="modulepreload" href="/assets/java-servlet.html-ef72b065.js"><link rel="prefetch" href="/assets/index.html-95370337.js" as="script"><link rel="prefetch" href="/assets/database-overview.html-03717758.js" as="script"><link rel="prefetch" href="/assets/java-overview.html-44310673.js" as="script"><link rel="prefetch" href="/assets/middleware-overview.html-be4fdd51.js" as="script"><link rel="prefetch" href="/assets/quality-overview.html-a8e9bda4.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-overview.html-87409649.js" as="script"><link rel="prefetch" href="/assets/gitbook.html-fb8a8229.js" as="script"><link rel="prefetch" href="/assets/tools-overview.html-67f69dba.js" as="script"><link rel="prefetch" href="/assets/mongo.html-50bc6f68.js" as="script"><link rel="prefetch" href="/assets/mysql-advance.html-e06a1ce2.js" as="script"><link rel="prefetch" href="/assets/mysql-apply.html-a6b2d1c2.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-d91fdb11.js" as="script"><link rel="prefetch" href="/assets/mysql-devops.html-0b9fc6f6.js" as="script"><link rel="prefetch" href="/assets/redis-base.html-fbc05584.js" as="script"><link rel="prefetch" href="/assets/redis-cluster.html-07744daf.js" as="script"><link rel="prefetch" href="/assets/redis-overview.html-1bcd1133.js" as="script"><link rel="prefetch" href="/assets/java-base.html-7071cb31.js" as="script"><link rel="prefetch" href="/assets/java-sql.html-c8be449f.js" as="script"><link rel="prefetch" href="/assets/java-time.html-2c855f9e.js" as="script"><link rel="prefetch" href="/assets/java-collection-list.html-2207ee3a.js" as="script"><link rel="prefetch" href="/assets/java-collection-map.html-d30b93e7.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-base.html-8983a76d.js" as="script"><link rel="prefetch" href="/assets/Java-concurrent-container.html-3334407b.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-interview.html-bbc0a621.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-lock.html-ebf0a63c.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-pool.html-7a290f95.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-tools.html-01a740a1.js" as="script"><link rel="prefetch" href="/assets/java-bio.html-ceca2a90.js" as="script"><link rel="prefetch" href="/assets/java-io-base.html-40d5757f.js" as="script"><link rel="prefetch" href="/assets/java-nio.html-b002c449.js" as="script"><link rel="prefetch" href="/assets/Java内存模型.html-13f8a203.js" as="script"><link rel="prefetch" href="/assets/JVM内存结构.html-fb577c69.js" as="script"><link rel="prefetch" href="/assets/JVM垃圾回收.html-852577fd.js" as="script"><link rel="prefetch" href="/assets/JVM概览.html-eda595c7.js" as="script"><link rel="prefetch" href="/assets/JVM类加载器.html-ee6c0eb8.js" as="script"><link rel="prefetch" href="/assets/JVM类文件结构.html-6aca785b.js" as="script"><link rel="prefetch" href="/assets/JVM调优.html-ad63cd2e.js" as="script"><link rel="prefetch" href="/assets/java-lambda.html-c21b5e3b.js" as="script"><link rel="prefetch" href="/assets/java-stream.html-797890ef.js" as="script"><link rel="prefetch" href="/assets/HikariCP-base.html-89b6d274.js" as="script"><link rel="prefetch" href="/assets/HikariCP-source.html-71542b59.js" as="script"><link rel="prefetch" href="/assets/jackson-overview.html-58553b4c.js" as="script"><link rel="prefetch" href="/assets/kafka-broker.html-8091a112.js" as="script"><link rel="prefetch" href="/assets/kafka-consumer.html-f5b2d049.js" as="script"><link rel="prefetch" href="/assets/kafka-old.html-1448d038.js" as="script"><link rel="prefetch" href="/assets/kafka-overview.html-8dd9a49b.js" as="script"><link rel="prefetch" href="/assets/kafka-producer.html-5dc9b65d.js" as="script"><link rel="prefetch" href="/assets/spring-kafka.html-bc75ec45.js" as="script"><link rel="prefetch" href="/assets/log-framework.html-76a57287.js" as="script"><link rel="prefetch" href="/assets/1.Hello World.html-b2ffe65b.js" as="script"><link rel="prefetch" href="/assets/2.Global Config.html-6a02822f.js" as="script"><link rel="prefetch" href="/assets/index.html-f37393b8.js" as="script"><link rel="prefetch" href="/assets/nginx.html-94f097bd.js" as="script"><link rel="prefetch" href="/assets/sharding-sphere.html-47e07fb1.js" as="script"><link rel="prefetch" href="/assets/shiro-overview.html-66b81094.js" as="script"><link rel="prefetch" href="/assets/data-structure-list.html-5ba0105d.js" as="script"><link rel="prefetch" href="/assets/data-structure-overview.html-85d0b05a.js" as="script"><link rel="prefetch" href="/assets/data-structure-tree.html-b7a2b7b5.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-63e9b96e.js" as="script"><link rel="prefetch" href="/assets/design-adapter.html-ca7d4d0c.js" as="script"><link rel="prefetch" href="/assets/design-bridge.html-f70c2b16.js" as="script"><link rel="prefetch" href="/assets/design-builder.html-8d44b4e2.js" as="script"><link rel="prefetch" href="/assets/design-chain.html-73c4f586.js" as="script"><link rel="prefetch" href="/assets/design-command.html-d6dfccee.js" as="script"><link rel="prefetch" href="/assets/design-composite.html-756fd116.js" as="script"><link rel="prefetch" href="/assets/design-decorator.html-826f2e24.js" as="script"><link rel="prefetch" href="/assets/design-facade.html-c448fc15.js" as="script"><link rel="prefetch" href="/assets/design-factory.html-902a65a0.js" as="script"><link rel="prefetch" href="/assets/design-flyweight.html-4459624e.js" as="script"><link rel="prefetch" href="/assets/design-interpreter.html-c630c412.js" as="script"><link rel="prefetch" href="/assets/design-iterator.html-ab1b6e0a.js" as="script"><link rel="prefetch" href="/assets/design-mediator.html-0a45de36.js" as="script"><link rel="prefetch" href="/assets/design-memento.html-4208519d.js" as="script"><link rel="prefetch" href="/assets/design-observer.html-7d34acf8.js" as="script"><link rel="prefetch" href="/assets/design-overview.html-8ae1eaca.js" as="script"><link rel="prefetch" href="/assets/design-prototype.html-843f1ba1.js" as="script"><link rel="prefetch" href="/assets/design-proxy.html-b51e83f1.js" as="script"><link rel="prefetch" href="/assets/design-singleton.html-cb4b0e72.js" as="script"><link rel="prefetch" href="/assets/design-state.html-514399be.js" as="script"><link rel="prefetch" href="/assets/design-strategy.html-586d3ac2.js" as="script"><link rel="prefetch" href="/assets/design-template.html-12aa47cf.js" as="script"><link rel="prefetch" href="/assets/design-visitor.html-ed58259a.js" as="script"><link rel="prefetch" href="/assets/滑动窗口.html-d4efa51b.js" as="script"><link rel="prefetch" href="/assets/linux-overview.html-f8205a0e.js" as="script"><link rel="prefetch" href="/assets/encoding.html-bb7cac1e.js" as="script"><link rel="prefetch" href="/assets/encryption-algorithm.html-47d69cef.js" as="script"><link rel="prefetch" href="/assets/temp.html-60b41fd7.js" as="script"><link rel="prefetch" href="/assets/spring-source-overview.html-3ac2c8f4.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-9b47aa32.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-d4e7a5e5.js" as="script"><link rel="prefetch" href="/assets/spring-boot-condition.html-f38f1a16.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-commons-base.html-b68d3933.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-182fff59.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-gateway.html-b56fde18.js" as="script"><link rel="prefetch" href="/assets/nacos-client-discovery.html-050d84e4.js" as="script"><link rel="prefetch" href="/assets/nacos-overview.html-755394c0.js" as="script"><link rel="prefetch" href="/assets/cloud-openfeign-action.html-6173210d.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-46fdc141.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-2f5d4e70.js" as="script"><link rel="prefetch" href="/assets/sentinel-source.html-db79abe0.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-sentinel.html-031a7566.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-90df4bc0.js" as="script"><link rel="prefetch" href="/assets/git.html-f3d86d29.js" as="script"><link rel="prefetch" href="/assets/gitlab.html-ee616321.js" as="script"><link rel="prefetch" href="/assets/junit4.html-7674a247.js" as="script"><link rel="prefetch" href="/assets/junit5.html-1088960a.js" as="script"><link rel="prefetch" href="/assets/maven.html-c5f718a8.js" as="script"><link rel="prefetch" href="/assets/reactor.html-b7f3a608.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-init.html-76aa84f3.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-listener.html-8020b96c.js" as="script"><link rel="prefetch" href="/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/assets/index.html-33e4c2a2.js" as="script"><link rel="prefetch" href="/assets/index.html-8ad96e03.js" as="script"><link rel="prefetch" href="/assets/index.html-b23d2171.js" as="script"><link rel="prefetch" href="/assets/index.html-8a709d0c.js" as="script"><link rel="prefetch" href="/assets/index.html-9488715d.js" as="script"><link rel="prefetch" href="/assets/index.html-fb3dd3ef.js" as="script"><link rel="prefetch" href="/assets/index.html-42d88d20.js" as="script"><link rel="prefetch" href="/assets/index.html-87f3d90a.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6c2eaf.js" as="script"><link rel="prefetch" href="/assets/index.html-df28bb11.js" as="script"><link rel="prefetch" href="/assets/index.html-78d325c5.js" as="script"><link rel="prefetch" href="/assets/index.html-0c05d7f0.js" as="script"><link rel="prefetch" href="/assets/database-overview.html-8e20b9c4.js" as="script"><link rel="prefetch" href="/assets/java-overview.html-110664f3.js" as="script"><link rel="prefetch" href="/assets/middleware-overview.html-23551371.js" as="script"><link rel="prefetch" href="/assets/quality-overview.html-c678a80a.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-overview.html-4f455e53.js" as="script"><link rel="prefetch" href="/assets/gitbook.html-82c9e715.js" as="script"><link rel="prefetch" href="/assets/tools-overview.html-ef94410e.js" as="script"><link rel="prefetch" href="/assets/mongo.html-b49ed607.js" as="script"><link rel="prefetch" href="/assets/mysql-advance.html-04da5f50.js" as="script"><link rel="prefetch" href="/assets/mysql-apply.html-93145a97.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-d6966f7f.js" as="script"><link rel="prefetch" href="/assets/mysql-devops.html-6b9ccca1.js" as="script"><link rel="prefetch" href="/assets/redis-base.html-2d4d81f6.js" as="script"><link rel="prefetch" href="/assets/redis-cluster.html-dd1dc967.js" as="script"><link rel="prefetch" href="/assets/redis-overview.html-7f2546f3.js" as="script"><link rel="prefetch" href="/assets/java-base.html-2a2487a8.js" as="script"><link rel="prefetch" href="/assets/java-sql.html-3235fb3f.js" as="script"><link rel="prefetch" href="/assets/java-time.html-c6bd518b.js" as="script"><link rel="prefetch" href="/assets/java-collection-list.html-1f5f5479.js" as="script"><link rel="prefetch" href="/assets/java-collection-map.html-9eaf3f79.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-base.html-ae299cb8.js" as="script"><link rel="prefetch" href="/assets/Java-concurrent-container.html-ebd6fec8.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-interview.html-07fbfa4a.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-lock.html-994ad73f.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-pool.html-ed4a1de5.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-tools.html-8880da92.js" as="script"><link rel="prefetch" href="/assets/java-bio.html-df6fc911.js" as="script"><link rel="prefetch" href="/assets/java-io-base.html-77f89736.js" as="script"><link rel="prefetch" href="/assets/java-nio.html-bcccb204.js" as="script"><link rel="prefetch" href="/assets/Java内存模型.html-7383b9cd.js" as="script"><link rel="prefetch" href="/assets/JVM内存结构.html-8d99ddf3.js" as="script"><link rel="prefetch" href="/assets/JVM垃圾回收.html-304d9a2d.js" as="script"><link rel="prefetch" href="/assets/JVM概览.html-8bd4b42f.js" as="script"><link rel="prefetch" href="/assets/JVM类加载器.html-77d4aeac.js" as="script"><link rel="prefetch" href="/assets/JVM类文件结构.html-9a5ae840.js" as="script"><link rel="prefetch" href="/assets/JVM调优.html-abf07289.js" as="script"><link rel="prefetch" href="/assets/java-lambda.html-e158a557.js" as="script"><link rel="prefetch" href="/assets/java-stream.html-ad9eb0ed.js" as="script"><link rel="prefetch" href="/assets/HikariCP-base.html-f749e904.js" as="script"><link rel="prefetch" href="/assets/HikariCP-source.html-4651cd3f.js" as="script"><link rel="prefetch" href="/assets/jackson-overview.html-1ff735d9.js" as="script"><link rel="prefetch" href="/assets/kafka-broker.html-78790cd6.js" as="script"><link rel="prefetch" href="/assets/kafka-consumer.html-3872d15c.js" as="script"><link rel="prefetch" href="/assets/kafka-old.html-4a95df91.js" as="script"><link rel="prefetch" href="/assets/kafka-overview.html-03135409.js" as="script"><link rel="prefetch" href="/assets/kafka-producer.html-f9cc0e5f.js" as="script"><link rel="prefetch" href="/assets/spring-kafka.html-0eaac2b9.js" as="script"><link rel="prefetch" href="/assets/log-framework.html-13f8b728.js" as="script"><link rel="prefetch" href="/assets/1.Hello World.html-254e923d.js" as="script"><link rel="prefetch" href="/assets/2.Global Config.html-34377212.js" as="script"><link rel="prefetch" href="/assets/index.html-6f5477e7.js" as="script"><link rel="prefetch" href="/assets/nginx.html-64c0a015.js" as="script"><link rel="prefetch" href="/assets/sharding-sphere.html-bb3296bb.js" as="script"><link rel="prefetch" href="/assets/shiro-overview.html-f4bdb923.js" as="script"><link rel="prefetch" href="/assets/data-structure-list.html-0f23b38b.js" as="script"><link rel="prefetch" href="/assets/data-structure-overview.html-f1e03c1d.js" as="script"><link rel="prefetch" href="/assets/data-structure-tree.html-a44ba30f.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-107f9ebe.js" as="script"><link rel="prefetch" href="/assets/design-adapter.html-77286312.js" as="script"><link rel="prefetch" href="/assets/design-bridge.html-00672c18.js" as="script"><link rel="prefetch" href="/assets/design-builder.html-27d852c8.js" as="script"><link rel="prefetch" href="/assets/design-chain.html-74047f74.js" as="script"><link rel="prefetch" href="/assets/design-command.html-943a7340.js" as="script"><link rel="prefetch" href="/assets/design-composite.html-463bbe40.js" as="script"><link rel="prefetch" href="/assets/design-decorator.html-34575490.js" as="script"><link rel="prefetch" href="/assets/design-facade.html-6a642241.js" as="script"><link rel="prefetch" href="/assets/design-factory.html-558c3336.js" as="script"><link rel="prefetch" href="/assets/design-flyweight.html-9a7105fb.js" as="script"><link rel="prefetch" href="/assets/design-interpreter.html-19cea0ae.js" as="script"><link rel="prefetch" href="/assets/design-iterator.html-55db2bf3.js" as="script"><link rel="prefetch" href="/assets/design-mediator.html-a639304c.js" as="script"><link rel="prefetch" href="/assets/design-memento.html-6453f1e1.js" as="script"><link rel="prefetch" href="/assets/design-observer.html-ed658ad7.js" as="script"><link rel="prefetch" href="/assets/design-overview.html-03776800.js" as="script"><link rel="prefetch" href="/assets/design-prototype.html-8fdfdb40.js" as="script"><link rel="prefetch" href="/assets/design-proxy.html-d9e3ef89.js" as="script"><link rel="prefetch" href="/assets/design-singleton.html-8c4de69b.js" as="script"><link rel="prefetch" href="/assets/design-state.html-aeddd299.js" as="script"><link rel="prefetch" href="/assets/design-strategy.html-79c37426.js" as="script"><link rel="prefetch" href="/assets/design-template.html-61d102d5.js" as="script"><link rel="prefetch" href="/assets/design-visitor.html-fefdc2c4.js" as="script"><link rel="prefetch" href="/assets/滑动窗口.html-a5cf52bf.js" as="script"><link rel="prefetch" href="/assets/linux-overview.html-4c5f0a4a.js" as="script"><link rel="prefetch" href="/assets/encoding.html-f5906218.js" as="script"><link rel="prefetch" href="/assets/encryption-algorithm.html-9a1f16a2.js" as="script"><link rel="prefetch" href="/assets/temp.html-bc9bd901.js" as="script"><link rel="prefetch" href="/assets/spring-source-overview.html-11cf77bb.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-f1d5d10e.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-a96eba50.js" as="script"><link rel="prefetch" href="/assets/spring-boot-condition.html-925c1f11.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-commons-base.html-08854838.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-6f95c5b7.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-gateway.html-3b5bcf8b.js" as="script"><link rel="prefetch" href="/assets/nacos-client-discovery.html-79247510.js" as="script"><link rel="prefetch" href="/assets/nacos-overview.html-13cec71c.js" as="script"><link rel="prefetch" href="/assets/cloud-openfeign-action.html-0f222092.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-80b0fc34.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-e2d9af9b.js" as="script"><link rel="prefetch" href="/assets/sentinel-source.html-692a3324.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-sentinel.html-bf9c4618.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-37eed2ce.js" as="script"><link rel="prefetch" href="/assets/git.html-87ad5d64.js" as="script"><link rel="prefetch" href="/assets/gitlab.html-09e004bc.js" as="script"><link rel="prefetch" href="/assets/junit4.html-e113cced.js" as="script"><link rel="prefetch" href="/assets/junit5.html-49a7387c.js" as="script"><link rel="prefetch" href="/assets/maven.html-dfa1482f.js" as="script"><link rel="prefetch" href="/assets/reactor.html-caf126d4.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-init.html-c9794d73.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-listener.html-22512f68.js" as="script"><link rel="prefetch" href="/assets/404.html-f08c28a7.js" as="script"><link rel="prefetch" href="/assets/index.html-703427c5.js" as="script"><link rel="prefetch" href="/assets/index.html-d81ead65.js" as="script"><link rel="prefetch" href="/assets/index.html-89246e48.js" as="script"><link rel="prefetch" href="/assets/index.html-6a96e1d8.js" as="script"><link rel="prefetch" href="/assets/index.html-3f2fdf99.js" as="script"><link rel="prefetch" href="/assets/index.html-def5ae53.js" as="script"><link rel="prefetch" href="/assets/index.html-da4568d9.js" as="script"><link rel="prefetch" href="/assets/index.html-855b7bae.js" as="script"><link rel="prefetch" href="/assets/index.html-0d635afd.js" as="script"><link rel="prefetch" href="/assets/index.html-555be4ca.js" as="script"><link rel="prefetch" href="/assets/index.html-e93144aa.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-bc08675d.js" as="script"><link rel="prefetch" href="/assets/mermaid-mindmap.esm.min-d48ac69f.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">Java 成神之路</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/java/java-overview.html" class="nav-link" aria-label="Java 笔记"><!---->Java 笔记<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring 笔记"><span class="title"><!---->Spring 笔记</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring IOC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/test02.html" class="nav-link" aria-label="Spring IOC详解"><!---->Spring IOC详解<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring 后置处理器解析</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/spring-bean-post-processor/BeanPostProcessor-base.html" class="nav-link" aria-label="Spring 后置处理器总览"><!---->Spring 后置处理器总览<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring Cloud"><span class="title"><!---->Spring Cloud</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-overview.html" class="nav-link" aria-label="Spring Cloud Overview"><!---->Spring Cloud Overview<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-nacos.md" class="nav-link" aria-label="Spring Cloud Nacos"><!---->Spring Cloud Nacos<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-sentinel.md" class="nav-link" aria-label="Spring Cloud Sentinel"><!---->Spring Cloud Sentinel<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-seate.md" class="nav-link" aria-label="Spring Cloud Seate"><!---->Spring Cloud Seate<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-ribbon/spring-cloud-ribbon.html" class="nav-link" aria-label="Spring Cloud Ribbon"><!---->Spring Cloud Ribbon<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/database/database-overview.html" class="nav-link" aria-label="数据库"><!---->数据库<!----></a></div><div class="nav-item hide-in-mobile"><a href="/quality/quality-overview.html" class="nav-link" aria-label="自我修养"><!---->自我修养<!----></a></div><div class="nav-item hide-in-mobile"><a href="/middleware/middleware-overview.html" class="nav-link" aria-label="中间件"><!---->中间件<!----></a></div><div class="nav-item hide-in-mobile"><a href="/tools/tools-overview.html" class="nav-link" aria-label="工具包"><!---->工具包<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/java/java-overview.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 总览"><!---->Java 总览<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Java 基础</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/java/java-base/java-base.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 基础"><!---->Java 基础<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-base/java-sql.html" class="nav-link sidebar-link sidebar-page" aria-label="Java SQL"><!---->Java SQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-base/java-time.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 时间操作"><!---->Java 时间操作<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/java/java-servlet/java-servlet.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Java Servlet"><!---->Java Servlet<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#一、引言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="一、引言"><!---->一、引言<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-1-c-s架构和b-s架构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 C/S架构和B/S架构"><!---->1.1 C/S架构和B/S架构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-2-c-s架构-client-server" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 c/s架构 (Client/Server)"><!---->1.2 c/s架构 (Client/Server)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-3-b-s架构-browser-server" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 B/S架构(Browser/Server)"><!---->1.3 B/S架构(Browser/Server)<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#二、服务器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="二、服务器"><!---->二、服务器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 概念"><!---->2.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-2-常见服务器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 常见服务器"><!---->2.2 常见服务器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-3-tomcat服务器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 Tomcat服务器"><!---->2.3 Tomcat服务器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-4-tomcat-安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 Tomcat:安装"><!---->2.4 Tomcat:安装<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-5-tomcat启动和停止" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5 Tomcat启动和停止"><!---->2.5 Tomcat启动和停止<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-6-项目部署及访问静态资源" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6 项目部署及访问静态资源"><!---->2.6 项目部署及访问静态资源<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-7常见错误" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7常见错误"><!---->2.7常见错误<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#三、servlet-简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="三、Servlet 简介"><!---->三、Servlet 简介<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-1-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 概念"><!---->3.1 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-2-servlet开发步骤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 Servlet开发步骤"><!---->3.2 Servlet开发步骤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-3-运行测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 运行测试"><!---->3.3 运行测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-4-常见错误" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 常见错误"><!---->3.4 常见错误<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#四、http-协议" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="四、HTTP 协议"><!---->四、HTTP 协议<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-1-什么是http" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 什么是HTTP"><!---->5.1 什么是HTTP<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-2-http协议特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 HTTP协议特点"><!---->5.2 HTTP协议特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-3-http协议通信流程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3 HTTP协议通信流程"><!---->5.3 HTTP协议通信流程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-4-请求报文和响应报文" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.4 请求报文和响应报文"><!---->5.4 请求报文和响应报文<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#六、servlet-详解" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="六、Servlet 详解"><!---->六、Servlet 详解<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-1-servlet核心接口和类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 Servlet核心接口和类"><!---->6.1 Servlet核心接口和类<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-2-servlet两种创建方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 Servlet两种创建方式"><!---->6.2 Servlet两种创建方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-3-servlet两种配置方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 Servlet两种配置方式"><!---->6.3 Servlet两种配置方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-3-4-webservlet" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3.4 @WebServlet"><!---->6.3.4 @WebServlet<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#七、servlet-应用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="七、Servlet 应用"><!---->七、Servlet 应用<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-1-request对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 request对象"><!---->7.1 request对象<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-2-response-对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 response 对象"><!---->7.2 response 对象<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-3-综合案例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 综合案例"><!---->7.3 综合案例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#八、转发与重定向" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="八、转发与重定向"><!---->八、转发与重定向<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-1-现有问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 现有问题"><!---->8.1 现有问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-2-转发" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 转发"><!---->8.2 转发<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-3-重定向" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.3 重定向"><!---->8.3 重定向<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-4-转发、重定向总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.4 转发、重定向总结"><!---->8.4 转发、重定向总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#九、servlet生命周期" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="九、Servlet生命周期"><!---->九、Servlet生命周期<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_9-1-生命周期四个阶段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.1 生命周期四个阶段"><!---->9.1 生命周期四个阶段<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十、servlet特性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十、Servlet特性"><!---->十、Servlet特性<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_10-1-线程安全问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1 线程安全问题"><!---->10.1 线程安全问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_10-2-如何保证线程安全" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2 如何保证线程安全"><!---->10.2 如何保证线程安全<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十一、状态管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十一、状态管理"><!---->十一、状态管理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-1-现有问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.1 现有问题"><!---->11.1 现有问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-2-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.2 概念"><!---->11.2 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-3-状态管理分类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.3 状态管理分类"><!---->11.3 状态管理分类<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十二、cookie的使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十二、Cookie的使用"><!---->十二、Cookie的使用<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-1-什么是cookie" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.1 什么是Cookie"><!---->12.1 什么是Cookie<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-2-创建cookie" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.2 创建Cookie"><!---->12.2 创建Cookie<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-3-获取cookie" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.3 获取Cookie"><!---->12.3 获取Cookie<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-4-修改cookie" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.4 修改Cookie"><!---->12.4 修改Cookie<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-5-cookie编码与解码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.5 Cookie编码与解码"><!---->12.5 Cookie编码与解码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-6-cookiet优点和缺点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.6 Cookiet优点和缺点"><!---->12.6 Cookiet优点和缺点<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十三、session对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十三、Session对象"><!---->十三、Session对象<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-1-session概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.1 Session概述"><!---->13.1 Session概述<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-2-session原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.2 Session原理"><!---->13.2 Session原理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-3-session使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.3 Session使用"><!---->13.3 Session使用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-3-1获取session" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.3.1获取Session"><!---->13.3.1获取Session<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-4-session与request应用区别" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.4 Session与Request应用区别"><!---->13.4 Session与Request应用区别<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-5-session的生命周期" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.5 Session的生命周期"><!---->13.5 Session的生命周期<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-4-浏览器禁用cookie" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.4 浏览器禁用Cookie"><!---->13.4 浏览器禁用Cookie<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-5-session实战权限验证" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.5 Session实战权限验证"><!---->13.5 Session实战权限验证<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-6-session-实战保存验证码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13.6 Session 实战保存验证码"><!---->13.6 Session 实战保存验证码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十四、servletcontext-对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十四、ServletContext 对象"><!---->十四、ServletContext 对象<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-1-servletcontexti概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14.1 ServletContexti概述"><!---->14.1 ServletContexti概述<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-2-获取servletcontext-对象" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14.2 获取ServletContext.对象"><!---->14.2 获取ServletContext.对象<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-3-servletcontext作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14.3 ServletContext作用"><!---->14.3 ServletContext作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-4-servletcontext特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14.4 ServletContext特点"><!---->14.4 ServletContext特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-5-servletcontext-应用场景" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14.5 ServletContext/应用场景"><!---->14.5 ServletContext/应用场景<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-6作用域总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14.6作用域总结"><!---->14.6作用域总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十五、过滤器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十五、过滤器"><!---->十五、过滤器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-1-现有问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.1 现有问题"><!---->15.1 现有问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-2-概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.2 概念"><!---->15.2 概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-3-过滤器作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.3 过滤器作用"><!---->15.3 过滤器作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-4-编写过滤器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.4 编写过滤器"><!---->15.4 编写过滤器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-5-过滤器配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.5 过滤器配置"><!---->15.5 过滤器配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-6过滤器链和优先级" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.6过滤器链和优先级"><!---->15.6过滤器链和优先级<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-7过滤器典型应用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15.7过滤器典型应用"><!---->15.7过滤器典型应用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十六、监听器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="十六、监听器"><!---->十六、监听器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-1-httpsessionlister" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16.1 HttpSessionLister"><!---->16.1 HttpSessionLister<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-2-servletcontextlistener" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16.2 ServletContextListener"><!---->16.2 ServletContextListener<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-3-servletrequestlistener" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16.3 ServletRequestListener"><!---->16.3 ServletRequestListener<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-4-httpsessionattributelister" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16.4 HttpSessionAttributeLister"><!---->16.4 HttpSessionAttributeLister<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-5-servletcontextattributelistener" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16.5 ServletContextAttributeListener"><!---->16.5 ServletContextAttributeListener<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-6-servletrequestattributelistener" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16.6 ServletRequestAttributeListener"><!---->16.6 ServletRequestAttributeListener<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/java/java-base/java-time.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 时间操作"><!---->Java 时间操作<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java 8 新特性</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java 集合</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java IO 模型</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java 并发编程</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">JVM概览</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Java Servlet</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-29T13:09:28.000Z"></span><!----><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 39 分钟</span><meta property="timeRequired" content="PT39M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#一、引言" class="router-link-active router-link-exact-active toc-link level2">一、引言</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-1-c-s架构和b-s架构" class="router-link-active router-link-exact-active toc-link level3">1.1 C/S架构和B/S架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-2-c-s架构-client-server" class="router-link-active router-link-exact-active toc-link level3">1.2 c/s架构 (Client/Server)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_1-3-b-s架构-browser-server" class="router-link-active router-link-exact-active toc-link level3">1.3 B/S架构(Browser/Server)</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#二、服务器" class="router-link-active router-link-exact-active toc-link level2">二、服务器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-1-概念" class="router-link-active router-link-exact-active toc-link level3">2.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-2-常见服务器" class="router-link-active router-link-exact-active toc-link level3">2.2 常见服务器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-3-tomcat服务器" class="router-link-active router-link-exact-active toc-link level3">2.3 Tomcat服务器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-4-tomcat-安装" class="router-link-active router-link-exact-active toc-link level3">2.4 Tomcat:安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-5-tomcat启动和停止" class="router-link-active router-link-exact-active toc-link level3">2.5 Tomcat启动和停止</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-6-项目部署及访问静态资源" class="router-link-active router-link-exact-active toc-link level3">2.6 项目部署及访问静态资源</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_2-7常见错误" class="router-link-active router-link-exact-active toc-link level3">2.7常见错误</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#三、servlet-简介" class="router-link-active router-link-exact-active toc-link level2">三、Servlet 简介</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-1-概念" class="router-link-active router-link-exact-active toc-link level3">3.1 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-2-servlet开发步骤" class="router-link-active router-link-exact-active toc-link level3">3.2 Servlet开发步骤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-3-运行测试" class="router-link-active router-link-exact-active toc-link level3">3.3 运行测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_3-4-常见错误" class="router-link-active router-link-exact-active toc-link level3">3.4 常见错误</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#四、http-协议" class="router-link-active router-link-exact-active toc-link level2">四、HTTP 协议</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-1-什么是http" class="router-link-active router-link-exact-active toc-link level3">5.1 什么是HTTP</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-2-http协议特点" class="router-link-active router-link-exact-active toc-link level3">5.2 HTTP协议特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-3-http协议通信流程" class="router-link-active router-link-exact-active toc-link level3">5.3 HTTP协议通信流程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_5-4-请求报文和响应报文" class="router-link-active router-link-exact-active toc-link level3">5.4 请求报文和响应报文</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#六、servlet-详解" class="router-link-active router-link-exact-active toc-link level2">六、Servlet 详解</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-1-servlet核心接口和类" class="router-link-active router-link-exact-active toc-link level3">6.1 Servlet核心接口和类</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-2-servlet两种创建方式" class="router-link-active router-link-exact-active toc-link level3">6.2 Servlet两种创建方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-3-servlet两种配置方式" class="router-link-active router-link-exact-active toc-link level3">6.3 Servlet两种配置方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_6-3-4-webservlet" class="router-link-active router-link-exact-active toc-link level3">6.3.4 @WebServlet</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#七、servlet-应用" class="router-link-active router-link-exact-active toc-link level2">七、Servlet 应用</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-1-request对象" class="router-link-active router-link-exact-active toc-link level3">7.1 request对象</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-2-response-对象" class="router-link-active router-link-exact-active toc-link level3">7.2 response 对象</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_7-3-综合案例" class="router-link-active router-link-exact-active toc-link level3">7.3 综合案例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#八、转发与重定向" class="router-link-active router-link-exact-active toc-link level2">八、转发与重定向</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-1-现有问题" class="router-link-active router-link-exact-active toc-link level3">8.1 现有问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-2-转发" class="router-link-active router-link-exact-active toc-link level3">8.2 转发</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-3-重定向" class="router-link-active router-link-exact-active toc-link level3">8.3 重定向</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_8-4-转发、重定向总结" class="router-link-active router-link-exact-active toc-link level3">8.4 转发、重定向总结</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#九、servlet生命周期" class="router-link-active router-link-exact-active toc-link level2">九、Servlet生命周期</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_9-1-生命周期四个阶段" class="router-link-active router-link-exact-active toc-link level3">9.1 生命周期四个阶段</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十、servlet特性" class="router-link-active router-link-exact-active toc-link level2">十、Servlet特性</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_10-1-线程安全问题" class="router-link-active router-link-exact-active toc-link level3">10.1 线程安全问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_10-2-如何保证线程安全" class="router-link-active router-link-exact-active toc-link level3">10.2 如何保证线程安全</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十一、状态管理" class="router-link-active router-link-exact-active toc-link level2">十一、状态管理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-1-现有问题" class="router-link-active router-link-exact-active toc-link level3">11.1 现有问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-2-概念" class="router-link-active router-link-exact-active toc-link level3">11.2 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_11-3-状态管理分类" class="router-link-active router-link-exact-active toc-link level3">11.3 状态管理分类</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十二、cookie的使用" class="router-link-active router-link-exact-active toc-link level2">十二、Cookie的使用</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-1-什么是cookie" class="router-link-active router-link-exact-active toc-link level3">12.1 什么是Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-2-创建cookie" class="router-link-active router-link-exact-active toc-link level3">12.2 创建Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-3-获取cookie" class="router-link-active router-link-exact-active toc-link level3">12.3 获取Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-4-修改cookie" class="router-link-active router-link-exact-active toc-link level3">12.4 修改Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-5-cookie编码与解码" class="router-link-active router-link-exact-active toc-link level3">12.5 Cookie编码与解码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_12-6-cookiet优点和缺点" class="router-link-active router-link-exact-active toc-link level3">12.6 Cookiet优点和缺点</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十三、session对象" class="router-link-active router-link-exact-active toc-link level2">十三、Session对象</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-1-session概述" class="router-link-active router-link-exact-active toc-link level3">13.1 Session概述</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-2-session原理" class="router-link-active router-link-exact-active toc-link level3">13.2 Session原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-3-session使用" class="router-link-active router-link-exact-active toc-link level3">13.3 Session使用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-3-1获取session" class="router-link-active router-link-exact-active toc-link level3">13.3.1获取Session</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-4-session与request应用区别" class="router-link-active router-link-exact-active toc-link level3">13.4 Session与Request应用区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-5-session的生命周期" class="router-link-active router-link-exact-active toc-link level3">13.5 Session的生命周期</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-4-浏览器禁用cookie" class="router-link-active router-link-exact-active toc-link level3">13.4 浏览器禁用Cookie</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-5-session实战权限验证" class="router-link-active router-link-exact-active toc-link level3">13.5 Session实战权限验证</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_13-6-session-实战保存验证码" class="router-link-active router-link-exact-active toc-link level3">13.6 Session 实战保存验证码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十四、servletcontext-对象" class="router-link-active router-link-exact-active toc-link level2">十四、ServletContext 对象</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-1-servletcontexti概述" class="router-link-active router-link-exact-active toc-link level3">14.1 ServletContexti概述</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-2-获取servletcontext-对象" class="router-link-active router-link-exact-active toc-link level3">14.2 获取ServletContext.对象</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-3-servletcontext作用" class="router-link-active router-link-exact-active toc-link level3">14.3 ServletContext作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-4-servletcontext特点" class="router-link-active router-link-exact-active toc-link level3">14.4 ServletContext特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-5-servletcontext-应用场景" class="router-link-active router-link-exact-active toc-link level3">14.5 ServletContext/应用场景</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_14-6作用域总结" class="router-link-active router-link-exact-active toc-link level3">14.6作用域总结</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十五、过滤器" class="router-link-active router-link-exact-active toc-link level2">十五、过滤器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-1-现有问题" class="router-link-active router-link-exact-active toc-link level3">15.1 现有问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-2-概念" class="router-link-active router-link-exact-active toc-link level3">15.2 概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-3-过滤器作用" class="router-link-active router-link-exact-active toc-link level3">15.3 过滤器作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-4-编写过滤器" class="router-link-active router-link-exact-active toc-link level3">15.4 编写过滤器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-5-过滤器配置" class="router-link-active router-link-exact-active toc-link level3">15.5 过滤器配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-6过滤器链和优先级" class="router-link-active router-link-exact-active toc-link level3">15.6过滤器链和优先级</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_15-7过滤器典型应用" class="router-link-active router-link-exact-active toc-link level3">15.7过滤器典型应用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#十六、监听器" class="router-link-active router-link-exact-active toc-link level2">十六、监听器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-1-httpsessionlister" class="router-link-active router-link-exact-active toc-link level3">16.1 HttpSessionLister</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-2-servletcontextlistener" class="router-link-active router-link-exact-active toc-link level3">16.2 ServletContextListener</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-3-servletrequestlistener" class="router-link-active router-link-exact-active toc-link level3">16.3 ServletRequestListener</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-4-httpsessionattributelister" class="router-link-active router-link-exact-active toc-link level3">16.4 HttpSessionAttributeLister</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-5-servletcontextattributelistener" class="router-link-active router-link-exact-active toc-link level3">16.5 ServletContextAttributeListener</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/java-servlet/java-servlet.html#_16-6-servletrequestattributelistener" class="router-link-active router-link-exact-active toc-link level3">16.6 ServletRequestAttributeListener</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="java-servlet" tabindex="-1"><a class="header-anchor" href="#java-servlet" aria-hidden="true">#</a> Java Servlet</h1><h2 id="一、引言" tabindex="-1"><a class="header-anchor" href="#一、引言" aria-hidden="true">#</a> 一、引言</h2><h3 id="_1-1-c-s架构和b-s架构" tabindex="-1"><a class="header-anchor" href="#_1-1-c-s架构和b-s架构" aria-hidden="true">#</a> 1.1 C/S架构和B/S架构</h3><blockquote><p>C/S和B/S是软件发展过程中出现的两种软件架构方式。</p></blockquote><h3 id="_1-2-c-s架构-client-server" tabindex="-1"><a class="header-anchor" href="#_1-2-c-s架构-client-server" aria-hidden="true">#</a> 1.2 c/s架构 (Client/Server)</h3><blockquote><ul><li>特点：必须在客户端安装特定软件</li><li>优点：图形效果显示较好（如：3D游戏》</li><li>缺点：服务器的软件和功能进行升级，客户端也必须升级、不利于维护</li><li>常见的C/S程序：QQ、微信等</li></ul></blockquote><p><img src="/assets/image-20221129113403052-0577f7c0.png" alt="image-20221129113403052"></p><h3 id="_1-3-b-s架构-browser-server" tabindex="-1"><a class="header-anchor" href="#_1-3-b-s架构-browser-server" aria-hidden="true">#</a> 1.3 B/S架构(Browser/Server)</h3><blockquote><p>特点：无需安装客户端，任何浏览器都可直接访问</p><p>优点：涉及到功能的升级，只需要升级服务器端。</p><p>缺点：图形显示效果不如C/S架构</p><p>需要通过HTTP协议访问</p></blockquote><h2 id="二、服务器" tabindex="-1"><a class="header-anchor" href="#二、服务器" aria-hidden="true">#</a> 二、服务器</h2><h3 id="_2-1-概念" tabindex="-1"><a class="header-anchor" href="#_2-1-概念" aria-hidden="true">#</a> 2.1 概念</h3><h4 id="_2-1-1-什么是web" tabindex="-1"><a class="header-anchor" href="#_2-1-1-什么是web" aria-hidden="true">#</a> 2.1.1 什么是web</h4><p>Web(World Wide Web)称为万维网，简单理解就是网站，它用来表示Internet主机上供外界访问的资源。</p><p>Internet上供外界访问的资源分为两大类</p><ul><li><p>静态资源：指Wb页面中供人们浏览的数据始终是不变的。(HTML、CSS)</p></li><li><p>动态资源：指wb页面中供人们浏览的数据是由程序产生的，不同时间点，甚至不同设备访问wb页面看到的内容各不相同。(JSP/Servlet)</p></li><li><p>在Java中，动态Web资源开发技术我们统称为Java Web。</p></li></ul><h4 id="_2-1-2-什么是web服务器" tabindex="-1"><a class="header-anchor" href="#_2-1-2-什么是web服务器" aria-hidden="true">#</a> 2.1.2 什么是web服务器</h4><p>Web服务器是运行及发布Wb应用的容器，只有将开发的Web项目放置到该容器中，才能使网络中的所有用户通过浏览器进行访问。</p><h3 id="_2-2-常见服务器" tabindex="-1"><a class="header-anchor" href="#_2-2-常见服务器" aria-hidden="true">#</a> 2.2 常见服务器</h3><ul><li>开源：OpenSource（1、开放源代码 2、免费） <ul><li>Tomcat(主流Web服务器之一，适合初学者)</li><li>jetty(淘宝，运行效率比Tomcati高)</li><li>resin(新浪，所有开源服务器软件中，运行效率最高的)</li><li>。三者的用法从代码角度完全相同，只有在开启、关闭服务器软件时对应的命令稍有区别。掌握一个即掌握所有</li></ul></li><li>收费 <ul><li>WebLogic (Oracle)</li><li>WebSphere (IBM)</li><li>提供相应的服务与支持，软件大，耗资源</li></ul></li></ul><h3 id="_2-3-tomcat服务器" tabindex="-1"><a class="header-anchor" href="#_2-3-tomcat服务器" aria-hidden="true">#</a> 2.3 Tomcat服务器</h3><p>Tomcat是Apache软件基金会(Apache Software Foundation)的Jakarta项目中的一个核心项目，免费开源、并支持Servlet和JSP规范。目前Tomcati最新版本为9.0。</p><p>Tomcat技术先进、性能稳定，深受Jva爱好者喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web应用服务器。</p><h3 id="_2-4-tomcat-安装" tabindex="-1"><a class="header-anchor" href="#_2-4-tomcat-安装" aria-hidden="true">#</a> 2.4 Tomcat:安装</h3><h4 id="_2-4-1-下载" tabindex="-1"><a class="header-anchor" href="#_2-4-1-下载" aria-hidden="true">#</a> 2.4.1 下载</h4><p>官网下载(http:/tomcat..apache.org/)Tomcata8.5解压缩版本</p><h4 id="_2-4-2-解压安装" tabindex="-1"><a class="header-anchor" href="#_2-4-2-解压安装" aria-hidden="true">#</a> 2.4.2 解压安装</h4><p>将Tomcat解压到一个没有特殊符号的目录中（一般纯英文即可）</p><p>注意</p><ul><li>不建议将服务器软件放在磁盘层次很多的文件夹</li><li>不建议放在中文路径下</li></ul><h4 id="_2-4-3-tomcat目录结构" tabindex="-1"><a class="header-anchor" href="#_2-4-3-tomcat目录结构" aria-hidden="true">#</a> 2.4.3 Tomcat目录结构</h4><table><thead><tr><th>文件夹</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>bin</td><td>该目录下存放的是二进制可执行文件</td><td>startup.bat启动Tomcat、shutdown.bat停止Tomcat</td></tr><tr><td>conf</td><td>这是一个非常重要的目录<br>这个目录下有两个最为重要的文件server.xml和web.xml</td><td>server.xml: 配置整个服务器信息。例如修改端口号，编码格式等。<br>web.xml:项目部署描述符文件，这个文件中注册了很多MIME类型，即文档类型。</td></tr><tr><td>lib</td><td>Tomcat的类库，里面存放Tomcat运行所需要的jar文件。</td><td></td></tr><tr><td>logs</td><td>存放日志文件，记录了Tomcat)启动和关闭的信息，<br>如果启动Tomcat时有错误，异常也会记录在日志文件中。</td><td></td></tr><tr><td>temp</td><td>Tomcat的临时文件，这个目录下的东西在停止Tomcat后删除。</td><td></td></tr><tr><td>webapps</td><td>存放web项目的目录，其中每个文件夹都是一个项目；<br>其中root是一个特殊的项目，在地址栏中没有给出项目目录时，对应的就是ROOT项目。</td><td></td></tr><tr><td>work</td><td>运行时生成的文件，最终运行的文件都在这里。</td><td>当客户端用户访问一个JSP文件时，Tomcat会通过JSP生成Java文件，<br>然后再编译Java文件生成class文件，生成的java和class文件都会存放到这个目录下。</td></tr></tbody></table><h3 id="_2-5-tomcat启动和停止" tabindex="-1"><a class="header-anchor" href="#_2-5-tomcat启动和停止" aria-hidden="true">#</a> 2.5 Tomcat启动和停止</h3><h4 id="_2-5-1-启动" tabindex="-1"><a class="header-anchor" href="#_2-5-1-启动" aria-hidden="true">#</a> 2.5.1 启动</h4><p>进入tomcat安装目录bin下，双击startup.bat启动程序即可</p><h4 id="_2-5-2-验证" tabindex="-1"><a class="header-anchor" href="#_2-5-2-验证" aria-hidden="true">#</a> 2.5.2 验证</h4><p>打开浏览器，输入http://localhost:8080，如果出现访问界面证明Tomcat启动成功。</p><h4 id="_2-5-3-停止" tabindex="-1"><a class="header-anchor" href="#_2-5-3-停止" aria-hidden="true">#</a> 2.5.3 停止</h4><p>双击shutdown.bat即可关闭Tomcat)启动窗口。</p><h4 id="_2-5-4-修改端口号" tabindex="-1"><a class="header-anchor" href="#_2-5-4-修改端口号" aria-hidden="true">#</a> 2.5.4 修改端口号</h4><p>Tomcat默认端口号为8080，可以通过conf/server.xml文件修改</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8080<span class="token punctuation">&quot;</span></span><span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HTTP/1.1<span class="token punctuation">&quot;</span></span>
		   <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20000<span class="token punctuation">&quot;</span></span>
		   <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8443<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>注意：修改端口号需要重新启动Tomcat:才能生效</li></ul><h3 id="_2-6-项目部署及访问静态资源" tabindex="-1"><a class="header-anchor" href="#_2-6-项目部署及访问静态资源" aria-hidden="true">#</a> 2.6 项目部署及访问静态资源</h3><p>Tomcat是Web服务器，我们的项目应用是部署在webapps下，然后通过特定的URL访问。</p><h4 id="_2-6-1-创建项目" tabindex="-1"><a class="header-anchor" href="#_2-6-1-创建项目" aria-hidden="true">#</a> 2.6.1 创建项目</h4><ul><li><p>在webapps中建立文件夹（项目应用），比如：myweb</p><ul><li><p>创建WEB-NF文件夹，用于存放项目的核心内容</p><ul><li>创建classes,用于存放.class文件</li><li>创建ib,用于存放jar文件</li><li>创建web.xml,项目配置文件（到ROOT项目下的WEB-NF复制即可）</li></ul></li><li><p>把网页hello.html复制到myweb文件夹中，与WEB-INF在同级目录</p></li></ul></li></ul><h4 id="_2-6-2-url访问资源" tabindex="-1"><a class="header-anchor" href="#_2-6-2-url访问资源" aria-hidden="true">#</a> 2.6.2 URL访问资源</h4><p>浏览器地址中输入URL:http://localhost:8080/myweb/hello.html</p><ul><li>经验：URL主要有4部分组成：协议、主机、端口、资源路径</li></ul><p><img src="/assets/image-20221129120044838-a35652f4.png" alt="image-20221129120044838"></p><h4 id="_2-6-3-tomcat响应流程图" tabindex="-1"><a class="header-anchor" href="#_2-6-3-tomcat响应流程图" aria-hidden="true">#</a> 2.6.3 Tomcat响应流程图</h4><p><img src="/assets/image-20221129120230013-9a25b529.png" alt="image-20221129120230013"></p><h3 id="_2-7常见错误" tabindex="-1"><a class="header-anchor" href="#_2-7常见错误" aria-hidden="true">#</a> 2.7常见错误</h3><h4 id="_2-7-1-tomcat控制台闪退" tabindex="-1"><a class="header-anchor" href="#_2-7-1-tomcat控制台闪退" aria-hidden="true">#</a> 2.7.1 Tomcat控制台闪退</h4><p>闪退问题是由于JAVA_HOME配置导致的，检查JAVA_HOME配置是否正确</p><h4 id="_2-7-2-404" tabindex="-1"><a class="header-anchor" href="#_2-7-2-404" aria-hidden="true">#</a> 2.7.2 404</h4><p>访问资源不存在，出现404错误</p><p><img src="/assets/image-20221129120403186-48515dd7.png" alt="image-20221129120403186"></p><h2 id="三、servlet-简介" tabindex="-1"><a class="header-anchor" href="#三、servlet-简介" aria-hidden="true">#</a> 三、Servlet 简介</h2><h3 id="_3-1-概念" tabindex="-1"><a class="header-anchor" href="#_3-1-概念" aria-hidden="true">#</a> 3.1 概念</h3><ul><li><p>Servlet:Server Applet的简称，是服务器端的程序（代码、功能实现），可交互式的处理客户端发送到服务端的请求，并完成操作响应。</p></li><li><p>动态网页技术</p></li><li><p>JavaWeb程序开发的基础，JavaEE规范（一套接口）的一个组成部分。</p></li></ul><h4 id="_3-1-1-servletf作用" tabindex="-1"><a class="header-anchor" href="#_3-1-1-servletf作用" aria-hidden="true">#</a> 3.1.1 Servletf作用</h4><ul><li>接收客户端请求，完成操作。</li><li>动态生成网页（页面数据可变）</li><li>将包含操作结果的动态网页响应给客户端。</li></ul><h3 id="_3-2-servlet开发步骤" tabindex="-1"><a class="header-anchor" href="#_3-2-servlet开发步骤" aria-hidden="true">#</a> 3.2 Servlet开发步骤</h3><h4 id="_3-2-1-搭建开发环境" tabindex="-1"><a class="header-anchor" href="#_3-2-1-搭建开发环境" aria-hidden="true">#</a> 3.2.1 搭建开发环境</h4><p>将Servleti相关jar包(lib\servlet-.api.jar)配置到classpath中</p><h4 id="_3-2-2-编写servlet" tabindex="-1"><a class="header-anchor" href="#_3-2-2-编写servlet" aria-hidden="true">#</a> 3.2.2 编写Servlet</h4><ul><li>实现javax.servlet.Servlet</li><li>重写5个主要方法</li><li>在核心的service()方法中编写输出语句，打印访问结果</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Servlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span><span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;My First Servlet!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
	<span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-3-部署servlet" tabindex="-1"><a class="header-anchor" href="#_3-2-3-部署servlet" aria-hidden="true">#</a> 3.2.3 部署Servlet</h4><p>编译MyServlet后，将生成的.class文件放在WEB-INF/classes.文件中。</p><h4 id="_3-2-4-配置servlet" tabindex="-1"><a class="header-anchor" href="#_3-2-4-配置servlet" aria-hidden="true">#</a> 3.2.4 配置Servlet</h4><p>编写WEB-INF下项目配置文件web.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span> <span class="token attr-name">xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span><span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!--1、添加serv1et节点--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.qf.servlet.MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
	
    <span class="token comment">&lt;!--2 添加servlet-mapping节点 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>MyServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/myservlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>注意：url-pattern配置的内容就是浏览器地址栏输入的URL中项目名称后资源的内容</li></ul><h3 id="_3-3-运行测试" tabindex="-1"><a class="header-anchor" href="#_3-3-运行测试" aria-hidden="true">#</a> 3.3 运行测试</h3><p>启动Tomcat,在浏览器地址栏中输入http://localhost:8080/myweb/myservlet访问，在Tomcat中打印时间表示成功。</p><h3 id="_3-4-常见错误" tabindex="-1"><a class="header-anchor" href="#_3-4-常见错误" aria-hidden="true">#</a> 3.4 常见错误</h3><h4 id="_3-4-1-500错误" tabindex="-1"><a class="header-anchor" href="#_3-4-1-500错误" aria-hidden="true">#</a> 3.4.1 500错误</h4><p>服务端出现异常</p><p><img src="/assets/image-20221129121735475-160d6da8.png" alt="image-20221129121735475"></p><h2 id="四、http-协议" tabindex="-1"><a class="header-anchor" href="#四、http-协议" aria-hidden="true">#</a> 四、HTTP 协议</h2><h3 id="_5-1-什么是http" tabindex="-1"><a class="header-anchor" href="#_5-1-什么是http" aria-hidden="true">#</a> 5.1 什么是HTTP</h3><p>超文本传输协议(HTTP,HyperText Transfer Protocol))是互联网上应用最为广泛的一种网络协议，是一个基于请求与响应模式的、无状态的、应用层的协议，运行于TCP协议基础之上。</p><h3 id="_5-2-http协议特点" tabindex="-1"><a class="header-anchor" href="#_5-2-http协议特点" aria-hidden="true">#</a> 5.2 HTTP协议特点</h3><ul><li>支持客户端（浏览器）/服务器模式。</li><li>简单快速：客户端只向服务器发送请求方法和路径，服务器即可响应数据，因而通信速度很快。请求方法常用的有GT、POST等。</li><li>灵活：HTTP允许传输任意类型的数据，传输的数据类型由Content-Type标识。</li><li>无连接：无连接指的是每次TCP连接只处理一个或多个请求，服务器处理完客户的请求后，即断开连接。采用这种方式可以节省传输时间。 <ul><li>HTTP1.0 版本是一个请求响应之后，直接就断开了。称为短连接。</li><li>HTTP1.1 版本不是响应后直接就断开了，而是等几秒钟，这几秒钟之内有新的请求，那么还是通过之前的连接通道来收发消息，如果过了这几秒钟用户没有发送新的请求，就会断开连接。称为长连接。</li></ul></li><li>无状态：HTTP协议是无状态协议。 <ul><li>无状态是指协议对于事务处理没有记忆能力。</li></ul></li></ul><h3 id="_5-3-http协议通信流程" tabindex="-1"><a class="header-anchor" href="#_5-3-http协议通信流程" aria-hidden="true">#</a> 5.3 HTTP协议通信流程</h3><ul><li>客户与服务器建立连接（三次握手）</li><li>客户向服务器发送请求。</li><li>服务器接受请求，并根据请求返回相应的文件作为应答。</li><li>客户与服务器关闭连接（四次挥手）。</li></ul><p><img src="/assets/image-20221129123827790-a3a7ce73.png" alt="image-20221129123827790"></p><h3 id="_5-4-请求报文和响应报文" tabindex="-1"><a class="header-anchor" href="#_5-4-请求报文和响应报文" aria-hidden="true">#</a> 5.4 请求报文和响应报文</h3><h4 id="_5-4-1-http请求报文" tabindex="-1"><a class="header-anchor" href="#_5-4-1-http请求报文" aria-hidden="true">#</a> 5.4.1 HTTP请求报文</h4><p>当浏览器向Wb服务器发出请求时，它向服务器传递了一个数据块，也就是请求信息（请求报文），HTTP请求信息由4部分组成：</p><ol><li>请求行请求方法/地址URI协议/版本</li><li>请求头(Request Header)</li><li>空行</li><li>请求正文</li></ol><p><img src="/assets/image-20221129124006386-d91d0d0c.png" alt="image-20221129124006386"></p><h4 id="_5-4-2http响应报文" tabindex="-1"><a class="header-anchor" href="#_5-4-2http响应报文" aria-hidden="true">#</a> 5.4.2HTTP响应报文</h4><p>HTTP响应报文与HTTP请求报文相似，HTTP响应也由4个部分组成：</p><ol><li>状态行</li><li>响应头(Response Header)</li><li>空行</li><li>响应正文</li></ol><p><img src="/assets/image-20221129124154833-9e9665b2.png" alt="image-20221129124154833"></p><h4 id="_5-4-3-常见状态码" tabindex="-1"><a class="header-anchor" href="#_5-4-3-常见状态码" aria-hidden="true">#</a> 5.4.3 常见状态码</h4><table><thead><tr><th>状态代码</th><th>状态描述</th><th>说明</th></tr></thead><tbody><tr><td>200</td><td>OK</td><td>客户端请求成功</td></tr><tr><td>302</td><td>Found</td><td>临时重定向</td></tr><tr><td>403</td><td>Forbidden</td><td>服务器收到请求，但是拒绝提供服务。服务器通常会在响应正文中给出不提供服务的原因</td></tr><tr><td>404</td><td>Not Found</td><td>请求的资源不存在，例如，输入了错误的URL。</td></tr><tr><td>500</td><td>Internal Server Error</td><td>服务器发生不可预期的错误，导致无法完成客户端的请求。</td></tr></tbody></table><h2 id="六、servlet-详解" tabindex="-1"><a class="header-anchor" href="#六、servlet-详解" aria-hidden="true">#</a> 六、Servlet 详解</h2><h3 id="_6-1-servlet核心接口和类" tabindex="-1"><a class="header-anchor" href="#_6-1-servlet核心接口和类" aria-hidden="true">#</a> 6.1 Servlet核心接口和类</h3><p>在Servlet体系结构中，除了实现Servlet接口，还可以通过继承GenericServlet或HttpServlet类，完成编写。</p><h4 id="_6-1-1-servlet接口" tabindex="-1"><a class="header-anchor" href="#_6-1-1-servlet接口" aria-hidden="true">#</a> 6.1.1 Servlet接口</h4><p>在Servlet APIE中最重要的是Servlet:接口，所有Servlet都会直接或间接的与该接口发生联系，或是直接实现该接口，或间接继承自实现了该接口的类。该接口包括以下五个方法：</p><ul><li>init(ServletConfig config)</li><li>ServletConfig getServletConfig()</li><li>service(ServletRequest req,ServletResponse res)</li><li>String getServletInfo()</li><li>destroy()</li></ul><h4 id="_6-1-2-genericservlet抽象类" tabindex="-1"><a class="header-anchor" href="#_6-1-2-genericservlet抽象类" aria-hidden="true">#</a> 6.1.2 GenericServlet抽象类</h4><p>GenericServlet使编写Servlet变得更容易。它提供生命周期方法init和destroy的简单实现，要编写一般的Servlet.,只需重写抽象service方法即可。</p><h4 id="_6-1-3-httpservlet类" tabindex="-1"><a class="header-anchor" href="#_6-1-3-httpservlet类" aria-hidden="true">#</a> 6.1.3 HttpServlet类</h4><p>HttpServlet是继承GenericServlet的基础上进一步的扩展。提供将要被子类化以创建适用于Web站点的HTTP servlet的抽象类。</p><p>HttpServlet的子类至少必须重写一个方法，该方法通常是以下这些方法之一：</p><ol><li>doGet，如果servlet支持HTTP GET请求</li><li>doPost，用于HTTP POST请求</li><li>doPut， 用于HTTP PUT请求</li><li>doDelete，用于HTTP DELETE请求</li></ol><h3 id="_6-2-servlet两种创建方式" tabindex="-1"><a class="header-anchor" href="#_6-2-servlet两种创建方式" aria-hidden="true">#</a> 6.2 Servlet两种创建方式</h3><h4 id="_6-2-1-实现接口servlet" tabindex="-1"><a class="header-anchor" href="#_6-2-1-实现接口servlet" aria-hidden="true">#</a> 6.2.1 实现接口Servlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet创建的第一种方式：实现接口Servlet
 * */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet2</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span><span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> arg0<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;welcome use servlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该方式比较麻烦，需要实现接口中所有方法。</p><h4 id="_6-2-2-继承httpservlet" tabindex="-1"><a class="header-anchor" href="#_6-2-2-继承httpservlet" aria-hidden="true">#</a> 6.2.2 继承HttpServlet</h4><p>推荐使用</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class HelloServlet
 * Servlet 的第二种创建方式，继承HttpServlet.也是开发中推荐的
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span><span class="token punctuation">{</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;welcome use servlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
    	<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-2-3-常见错误" tabindex="-1"><a class="header-anchor" href="#_6-2-3-常见错误" aria-hidden="true">#</a> 6.2.3 常见错误</h4><ul><li>HTTP Status 404资源找不到。 <ul><li>第一种情况：地址书写错误。</li><li>第二种情况：地址没有问题，把IDEA项目中out目录删除，然后重新运行。</li></ul></li><li>Serlvet地址配置重复。both mapped to the url--pattern [/helloservlet] which is not permitted。</li><li>Serlvet地址配置错误。比如没有写 /Invalid [helloservlet2] in servlet mapping。</li></ul><h3 id="_6-3-servlet两种配置方式" tabindex="-1"><a class="header-anchor" href="#_6-3-servlet两种配置方式" aria-hidden="true">#</a> 6.3 Servlet两种配置方式</h3><h4 id="_6-3-1-使用web-xml" tabindex="-1"><a class="header-anchor" href="#_6-3-1-使用web-xml" aria-hidden="true">#</a> 6.3.1 使用web.xml</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
		 <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
		 <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Web_Day11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!--Servlet配置--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 名称 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Servlet的全称类名 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.qf.web.servlet.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 启动的优先级，数字越小越先起作用 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--映射配置--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--名称--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--资源的匹配规则：精确匹配--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/hello2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file-list</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>welcome-file</span><span class="token punctuation">&gt;</span></span>login.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>welcome-file-list</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-3-2-配置属性" tabindex="-1"><a class="header-anchor" href="#_6-3-2-配置属性" aria-hidden="true">#</a> 6.3.2 配置属性</h4><p><strong>url-pattern定义匹配规则，取值说明：</strong></p><p>精确匹配 /具体的名称 只有url路径是具体的名称的时候才会触发Servlet</p><p>后缀匹配 *.XXX 只要是以xxx结尾的就匹配触发Servlet</p><p>通配符匹配 /* 匹配所有请求，包含服务器的所有资源</p><p>通配符匹配 / 匹配所有请求，包含服务器的所有资源，不包括.jsp</p><p><strong>load-on-startup</strong></p><p>1、元素标记容器是否应该在web应用程序启动的时候就加载这个servlet。</p><p>2、它的值必须是一个整数，表示serv1et被加载的先后顺序。</p><p>3、如果该元素的值为负数或者没有设置，则容器会当Servlet被请求时再加载。</p><p>4、如果值为正整数或者0时，表示容器在应用启动时就加载并初始化这个servlet,值越小，servlet的优先级越高，就越先被加载。值相同时，容器就会自己选择顺序来加载。</p><h4 id="_6-3-3-使用注解" tabindex="-1"><a class="header-anchor" href="#_6-3-3-使用注解" aria-hidden="true">#</a> 6.3.3 使用注解</h4><p>注解形式在Servlet3.0版本后才支持，推荐使用</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
* Servlet implementation class HelloServlet
* 演示Servlet注解式配置
*/</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span>
	
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">getwriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    	<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-4-webservlet" tabindex="-1"><a class="header-anchor" href="#_6-3-4-webservlet" aria-hidden="true">#</a> 6.3.4 @WebServlet</h3><p>注解中的常用属性</p><ul><li>name：Serlvet名字（可选）</li><li>value：配置url路径，可以配置多个</li><li>urlPatterns：配置url路径，和value作用一样，不能同时使用</li><li>loadOnStartup：配置Servlet的创建的时机，如果是0或者正数启动程序时创建，如果是负数，则访问时创建。数值越小优先级越高。</li></ul><h2 id="七、servlet-应用" tabindex="-1"><a class="header-anchor" href="#七、servlet-应用" aria-hidden="true">#</a> 七、Servlet 应用</h2><h3 id="_7-1-request对象" tabindex="-1"><a class="header-anchor" href="#_7-1-request对象" aria-hidden="true">#</a> 7.1 request对象</h3><p>在Servlet中用来处理客户端请求需要用doGet或doPost方法的request对象</p><p><img src="/assets/image-20221130130934704-1eb8ae13.png" alt="image-20221130130934704"></p><h4 id="_7-1-1-get-和-post-区别" tabindex="-1"><a class="header-anchor" href="#_7-1-1-get-和-post-区别" aria-hidden="true">#</a> 7.1.1 get 和 post 区别</h4><p><strong>get请求</strong></p><ul><li>get 提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连</li><li>get 方式明文传递，数据量小，不安全</li><li>效率高，浏览器默认请求方式为GET请求</li><li>对应的Servlet的方法是doGet</li></ul><p><strong>post请求</strong></p><ul><li>post方法是把提交的数据放在HTTP包的Body中</li><li>密文传递数据，数据量大，安全</li><li>效率相对没有GET高</li><li>对应的Servlet的方法是doPost</li></ul><h4 id="_7-1-2-request-主要方法" tabindex="-1"><a class="header-anchor" href="#_7-1-2-request-主要方法" aria-hidden="true">#</a> 7.1.2 request 主要方法</h4><table><thead><tr><th>方法名</th><th>说明</th></tr></thead><tbody><tr><td>String getParameter(String name)</td><td>根据表单组件名称获取提交数据</td></tr><tr><td>void setCharacterEncoding(String charset)</td><td>指定每个请求的编码</td></tr></tbody></table><h4 id="_7-1-3-request-应用" tabindex="-1"><a class="header-anchor" href="#_7-1-3-request-应用" aria-hidden="true">#</a> 7.1.3 request 应用</h4><p><strong>HTML页面</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tit1e</span><span class="token punctuation">&gt;</span></span>欢迎页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tit1e</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎你<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>HelloServlet<span class="token punctuation">&quot;</span></span><span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>姓名：&lt;/1abel&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>年龄：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Servlet代码</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/HelloServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span><span class="token punctuation">{</span>
    
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        
        <span class="token operator">/</span>获取表单提交的姓名
        <span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取年龄</span>
        <span class="token class-name">String</span> age<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//服务端输出打印</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;发来信息：姓名：&quot;</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">&quot;--&gt;年龄：&quot;</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    	<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-1-4-get-请求收参问题" tabindex="-1"><a class="header-anchor" href="#_7-1-4-get-请求收参问题" aria-hidden="true">#</a> 7.1.4 get 请求收参问题</h4><p>产生乱码是因为服务器和客户端沟通的编码不一致造成的，因此解决的办法是：在客户端和服务器之间设置一个统一的编码，之后就按照此编码进行数据的传输和接收</p><h4 id="_7-1-5-get-中文乱码" tabindex="-1"><a class="header-anchor" href="#_7-1-5-get-中文乱码" aria-hidden="true">#</a> 7.1.5 get 中文乱码</h4><p>在Tomcat7及以下版本，客户端以UTF-8的编码传输数据到服务器端，而服务器端的request对象使用的是ISO8859-1这个字符编码来接收数据，服务器和客户端沟通的编码不一致因此才会产生中文乱码的。</p><ul><li>解决办法：在接收到数据后，先获取request对象以S08859-1字符编码接收到的原始数据的字节数组，然后通过字节数组以指定的编码构建字符串，解决乱码问题。</li><li>Tomcata8 的版本中get方式不会出现乱码了，因为服务器对url的编码格式可以进行自动转换。</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class HelloServlet
 * 演示Servlet的GET请求，中文乱码的问题
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/GETServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取表单提交的姓名</span>
        <span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;IS08859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取年龄</span>
        <span class="token class-name">String</span> age <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//服务端输出打印</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;发来信息：姓名：&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;---&gt;年龄：&quot;</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>                   
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-1-6-post-中文乱码" tabindex="-1"><a class="header-anchor" href="#_7-1-6-post-中文乱码" aria-hidden="true">#</a> 7.1.6 post 中文乱码</h4><p>由于客户端是以UTF-8字符编码将表单数据传输到服务器端的，因此服务器也需要设置以UTF-8字符编码进行接收。</p><ul><li>解决方案：使用从ServletRequest接口继承而来的setCharacterEncoding(charset)方法进行统一的编码设置。</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class HelloServlet
 * 演示Serv1let的GET请求，中文乱码的问题
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/GETServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//设置请求参数的编码格式--对GET无效</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取表单提交的信息</span>
        <span class="token class-name">String</span> name<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//服务端输出打印</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;发来信息：&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-response-对象" tabindex="-1"><a class="header-anchor" href="#_7-2-response-对象" aria-hidden="true">#</a> 7.2 response 对象</h3><p>response对象用于响应客户请求并向客户端输出信息。</p><p><img src="/assets/image-20221130132800225-b624beb0.png" alt="image-20221130132800225"></p><h4 id="_7-2-1-response-主要方法" tabindex="-1"><a class="header-anchor" href="#_7-2-1-response-主要方法" aria-hidden="true">#</a> 7.2.1 response:主要方法</h4><table><thead><tr><th>方法名称</th><th>作用</th></tr></thead><tbody><tr><td>setHeader(name, value)</td><td>设置响应信息头</td></tr><tr><td>setContentType(String)</td><td>设置响应文件类型、响应式的编码格式</td></tr><tr><td>setCharacterEncoding(String)</td><td>设置服务端响应内容编码格式</td></tr><tr><td>getWriter()</td><td>获取字符输出流</td></tr></tbody></table><h4 id="_7-2-2-response应用" tabindex="-1"><a class="header-anchor" href="#_7-2-2-response应用" aria-hidden="true">#</a> 7.2.2 response应用</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//获取请求参数代码省略</span>
<span class="token comment">//获取输出流</span>
<span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&lt;title&gt;login&lt;/title&gt;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;Login Success!!!&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// out.print1n(&quot;&lt;h1&gt;登录成功！！&lt;/h1&gt;&quot;):</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果输出内容包含中文，则出现乱码，因为服务器默认采用引S08859-1编码响应内容</li></ul><h4 id="_7-2-3-解决输出中文乱码" tabindex="-1"><a class="header-anchor" href="#_7-2-3-解决输出中文乱码" aria-hidden="true">#</a> 7.2.3 解决输出中文乱码</h4><p><strong>方法一：</strong>（不推荐）</p><ul><li>设置服务器端响应的编码格式</li><li>设置客户端响应内容的头内容的文件类型及编码格式</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">/</span>设置响应编码格式为utf<span class="token operator">-</span><span class="token number">8</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>方法二：</strong>（推荐）</p><ul><li>同时设置服务端的编码格式和客户端响应的文件类型及响应时的编码格式</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7-3-综合案例" tabindex="-1"><a class="header-anchor" href="#_7-3-综合案例" aria-hidden="true">#</a> 7.3 综合案例</h3><ul><li>要求：实现登录功能，展示所有用户功能</li><li>以下仅展示关键代码</li></ul><h4 id="_7-3-1-数据库" tabindex="-1"><a class="header-anchor" href="#_7-3-1-数据库" aria-hidden="true">#</a> 7.3.1 数据库</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> admin<span class="token punctuation">(</span>
	username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	PASSWORD <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	phone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	Address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span>PASSWORD<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>address<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;gav1n&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;12345678901&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;北京市昌平区&#39;</span><span class="token punctuation">)</span>：
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span>PASSWORD<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>address<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;aaron&#39;</span><span class="token punctuation">,</span><span class="token number">123456</span><span class="token string">&#39;,&#39;</span><span class="token number">12345678901</span><span class="token string">&#39;,&#39;</span>北京市昌平区&#39;<span class="token punctuation">)</span>：
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-2-dbutils" tabindex="-1"><a class="header-anchor" href="#_7-3-2-dbutils" aria-hidden="true">#</a> 7.3.2 DBUtils</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>emp<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DbUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DruidDataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">&gt;</span></span> <span class="token constant">THREAD_LOCAL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;/database.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DruidDataSource</span><span class="token punctuation">)</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token constant">THREAD_LOCAL</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token constant">THREAD_LOCAL</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token function">closeAll</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token function">closeAll</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">closeAll</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token constant">THREAD_LOCAL</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-3-admindaoimpl" tabindex="-1"><a class="header-anchor" href="#_7-3-3-admindaoimpl" aria-hidden="true">#</a> 7.3.3 AdminDaoImpl</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">AdminDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">DbUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span></span><span class="token class-name">QueryRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanListHandler</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AdminDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Admin</span> admin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Admin</span> admin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Admin</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Admin</span> admin <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                            <span class="token string">&quot;select * from admin where username=?;&quot;</span><span class="token punctuation">,</span>
                                            <span class="token keyword">new</span> <span class="token class-name">BeanHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Admin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> admin<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> admins <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                   <span class="token string">&quot;select * from admin&quot;</span><span class="token punctuation">,</span>
                                                   <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Admin</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> admins<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-4-adminserviceimpl" tabindex="-1"><a class="header-anchor" href="#_7-3-4-adminserviceimpl" aria-hidden="true">#</a> 7.3.4 AdminServiceImpl</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">AdminDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminDaoImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">DbUtils</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AdminService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AdminDao</span> adminDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Admin</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Admin</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Admin</span> admin <span class="token operator">=</span> adminDao<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>admin<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>admin<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    result <span class="token operator">=</span> admin<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> <span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> admins <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            admins <span class="token operator">=</span> adminDao<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DbUtils</span><span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> admins<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-5-html代码" tabindex="-1"><a class="header-anchor" href="#_7-3-5-html代码" aria-hidden="true">#</a> 7.3.5 HTML代码</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>登录页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        用户名:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        密码:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>登录<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-6-loginservlet" tabindex="-1"><a class="header-anchor" href="#_7-3-6-loginservlet" aria-hidden="true">#</a> 7.3.6 LoginServlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.收参</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.调用业务逻辑</span>
        <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Admin</span> admin <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.处理结果</span>
        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>admin<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//响应给客户端一个结果页面，显示登录成功</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;结果页面&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;登录成功！&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//响应给客户端一个结果页面，显示登录失败！</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;结果页面&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;登录失败！&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-3-7-showalladminservlet" tabindex="-1"><a class="header-anchor" href="#_7-3-7-showalladminservlet" aria-hidden="true">#</a> 7.3.7 ShowAllAdminServlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showall&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowAllAdminServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> adminList <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>adminList<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;显示所有&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;table border=&#39;1&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;username&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;password&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;phone&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;address&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;/tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Admin</span> admin <span class="token operator">:</span> adminList<span class="token punctuation">)</span><span class="token punctuation">{</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;       &lt;td&gt;&quot;</span><span class="token operator">+</span>admin<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&lt;/td&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;   &lt;/tr&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/table&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;meta charset=&#39;UTF-8&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;title&gt;显示所有&lt;/title&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h3&gt;当前没有用户！&lt;/h3&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="八、转发与重定向" tabindex="-1"><a class="header-anchor" href="#八、转发与重定向" aria-hidden="true">#</a> 八、转发与重定向</h2><h3 id="_8-1-现有问题" tabindex="-1"><a class="header-anchor" href="#_8-1-现有问题" aria-hidden="true">#</a> 8.1 现有问题</h3><p>在之前案例中，调用业务逻辑和显示结果页面都在同一个Servlet!里，就会产生设计问题</p><ul><li>不符合单一职能原则、各司其职的思想</li><li>不利于后续的维护</li></ul><p>应该将业务逻辑和显示结果分离开</p><p><img src="/assets/image-20221130141042330-3e5cb2c4.png" alt="image-20221130141042330"></p><h4 id="_8-1-1-业务显示分离" tabindex="-1"><a class="header-anchor" href="#_8-1-1-业务显示分离" aria-hidden="true">#</a> 8.1.1 业务显示分离</h4><p><img src="/assets/image-20221130141123049-4cd9dbf2.png" alt="image-20221130141123049"></p><ul><li>问题：业务逻辑和显示结果分离后，如何跳转到显示结果的Servlet?</li><li>业务逻辑得到的数据结果如何传递给显示结果的Servlet?</li></ul><h3 id="_8-2-转发" tabindex="-1"><a class="header-anchor" href="#_8-2-转发" aria-hidden="true">#</a> 8.2 转发</h3><p>转发的作用在服务器端，将请求发送给服务器上的其他资源，以共同完成一次请求的处理。</p><h4 id="_8-2-1-页面跳转" tabindex="-1"><a class="header-anchor" href="#_8-2-1-页面跳转" aria-hidden="true">#</a> 8.2.1 页面跳转</h4><p>在调用业务逻辑的Servlet中，编写以下代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/URL-pattern&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="/assets/image-20221130141248437-b0033a5f.png" alt="image-20221130141248437"></p><ul><li>使用forward跳转时，是在服务器内部跳转，地址栏不发生变化，属于同一次请求</li></ul><h4 id="_8-2-2-数据传递" tabindex="-1"><a class="header-anchor" href="#_8-2-2-数据传递" aria-hidden="true">#</a> 8.2.2 数据传递</h4><p>forward：表示一次请求，是在服务器内部跳转，可以共享同一次request作用域中的数据</p><ul><li>request作用域：拥有存储数据的空间，作用范围是一次请求有效（一次请求可以经过多次转发） <ul><li>可以将数据存入request后，在一次请求过程中的任何位置进行获取</li><li>可传递任何数据（基本数据类型、对象、数组、集合等）</li></ul></li><li>存数据：<code>request.setAttribute(key, value);</code><ul><li>以键值对形式存储在requestt作用域中。key为String类型，value为Object类型</li></ul></li><li>取数据：<code>request.getAttribute(key);</code><ul><li>通过String类型的key访问Object类型的value</li></ul></li></ul><h4 id="_8-2-3-转发特点" tabindex="-1"><a class="header-anchor" href="#_8-2-3-转发特点" aria-hidden="true">#</a> 8.2.3 转发特点</h4><ul><li>转发是服务器行为</li><li>转发是浏览器只做了一次访问请求</li><li>转发浏览器地址不变</li><li>转发两次跳转之间传输的信息不会丢失，所以可以通过request进行数据的传递。</li><li>转发只能将请求转发给同一个Web应用中的组件</li></ul><h3 id="_8-3-重定向" tabindex="-1"><a class="header-anchor" href="#_8-3-重定向" aria-hidden="true">#</a> 8.3 重定向</h3><p>重定向作用在客户端，客户端将请求发送给服务器后，服务器响应给客户端一个新的请求地址，客户端重新发送新请求。</p><h4 id="_8-3-1-页面跳转" tabindex="-1"><a class="header-anchor" href="#_8-3-1-页面跳转" aria-hidden="true">#</a> 8.3.1 页面跳转</h4><p>在调用业务逻辑的Servlet中，编写以下代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;目标URI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>**URl：**统一资源标识符(Uniform Resource ldentifier)，用来表示服务器中定位一个资源，资源在web项目中的路径(/project/source)</p><p><img src="/assets/image-20221130141844125-0c74dc7d.png" alt="image-20221130141844125"></p><ul><li>使用redirect跳转时，是在客户端跳转，地址栏发生变化，属于多次请求</li></ul><h4 id="_8-3-2-数据传递" tabindex="-1"><a class="header-anchor" href="#_8-3-2-数据传递" aria-hidden="true">#</a> 8.3.2 数据传递</h4><p>sendRedirect跳转时，地址栏改变，代表客户端重新发送的请求。属于两次请求</p><ul><li>response没有作用域，两次request请求中的数据无法共享</li><li>传递数据：通过URI的拼接进行数据传递(&quot;/WebProject/b?username=tom&quot;);</li><li>获取数据：request.getParameter(&quot;username&quot;);</li></ul><h4 id="_8-3-3-重定向特点" tabindex="-1"><a class="header-anchor" href="#_8-3-3-重定向特点" aria-hidden="true">#</a> 8.3.3 重定向特点</h4><ul><li>重定向是客户端行为。</li><li>重定向是浏览器做了至少两次的访问请求。</li><li>重定向浏览器地址改变。</li><li>重定向两次跳转之间传输的信息会丢失(request范围)</li><li>重定向可以指向任何的资源，包括当前应用程序中的其他资源、同一个站点上的其他应用程序中的资源、其他站点的资源。</li></ul><h3 id="_8-4-转发、重定向总结" tabindex="-1"><a class="header-anchor" href="#_8-4-转发、重定向总结" aria-hidden="true">#</a> 8.4 转发、重定向总结</h3><p>当两个Servlet需要传递数据时，选择forward转发。不建议使用sendRedirect进行传递</p><h2 id="九、servlet生命周期" tabindex="-1"><a class="header-anchor" href="#九、servlet生命周期" aria-hidden="true">#</a> 九、Servlet生命周期</h2><h3 id="_9-1-生命周期四个阶段" tabindex="-1"><a class="header-anchor" href="#_9-1-生命周期四个阶段" aria-hidden="true">#</a> 9.1 生命周期四个阶段</h3><h4 id="_9-1-1-实例化" tabindex="-1"><a class="header-anchor" href="#_9-1-1-实例化" aria-hidden="true">#</a> 9.1.1 实例化</h4><p>当用户第一次访问Servlet时，由容器调用Servlet的构造器创建具体的Servlet对象。也可以在容器启动之后立刻创建实例。使用如下代码可以设置Servlet是否在服务器启动时就创建。</p><ul><li>注意：只执行一次</li></ul><h4 id="_9-1-2-初始化" tabindex="-1"><a class="header-anchor" href="#_9-1-2-初始化" aria-hidden="true">#</a> 9.1.2 初始化</h4><p>在初始化阶段，init0方法会被调用。这个方法在javax.servlet.Servlet接口中定义。其中，方法以一个ServletConfig类型的对象作为参数。</p><ul><li>注意：init方法只被执行一次</li></ul><h4 id="_9-1-3-服务" tabindex="-1"><a class="header-anchor" href="#_9-1-3-服务" aria-hidden="true">#</a> 9.1.3 服务</h4><p>当客户端有一个请求时，容器就会将请求ServletRequest与响应ServletResponse对象转给Servlet,以参数的形式传给service方法。</p><ul><li>此方法会执行多次</li></ul><h4 id="_9-1-4-销毁" tabindex="-1"><a class="header-anchor" href="#_9-1-4-销毁" aria-hidden="true">#</a> 9.1.4 销毁</h4><p>当Servlet容器停止或者重新启动都会引起销毁Servlet对象并调用destroy方法。</p><ul><li>destroy方法执行一次</li></ul><h4 id="_9-1-5-servlet执行流程" tabindex="-1"><a class="header-anchor" href="#_9-1-5-servlet执行流程" aria-hidden="true">#</a> 9.1.5 Servlet执行流程</h4><p><img src="/assets/image-20221130142442457-9c9c17ac.png" alt="image-20221130142442457"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Servlet implementation class LifeServlet
 * 演示Servlet的生命周期：
 * 1、实例化
 * 2、init:初始化
 * 3、service:服务
 * 4、destory:销毁
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/lifeservlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LifeServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">LifeServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1、完成了实例化&quot;</span><span class="token punctuation">)</span>：
	<span class="token punctuation">}</span>

    <span class="token annotation punctuation">@0verride</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2、完成了初始化&quot;</span><span class="token punctuation">)</span>：
    <span class="token punctuation">}</span>
	
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3、就绪中&quot;</span><span class="token punctuation">)</span>：
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;Served at:&quot;</span><span class="token punctuation">)</span><span class="token function">append</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print1n</span><span class="token punctuation">(</span><span class="token string">&quot;4、销毁了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十、servlet特性" tabindex="-1"><a class="header-anchor" href="#十、servlet特性" aria-hidden="true">#</a> 十、Servlet特性</h2><h3 id="_10-1-线程安全问题" tabindex="-1"><a class="header-anchor" href="#_10-1-线程安全问题" aria-hidden="true">#</a> 10.1 线程安全问题</h3><p>Servlet在访问之后，会执行实例化操作，创建一个Servlet对象。而我们Tomcat容器可以同时多个线程并发访问同一个Servlet，如果在方法中对成员变量做修改操作，就会有线程安全的问题。</p><h3 id="_10-2-如何保证线程安全" tabindex="-1"><a class="header-anchor" href="#_10-2-如何保证线程安全" aria-hidden="true">#</a> 10.2 如何保证线程安全</h3><ul><li>synchronized <ul><li>将存在线程安全问题的代码放到同步代码块中</li></ul></li><li>实现SingleThreadModel接口 <ul><li>servlet实现SingleThreadModel接口后，每个线程都会创建servlet实例，这样每个客户端请求就不存在共享资源的问题，但是servlet响应客户端请求的效率太低，所以已经淘汰。</li></ul></li><li>尽可能使用局部变量</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">SingleThreadModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SafeServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token keyword">implements</span> <span class="token class-name">SingleThreadModel</span><span class="token punctuation">{</span>
	<span class="token comment">//private String message =&quot;&quot;</span>

    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> message <span class="token operator">=</span><span class="token string">&quot;&quot;</span>
        <span class="token comment">//假设1、接收参数</span>
        <span class="token comment">//2、调用业务逻辑得到登录结果</span>
        message<span class="token operator">=</span><span class="token string">&quot;登录成功&quot;</span>；<span class="token comment">//登录失败！</span>
        <span class="token class-name">PrintWriter</span> printWriter resp<span class="token punctuation">.</span><span class="token function">getwriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span><span class="token punctuation">{</span>
		<span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十一、状态管理" tabindex="-1"><a class="header-anchor" href="#十一、状态管理" aria-hidden="true">#</a> 十一、状态管理</h2><h3 id="_11-1-现有问题" tabindex="-1"><a class="header-anchor" href="#_11-1-现有问题" aria-hidden="true">#</a> 11.1 现有问题</h3><ul><li>HTTP协议是无状态的，不能保存每次提交的信息</li><li>如果用户发来一个新的请求，服务器无法知道它是否与上次的请求有联系。</li><li>对于那些需要多次提交数据才能完成的Wb操作，比如登录来说，就成问题了。</li></ul><h3 id="_11-2-概念" tabindex="-1"><a class="header-anchor" href="#_11-2-概念" aria-hidden="true">#</a> 11.2 概念</h3><p>将浏览器与wb服务器之间多次交互当作一个整体来处理，并且将多次交互所涉及的数据（即状态）保存下来。</p><h3 id="_11-3-状态管理分类" tabindex="-1"><a class="header-anchor" href="#_11-3-状态管理分类" aria-hidden="true">#</a> 11.3 状态管理分类</h3><ul><li>客户端状态管理技术：将状态保存在客户端。代表性的是Cookie技术。</li><li>服务器状态管理技术：将状态保存在服务器端。代表性的是session技术（服务器传递sessionID时需要使用Cookie的方式）</li></ul><h2 id="十二、cookie的使用" tabindex="-1"><a class="header-anchor" href="#十二、cookie的使用" aria-hidden="true">#</a> 十二、Cookie的使用</h2><h3 id="_12-1-什么是cookie" tabindex="-1"><a class="header-anchor" href="#_12-1-什么是cookie" aria-hidden="true">#</a> 12.1 什么是Cookie</h3><ul><li>Cookie是在浏览器访问Web服务器的某个资源时，由Web服务器在HTTP响应消息头中附带传送给浏览器的一小段数据。</li><li>一旦Web浏览器保存了某个Cookie，那么它在以后每次访问该Web服务器时，都应在HTTP请求头中将这个Cookie回传给Web服务器。</li><li>一个Cookie主要由标识该信息的名称(name)和值(value)组成。</li></ul><p><img src="/assets/image-20221130153100567-a4797a2e.png" alt="image-20221130153100567"></p><h3 id="_12-2-创建cookie" tabindex="-1"><a class="header-anchor" href="#_12-2-创建cookie" aria-hidden="true">#</a> 12.2 创建Cookie</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//创建Cookie</span>
<span class="token class-name">Cookie</span> ck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
ck<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/webs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置Cookief的路径</span>
ck<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 内存存储，取值有三种：&gt;0有效期，单位秒；=0浏览器关闭；&lt;B内存存储，默认-1</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>ck<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//添加到response对象中，响应时发送给客户端</span>
<span class="token comment">//注意：有效路径：当前访问资源的上一级目录，不带主机名</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>chrome浏览器查看cookiet信息：chrome:/settings/content/,cookies</li></ul><h3 id="_12-3-获取cookie" tabindex="-1"><a class="header-anchor" href="#_12-3-获取cookie" aria-hidden="true">#</a> 12.3 获取Cookie</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//获取所有的Cookie</span>
<span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span>cks<span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//遍历Cook1e</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> ck<span class="token operator">:</span>cks<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//检索出自己的Cookie</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ck<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token comment">//记录Cooki1e的值</span>
    	code<span class="token operator">=</span>ck<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-4-修改cookie" tabindex="-1"><a class="header-anchor" href="#_12-4-修改cookie" aria-hidden="true">#</a> 12.4 修改Cookie</h3><p>只需要保证Cookie的名和路径一致即可修改</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//修改Cookie</span>
<span class="token class-name">Cookie</span> ck<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
ck<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/webs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置Cookie的路径</span>
ck<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>内存存储，取值有三种：<span class="token operator">&gt;</span><span class="token number">0</span>有效期，单位秒；<span class="token operator">=</span><span class="token number">0</span>失效；<span class="token operator">&lt;</span><span class="token number">8</span>内存存储
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>ck<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//让浏览器添加Cookie</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>注意：如果改变cookiel的name和有效路径会新建cookie,而改变cookie值、有效期会覆盖原有cookie</li></ul><h3 id="_12-5-cookie编码与解码" tabindex="-1"><a class="header-anchor" href="#_12-5-cookie编码与解码" aria-hidden="true">#</a> 12.5 Cookie编码与解码</h3><p>Cookie默认不支持中文，只能包含ASCII字符，所以Cookie需要对Unicode字符进行编码，否则会出现乱码。</p><ul><li>编码可以使用java.net.URLEncoder类的encode(String str, String encoding)方法</li><li>解码使用java.net.URLDecoder类的decode(String str, String encoding)方法</li></ul><h4 id="_12-5-1创建带中文cookie" tabindex="-1"><a class="header-anchor" href="#_12-5-1创建带中文cookie" aria-hidden="true">#</a> 12.5.1创建带中文Cookie</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//使用中文的Cookie, name与value都使用UTF-8编码.</span>
<span class="token class-name">Cookie</span> cookie <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span>
<span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;姓名&quot;</span>，<span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;老邢&quot;</span>，<span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//发送到客户端</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-5-2读取带中文cookie" tabindex="-1"><a class="header-anchor" href="#_12-5-2读取带中文cookie" aria-hidden="true">#</a> 12.5.2读取带中文Cookie</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cc <span class="token operator">:</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> cookieName <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> cookievalue <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookieName <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookieValue <span class="token operator">+</span> <span class="token string">&quot;; &lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cookie已经写入客户端.请刷新页面.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-6-cookiet优点和缺点" tabindex="-1"><a class="header-anchor" href="#_12-6-cookiet优点和缺点" aria-hidden="true">#</a> 12.6 Cookiet优点和缺点</h3><h4 id="_12-6-1优点" tabindex="-1"><a class="header-anchor" href="#_12-6-1优点" aria-hidden="true">#</a> 12.6.1优点</h4><ul><li>可配置到期规则。</li><li>简单性：Cookie是一种基于文本的轻量结构，包含简单的键值对。</li><li>数据持久性：Cookie默认在过期之前是可以一直存在客户端浏览器上的。</li></ul><h4 id="_12-6-2缺点" tabindex="-1"><a class="header-anchor" href="#_12-6-2缺点" aria-hidden="true">#</a> 12.6.2缺点</h4><ul><li>大小受到限制：大多数浏览器对Cookie的大小有4K、8K字节的限制。</li><li>用户配置为禁用：有些用户禁用了浏览器或客户端设备接收Cookie的能力，因此限制了这一功能。</li><li>潜在的安全风险：Cookie可能会被篡改。会对安全性造成潜在风险或者导致依赖于Cookie的应用程序失败。</li></ul><h2 id="十三、session对象" tabindex="-1"><a class="header-anchor" href="#十三、session对象" aria-hidden="true">#</a> 十三、Session对象</h2><h3 id="_13-1-session概述" tabindex="-1"><a class="header-anchor" href="#_13-1-session概述" aria-hidden="true">#</a> 13.1 Session概述</h3><ul><li><p>Session用于记录用户的状态。Session指的是在一段时间内，单个客户端与Web服务器的一连串相关的交互过程。</p></li><li><p>在一个Session中，客户可能会多次请求访问同一个资源，也有可能请求访问各种不同的服务器资源。</p></li></ul><h3 id="_13-2-session原理" tabindex="-1"><a class="header-anchor" href="#_13-2-session原理" aria-hidden="true">#</a> 13.2 Session原理</h3><ul><li>服务器会为每一次会话分配一个Session.对象</li><li>同一个浏览器发起的多次请求，同属于一次会话(Session)</li><li>首次使用到Sessionl时，服务器会自动创建Session,并创建Cookie存储Sessionld发送回客户端</li></ul><p>注意：session是由服务端创建的。</p><h3 id="_13-3-session使用" tabindex="-1"><a class="header-anchor" href="#_13-3-session使用" aria-hidden="true">#</a> 13.3 Session使用</h3><ul><li>Session作用域：拥有存储数据的空间，作用范围是一次会话有效 <ul><li>一次会话是使用同一浏览器发送的多次请求。一旦浏览器关闭，则结束会话</li><li>可以将数据存入Session中，在一次会话的任意位置进行获取</li><li>可传递任何数据（基本数据类型、对象、集合、数组</li></ul></li></ul><h3 id="_13-3-1获取session" tabindex="-1"><a class="header-anchor" href="#_13-3-1获取session" aria-hidden="true">#</a> 13.3.1获取Session</h3><p>session是服务器端自动创建的，通过request对象获取</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//获取Session对象</span>
<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Id:&quot;</span><span class="token operator">+</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//唯-标记，</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-3-2-session保存数据" tabindex="-1"><a class="header-anchor" href="#_13-3-2-session保存数据" aria-hidden="true">#</a> 13.3.2 Session保存数据</h4><p><code>setAttribute(name，Object)</code>; 保存数据到session中</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//以键值对形式存储在session作用域中。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_13-3-3-session获取数据" tabindex="-1"><a class="header-anchor" href="#_13-3-3-session获取数据" aria-hidden="true">#</a> 13.3.3 Session获取数据</h4><p>getAttribute(属性名)；获取session中数据</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>session.getAttribute(&quot;key&quot;)://通过String类型的key访问Object类型的value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_13-3-4-session移除数据" tabindex="-1"><a class="header-anchor" href="#_13-3-4-session移除数据" aria-hidden="true">#</a> 13.3.4 Session移除数据</h4><p>removeAttribute(属性名)；从session中删除数据</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>session.removeAttribute(&quot;key&quot;);//通过键移除session作用域中的值
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_13-4-session与request应用区别" tabindex="-1"><a class="header-anchor" href="#_13-4-session与request应用区别" aria-hidden="true">#</a> 13.4 Session与Request应用区别</h3><ul><li>request是一次请求有效，请求改变，则request改变</li><li>session是一次会话有效，浏览器改变，则session改变</li></ul><h4 id="_13-4-1-session应用" tabindex="-1"><a class="header-anchor" href="#_13-4-1-session应用" aria-hidden="true">#</a> 13.4.1 Session应用</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;SessionServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/ss&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.通过request对象获取Session对象</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.使用session保存数据</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;gavin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/getValue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-4-2-getvalueservlet" tabindex="-1"><a class="header-anchor" href="#_13-4-2-getvalueservlet" aria-hidden="true">#</a> 13.4.2 GetValueServlet</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;GetValueServlet&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/getValue&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetValueServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.通过request获取session对象</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从session中获得了：&quot;</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;从reqeust中获得了：&quot;</span><span class="token operator">+</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-5-session的生命周期" tabindex="-1"><a class="header-anchor" href="#_13-5-session的生命周期" aria-hidden="true">#</a> 13.5 Session的生命周期</h3><ul><li>开始：第一次使用到Session的请求产生，则创建Session</li><li>结束： <ul><li>浏览器关闭，则失效</li><li>Session超时，则失效 <ul><li>session.setMaxlnactivelnterval(seconds); // 设置最大有效时间（单位：秒）】</li></ul></li><li>手工销毁，则失效 <ul><li>session.invalidate( ); //登录退出、注销</li></ul></li></ul></li></ul><h4 id="_13-5-1-session失效" tabindex="-1"><a class="header-anchor" href="#_13-5-1-session失效" aria-hidden="true">#</a> 13.5.1 Session失效</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//设置session最大有效期为一小时</span>
session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//手工销毁</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-4-浏览器禁用cookie" tabindex="-1"><a class="header-anchor" href="#_13-4-浏览器禁用cookie" aria-hidden="true">#</a> 13.4 浏览器禁用Cookie</h3><h4 id="_13-4-1-浏览器禁用cookiel的后果" tabindex="-1"><a class="header-anchor" href="#_13-4-1-浏览器禁用cookiel的后果" aria-hidden="true">#</a> 13.4.1 浏览器禁用Cookiel的后果</h4><p>服务器在默认情况下，会使用Cookie的方式将sessionlD.发送给浏览器，如果用户禁止Cookie,则sessionID不会被浏览器保存，此时，服务器可以使用如URL重写这样的方式来发送sessionID。</p><h4 id="_13-4-2-url重写" tabindex="-1"><a class="header-anchor" href="#_13-4-2-url重写" aria-hidden="true">#</a> 13.4.2 URL重写</h4><p>浏览器在访问服务器上的某个地址时，不再使用原来的那个地址，而是使用经过改写的地址（即在原来的地址后面加上了sessionlD)。</p><h4 id="_13-4-3-实现url重写" tabindex="-1"><a class="header-anchor" href="#_13-4-3-实现url重写" aria-hidden="true">#</a> 13.4.3 实现URL重写</h4><p>response.encodeRedirectURL(String url))生成重写的URL。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//重写URL追加SessionId</span>
<span class="token class-name">String</span> newUrl <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">encodeRedirectURL</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/cs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>newUrl<span class="token punctuation">)</span>
response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>newUr12<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-5-session实战权限验证" tabindex="-1"><a class="header-anchor" href="#_13-5-session实战权限验证" aria-hidden="true">#</a> 13.5 Session实战权限验证</h3><p><img src="/assets/image-20221130160241935-acef0f07.png" alt="image-20221130160241935"></p><h4 id="_13-5-1-创建管理员表" tabindex="-1"><a class="header-anchor" href="#_13-5-1-创建管理员表" aria-hidden="true">#</a> 13.5.1 创建管理员表</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Manager<span class="token punctuation">(</span>
    username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    password <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-5-2-登录页面" tabindex="-1"><a class="header-anchor" href="#_13-5-2-登录页面" aria-hidden="true">#</a> 13.5.2 登录页面</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>管理员登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/loginMgr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        验证码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputVcode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/createCode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>登录<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-5-3-loginmgrcontroller" tabindex="-1"><a class="header-anchor" href="#_13-5-3-loginmgrcontroller" aria-hidden="true">#</a> 13.5.3 LoginMgrController</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ManagerService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">ManagerServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;LoginMgrController&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/loginMgr&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginMgrController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.处理乱码</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.收参</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.调用业务方法</span>
        <span class="token class-name">ManagerService</span> managerService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ManagerServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> mgr <span class="token operator">=</span> managerService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.处理结果，流程跳转</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mgr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//登录成功</span>
            <span class="token comment">//将管理员信息存储在Session里</span>
            <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">,</span> mgr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//跳转  目标、方式</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/showallcontroller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//登录失败</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-5-4-showalladmincontroller" tabindex="-1"><a class="header-anchor" href="#_13-5-4-showalladmincontroller" aria-hidden="true">#</a> 13.5.4 ShowAllAdminController</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">RequestDispatcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showallcontroller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowAllAdminController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
          <span class="token comment">//通过HttpSession完成权限控制</span>
          <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">Manager</span> mgr  <span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>mgr <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//只负责调用业务逻辑功能</span>
            <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> adminList <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//request作用域存储数据</span>
            req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;admins&quot;</span><span class="token punctuation">,</span>adminList<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//通过转发 跳转到显示结果servlet</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/showalljsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
              resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-6-session-实战保存验证码" tabindex="-1"><a class="header-anchor" href="#_13-6-session-实战保存验证码" aria-hidden="true">#</a> 13.6 Session 实战保存验证码</h3><h4 id="_13-6-1-创建验证码" tabindex="-1"><a class="header-anchor" href="#_13-6-1-创建验证码" aria-hidden="true">#</a> 13.6.1 创建验证码</h4><ul><li>导入ValidateCode.jar</li><li>创建生成验证码的Servlet</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>dsna<span class="token punctuation">.</span>util<span class="token punctuation">.</span>images<span class="token punctuation">.</span></span><span class="token class-name">ValidateCode</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;CreateCodeController&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/createCode&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateCodeController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.创建验证码图片</span>
        <span class="token class-name">ValidateCode</span> code <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ValidateCode</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> codes <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;codes&quot;</span><span class="token punctuation">,</span>codes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.验证码图片响应给客户端</span>
        code<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-6-2-登录页面" tabindex="-1"><a class="header-anchor" href="#_13-6-2-登录页面" aria-hidden="true">#</a> 13.6.2 登录页面</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>管理员登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/loginMgr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        验证码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputVcode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WebProject_war_exploded/createCode<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>登录<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-6-3-loginmgrcontroller" tabindex="-1"><a class="header-anchor" href="#_13-6-3-loginmgrcontroller" aria-hidden="true">#</a> 13.6.3 LoginMgrController</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ManagerService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">ManagerServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;LoginMgrController&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/loginMgr&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginMgrController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.处理乱码</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.收参</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> inputVcode <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;inputVcode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> codes <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;codes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inputVcode<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> inputVcode<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>codes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">//3.调用业务方法</span>
            <span class="token class-name">ManagerService</span> managerService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ManagerServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Manager</span> mgr <span class="token operator">=</span> managerService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4.处理结果，流程跳转</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mgr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//登录成功</span>
                <span class="token comment">//将管理员信息存储在Session里</span>
                <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">,</span> mgr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//跳转  目标、方式</span>
                response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/showallcontroller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//登录失败</span>
                response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/WebProject_war_exploded/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十四、servletcontext-对象" tabindex="-1"><a class="header-anchor" href="#十四、servletcontext-对象" aria-hidden="true">#</a> 十四、ServletContext 对象</h2><h3 id="_14-1-servletcontexti概述" tabindex="-1"><a class="header-anchor" href="#_14-1-servletcontexti概述" aria-hidden="true">#</a> 14.1 ServletContexti概述</h3><ul><li>全局对象，也拥有作用域，对应一个Tomcat中的Web应用</li><li>当Web服务器启动时，会为每一个Web应用程序创建一块共享的存储区域(ServletContext)</li><li>ServletContext在web服务器启动时创建，服务器关闭时销毁。</li></ul><h3 id="_14-2-获取servletcontext-对象" tabindex="-1"><a class="header-anchor" href="#_14-2-获取servletcontext-对象" aria-hidden="true">#</a> 14.2 获取ServletContext.对象</h3><ul><li>GenericServlet提供了getServletContext(0方法。（推荐）this.getServletContext(0;</li><li>HttpServletRequest提供了getServletContext()方法。（推荐）</li><li>HttpSession:提供了getServletContext0方法。</li></ul><h3 id="_14-3-servletcontext作用" tabindex="-1"><a class="header-anchor" href="#_14-3-servletcontext作用" aria-hidden="true">#</a> 14.3 ServletContext作用</h3><h4 id="_14-3-1-获取项目真实路径" tabindex="-1"><a class="header-anchor" href="#_14-3-1-获取项目真实路径" aria-hidden="true">#</a> 14.3.1 获取项目真实路径</h4><p>获取当前项目在服务器发布的真实路径</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> realpath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_14-3-2-获取项目上下文路径" tabindex="-1"><a class="header-anchor" href="#_14-3-2-获取项目上下文路径" aria-hidden="true">#</a> 14.3.2 获取项目上下文路径</h4><p>获取当前项目上下文路径（应用程序名称）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printIn</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//上下文路径（应用程序名称）</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-3-3-全局容器" tabindex="-1"><a class="header-anchor" href="#_14-3-3-全局容器" aria-hidden="true">#</a> 14.3.3 全局容器</h4><p>ServletContext拥有作用域，可以存储数据到全局容器中</p><ul><li>存储数据：servletContext.setAttribute(&quot;name&quot;,value);</li><li>获取数据：servletContext.getAttribute(&quot;name&quot;;</li><li>移除数据：servletContext.removeAttribute(&quot;name&quot;:</li></ul><h3 id="_14-4-servletcontext特点" tabindex="-1"><a class="header-anchor" href="#_14-4-servletcontext特点" aria-hidden="true">#</a> 14.4 ServletContext特点</h3><ul><li>唯一性：一个应用对应一个ServletContext。</li><li>生命周期：只要容器不关闭或者应用不卸载，ServletContext就一直存在。</li></ul><h3 id="_14-5-servletcontext-应用场景" tabindex="-1"><a class="header-anchor" href="#_14-5-servletcontext-应用场景" aria-hidden="true">#</a> 14.5 ServletContext/应用场景</h3><p>ServletContext统计当前项目访问次数</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;CounterController&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;/counterController&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CounterController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.获取ServletContext对象</span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.获取计数器</span>
        <span class="token class-name">Integer</span> counter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            counter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            counter<span class="token operator">++</span><span class="token punctuation">;</span>
            servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">,</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;counter:&quot;</span><span class="token operator">+</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-6作用域总结" tabindex="-1"><a class="header-anchor" href="#_14-6作用域总结" aria-hidden="true">#</a> 14.6作用域总结</h3><ul><li>HttpServletRequest:一次请求，请求响应之前有效</li><li>HttpSession:一次会话开始，浏览器不关闭或不超时之前有效</li><li>ServletContext:服务器启动开始，服务器停止之前有效</li></ul><h2 id="十五、过滤器" tabindex="-1"><a class="header-anchor" href="#十五、过滤器" aria-hidden="true">#</a> 十五、过滤器</h2><h3 id="_15-1-现有问题" tabindex="-1"><a class="header-anchor" href="#_15-1-现有问题" aria-hidden="true">#</a> 15.1 现有问题</h3><p>在以往的Servlet中，有没有冗余的代码，多个Servlet都要进行编写。</p><h3 id="_15-2-概念" tabindex="-1"><a class="header-anchor" href="#_15-2-概念" aria-hidden="true">#</a> 15.2 概念</h3><p>过滤器(Filter)是处于客户端与服务器目标资源之间的一道过滤技术。</p><p><img src="/assets/image-20221130162754720-c4416d2c.png" alt="image-20221130162754720"></p><h3 id="_15-3-过滤器作用" tabindex="-1"><a class="header-anchor" href="#_15-3-过滤器作用" aria-hidden="true">#</a> 15.3 过滤器作用</h3><ul><li>执行地位在Servlet,之前，客户端发送请求时，会先经过Filter，再到达目标Servlet中；响应时，会根据执行流程再次反向执行Filter</li><li>可以解决多个Servlet共性代码的冗余问题（例如：乱码处理、登录验证）</li></ul><h3 id="_15-4-编写过滤器" tabindex="-1"><a class="header-anchor" href="#_15-4-编写过滤器" aria-hidden="true">#</a> 15.4 编写过滤器</h3><p>Servlet API中提供了一个Filter接口，开发人员编写一个Java类实现了这个接口即可，这个Java类称之为过滤器(Filter)</p><h4 id="_15-4-1-实现过程" tabindex="-1"><a class="header-anchor" href="#_15-4-1-实现过程" aria-hidden="true">#</a> 15.4.1 实现过程</h4><ul><li>编写Java类实现Filter接口</li><li>在doFilter方法中编写拦截逻辑</li><li>设置拦截路径</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFi1ter</span><span class="token punctuation">(</span><span class="token string">&quot;/myservlet1&quot;</span><span class="token punctuation">)</span><span class="token operator">/</span>过滤路径
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter1</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span><span class="token punctuation">{</span>
    
    <span class="token comment">//初始化过滤器</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;过滤器初始化了......init.,&quot;</span><span class="token operator">+</span>fi1 terConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//执行过滤</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;过滤前.....doF1lter&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printin</span><span class="token punctuation">(</span><span class="token string">&quot;过滤后....doFilter&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>、
    <span class="token punctuation">}</span>
    <span class="token comment">//销毁</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;销毁了，....destroy&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-5-过滤器配置" tabindex="-1"><a class="header-anchor" href="#_15-5-过滤器配置" aria-hidden="true">#</a> 15.5 过滤器配置</h3><h4 id="_15-5-1-注解配置" tabindex="-1"><a class="header-anchor" href="#_15-5-1-注解配置" aria-hidden="true">#</a> 15.5.1 注解配置</h4><p>在自定义的Filter类上使用注解@WebFilter(value=“/过滤目标资源&quot;)</p><h4 id="_15-5-2-xml配置" tabindex="-1"><a class="header-anchor" href="#_15-5-2-xml配置" aria-hidden="true">#</a> 15.5.2 xml配置</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- 过滤器的×m1配置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 名称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>sf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 过滤器类全称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.qf.web.filter.SecondFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 映射路径配置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 名称 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>sf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 过滤的ur1匹配规则和Serv1et类似 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-5-3过滤器路径" tabindex="-1"><a class="header-anchor" href="#_15-5-3过滤器路径" aria-hidden="true">#</a> 15.5.3过滤器路径</h4><p>过滤器的过滤路径通常有三种形式：</p><p>精确过滤匹配，比如/index.jsp /myservlet1</p><p>后缀过滤匹配，比如 *.jsp、*.html、*.jpg</p><p>通配符过滤匹配，/*，表示拦截所有。注意过滤器不能使用/匹配。</p><h3 id="_15-6过滤器链和优先级" tabindex="-1"><a class="header-anchor" href="#_15-6过滤器链和优先级" aria-hidden="true">#</a> 15.6过滤器链和优先级</h3><h4 id="_15-6-1过滤器链" tabindex="-1"><a class="header-anchor" href="#_15-6-1过滤器链" aria-hidden="true">#</a> 15.6.1过滤器链</h4><p>客户端对服务器请求之后，服务器调用Servlet;之前会执行一组过滤器（多个过滤器），那么这组过滤器就称为一条过滤器链。</p><p>每个过滤器实现某个特定的功能，当第一个Filter的doFilter方法被调用时，Web服务器会创建一个代表Filter链的FilterChain对象传递给该方法。在doFilter方法中，开发人员如果调用了FilterChain对象的doFilter方法，则Web服务器会检查FilterChain对象中是否还有filter,如果有，则调用第2个filter,如果没有，则调用目标资源。</p><p><img src="/assets/image-20221130164434270-4d65374a.png" alt="image-20221130164434270"></p><h4 id="_15-6-2过滤器优先级" tabindex="-1"><a class="header-anchor" href="#_15-6-2过滤器优先级" aria-hidden="true">#</a> 15.6.2过滤器优先级</h4><p>在一个Web应用中，可以开发编写多个Filter,这些Filter组合起来称之为一个Filter链。优先级：</p><ul><li>如果为注解的话，是按照类全名称的字符串顺序决定作用顺序</li><li>如果web.xml，按照filter-mapping注册顺序，从上往下</li><li>web.xml配置高于注解方式</li><li>如果注解和web.xml同时配置，会创建多个过滤器对象，造成过滤多次。</li></ul><h3 id="_15-7过滤器典型应用" tabindex="-1"><a class="header-anchor" href="#_15-7过滤器典型应用" aria-hidden="true">#</a> 15.7过滤器典型应用</h3><h4 id="_15-7-1过滤器解决编码" tabindex="-1"><a class="header-anchor" href="#_15-7-1过滤器解决编码" aria-hidden="true">#</a> 15.7.1过滤器解决编码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token string">&quot;/*&quot;</span>）
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EncodingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
	
    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span><span class="token class-name">ServletException</span><span class="token punctuation">{</span>
        <span class="token comment">//统一处理请求和响应的乱码</span>
        servletRequest<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        servletResponse<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-7-2-权限验证" tabindex="-1"><a class="header-anchor" href="#_15-7-2-权限验证" aria-hidden="true">#</a> 15.7.2 权限验证</h4><p><strong>CheckFilter</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showallcontroller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token comment">//权限验证   验证管理员是否登录！</span>
        <span class="token comment">//向下转型  拆箱</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>servletRequest<span class="token punctuation">;</span>
        <span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span>servletResponse<span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> mgr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Manager</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;mgr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>mgr<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//登录过！</span>
            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;/loginMgr.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ShowAllAdminController</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Admin</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Manager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">AdminService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>servletProject<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">AdminServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">RequestDispatcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/showallcontroller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowAllAdminController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//只负责调用业务逻辑功能</span>
        <span class="token class-name">AdminService</span> adminService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdminServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Admin</span><span class="token punctuation">&gt;</span></span> adminList <span class="token operator">=</span> adminService<span class="token punctuation">.</span><span class="token function">showAllAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//request作用域存储数据</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;admins&quot;</span><span class="token punctuation">,</span>adminList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过转发 跳转到显示结果servlet</span>
        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/showalljsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="十六、监听器" tabindex="-1"><a class="header-anchor" href="#十六、监听器" aria-hidden="true">#</a> 十六、监听器</h2><p>Listener 用于监听 Java web程序中的事件，例如创建、修改、删除Session、request、context等，并触发响应的事件。</p><p>Listener 对应观察者模式，事件发生的时候会自动触发该事件对应的Listeer。 Listener 主要用于对 Session、request、context 进行监控。servlet2.5 ~ 5.0规范中共有 8 种Listener 。</p><p>不同功能的Listener 需要实现不同的 Listener 接口，一个Listener也可以实现多个接口，这样就可以多种功能的监听器一起工作。</p><p>8种监听器可以分为三类：</p><ul><li><p>监听 Session、request、context 的创建于销毁，分别为</p><ul><li>HttpSessionLister</li><li>ServletContextListener</li><li>ServletRequestListener</li></ul></li><li><p>监听对象属性变化，分别为：</p><ul><li>HttpSessionAttributeLister</li><li>ServletContextAttributeListener</li><li>ServletRequestAttributeListener</li></ul></li><li><p>监听Session 内的对象，</p><ul><li>HttpSessionBindingListener</li><li>HttpSessionActivationListener。</li></ul><p>与上面六类不同，这两类 Listener 监听的是Session 内的对象，而非 Session 本身，不需要在 web.xml中配置。</p></li></ul><blockquote><p>在servelt2.5版本之前，需要通过web.xml进行配置。listener配置通常放在servlet前面</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--监听器 --&gt;</span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>servlet.listener.MyListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在servlet3.0版本后，直接使用@WebListener注解即可</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@WebListener</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span> <span class="token punctuation">{</span>  
  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>  
  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>     
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="_16-1-httpsessionlister" tabindex="-1"><a class="header-anchor" href="#_16-1-httpsessionlister" aria-hidden="true">#</a> 16.1 HttpSessionLister</h3><h3 id="_16-2-servletcontextlistener" tabindex="-1"><a class="header-anchor" href="#_16-2-servletcontextlistener" aria-hidden="true">#</a> 16.2 ServletContextListener</h3><h3 id="_16-3-servletrequestlistener" tabindex="-1"><a class="header-anchor" href="#_16-3-servletrequestlistener" aria-hidden="true">#</a> 16.3 ServletRequestListener</h3><h3 id="_16-4-httpsessionattributelister" tabindex="-1"><a class="header-anchor" href="#_16-4-httpsessionattributelister" aria-hidden="true">#</a> 16.4 HttpSessionAttributeLister</h3><h3 id="_16-5-servletcontextattributelistener" tabindex="-1"><a class="header-anchor" href="#_16-5-servletcontextattributelistener" aria-hidden="true">#</a> 16.5 ServletContextAttributeListener</h3><h3 id="_16-6-servletrequestattributelistener" tabindex="-1"><a class="header-anchor" href="#_16-6-servletrequestattributelistener" aria-hidden="true">#</a> 16.6 ServletRequestAttributeListener</h3></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">上次编辑于: </span><!----></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 895252461@qq.com">xuliang</span>,<!--]--><!--[--><span class="contributor" title="email: 895252461@qq.com">诗人都藏在水底</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/java/java-base/java-time.html" class="nav-link prev" aria-label="Java 时间操作"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->Java 时间操作</div></a><a href="/java/java-base/java-time.html" class="nav-link next" aria-label="Java 时间操作"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">Java 时间操作<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-0de2ad7c.js" defer></script>
  </body>
</html>
