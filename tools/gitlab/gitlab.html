<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>Gitlab 自动发布流程构建 | -_- !</title><meta name="description" content="good night !">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-f4247c06.css" as="style"><link rel="stylesheet" href="/assets/style-f4247c06.css">
    <link rel="modulepreload" href="/assets/app-e53dd85b.js"><link rel="modulepreload" href="/assets/gitlab.html-db755972.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/gitlab.html-87bef139.js"><link rel="prefetch" href="/assets/index.html-130ecd90.js" as="script"><link rel="prefetch" href="/assets/database-overview.html-03717758.js" as="script"><link rel="prefetch" href="/assets/new-concept-2.html-18a7bc7f.js" as="script"><link rel="prefetch" href="/assets/java-overview.html-49f1be9c.js" as="script"><link rel="prefetch" href="/assets/middleware-overview.html-be4fdd51.js" as="script"><link rel="prefetch" href="/assets/quality-overview.html-a8e9bda4.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-overview.html-eb7abca7.js" as="script"><link rel="prefetch" href="/assets/gitbook.html-913885f5.js" as="script"><link rel="prefetch" href="/assets/tools-overview.html-cf0e5bf6.js" as="script"><link rel="prefetch" href="/assets/mongo.html-2ab52e79.js" as="script"><link rel="prefetch" href="/assets/mysql-advance.html-b13e5f8a.js" as="script"><link rel="prefetch" href="/assets/mysql-apply.html-a6b2d1c2.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-3cf280af.js" as="script"><link rel="prefetch" href="/assets/mysql-devops.html-f2c73032.js" as="script"><link rel="prefetch" href="/assets/redis-action.html-a3045ac9.js" as="script"><link rel="prefetch" href="/assets/redis-base.html-65a1be1c.js" as="script"><link rel="prefetch" href="/assets/redis-cluster.html-dd5a3b3e.js" as="script"><link rel="prefetch" href="/assets/redis-overview.html-4a3dba49.js" as="script"><link rel="prefetch" href="/assets/java-annotation.html-ef20db56.js" as="script"><link rel="prefetch" href="/assets/java-base.html-ed910b21.js" as="script"><link rel="prefetch" href="/assets/java-enum.html-afe8aeb1.js" as="script"><link rel="prefetch" href="/assets/java-reflect.html-0178e6e8.js" as="script"><link rel="prefetch" href="/assets/java-regex.html-ea5302f5.js" as="script"><link rel="prefetch" href="/assets/java-sql.html-f3768bbb.js" as="script"><link rel="prefetch" href="/assets/java-time.html-2c855f9e.js" as="script"><link rel="prefetch" href="/assets/java-version-feature.html-0514c3a5.js" as="script"><link rel="prefetch" href="/assets/java-collection-list.html-fbfca1ef.js" as="script"><link rel="prefetch" href="/assets/java-collection-map.html-9a0aa23c.js" as="script"><link rel="prefetch" href="/assets/heima-concurrent-base.html-764658bc.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-base.html-682c705d.js" as="script"><link rel="prefetch" href="/assets/Java-concurrent-container.html-85e99b58.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-interview.html-bbc0a621.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-lock.html-41f5cb73.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-pool.html-05c10061.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-tools.html-01a740a1.js" as="script"><link rel="prefetch" href="/assets/java-10-feature.html-6dcd5b4e.js" as="script"><link rel="prefetch" href="/assets/java-11-feature.html-5d58151d.js" as="script"><link rel="prefetch" href="/assets/java-8-feature.html-2c2da288.js" as="script"><link rel="prefetch" href="/assets/java-9-feature.html-3cb28b52.js" as="script"><link rel="prefetch" href="/assets/java-feature-overview.html-f1341f95.js" as="script"><link rel="prefetch" href="/assets/java-bio.html-ee55c8f8.js" as="script"><link rel="prefetch" href="/assets/java-io-bio.html-db0d1cd8.js" as="script"><link rel="prefetch" href="/assets/java-io-summary.html-e53cf6ac.js" as="script"><link rel="prefetch" href="/assets/java-io.html-7f9ff9da.js" as="script"><link rel="prefetch" href="/assets/java-nio-1.html-283749cb.js" as="script"><link rel="prefetch" href="/assets/java-nio-10.html-50c8e8a4.js" as="script"><link rel="prefetch" href="/assets/java-nio-11.html-4ff4fbbe.js" as="script"><link rel="prefetch" href="/assets/java-nio-12.html-dc1f9f8f.js" as="script"><link rel="prefetch" href="/assets/java-nio-2.html-9d267af1.js" as="script"><link rel="prefetch" href="/assets/java-nio-3.html-93fc7a32.js" as="script"><link rel="prefetch" href="/assets/java-nio-4.html-edaf650f.js" as="script"><link rel="prefetch" href="/assets/java-nio-5.html-6bcdc4e2.js" as="script"><link rel="prefetch" href="/assets/java-nio-6.html-80630afd.js" as="script"><link rel="prefetch" href="/assets/java-nio-7.html-28974449.js" as="script"><link rel="prefetch" href="/assets/java-nio-8.html-3d38e580.js" as="script"><link rel="prefetch" href="/assets/java-nio-9.html-59d13bc1.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-1.html-9aac7765.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-2.html-a88fe674.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-3.html-c311d41d.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-4.html-4ecfbf8f.js" as="script"><link rel="prefetch" href="/assets/java-memory-model.html-7958112b.js" as="script"><link rel="prefetch" href="/assets/jvm-class-file-structure.html-c097e686.js" as="script"><link rel="prefetch" href="/assets/jvm-class-loader.html-d0382e33.js" as="script"><link rel="prefetch" href="/assets/jvm-garbage-collection.html-62d8088a.js" as="script"><link rel="prefetch" href="/assets/jvm-memory-structure.html-e31bda30.js" as="script"><link rel="prefetch" href="/assets/JVM概览.html-eda595c7.js" as="script"><link rel="prefetch" href="/assets/JVM调优.html-d0f59301.js" as="script"><link rel="prefetch" href="/assets/java-servlet.html-654d0068.js" as="script"><link rel="prefetch" href="/assets/HikariCP-base.html-ec5c9222.js" as="script"><link rel="prefetch" href="/assets/HikariCP-source.html-71542b59.js" as="script"><link rel="prefetch" href="/assets/jackson-overview.html-15f61ae4.js" as="script"><link rel="prefetch" href="/assets/kafka-broker.html-f3939976.js" as="script"><link rel="prefetch" href="/assets/kafka-consumer.html-f5b2d049.js" as="script"><link rel="prefetch" href="/assets/kafka-old.html-18104567.js" as="script"><link rel="prefetch" href="/assets/kafka-overview.html-0029d53e.js" as="script"><link rel="prefetch" href="/assets/kafka-producer.html-15a163c1.js" as="script"><link rel="prefetch" href="/assets/spring-kafka.html-bc75ec45.js" as="script"><link rel="prefetch" href="/assets/log-framework.html-1135605f.js" as="script"><link rel="prefetch" href="/assets/1.Hello World.html-44c17b24.js" as="script"><link rel="prefetch" href="/assets/2.Global Config.html-c6cf8642.js" as="script"><link rel="prefetch" href="/assets/mybatis-plus.html-47dc6415.js" as="script"><link rel="prefetch" href="/assets/index.html-91838e99.js" as="script"><link rel="prefetch" href="/assets/1.netty-nio.html-30613146.js" as="script"><link rel="prefetch" href="/assets/netty-junior-01.html-2f5f8a5d.js" as="script"><link rel="prefetch" href="/assets/netty-junior-02.html-4d8b6117.js" as="script"><link rel="prefetch" href="/assets/netty-junior-03.html-e44fba86.js" as="script"><link rel="prefetch" href="/assets/netty-junior-04.html-8247d994.js" as="script"><link rel="prefetch" href="/assets/nginx.html-482342f3.js" as="script"><link rel="prefetch" href="/assets/sharding-sphere.html-5419590f.js" as="script"><link rel="prefetch" href="/assets/shiro-overview.html-e42cf658.js" as="script"><link rel="prefetch" href="/assets/xxl-job.html-134d207a.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-63270084.js" as="script"><link rel="prefetch" href="/assets/data-structure-dynamic.html-4f7b0965.js" as="script"><link rel="prefetch" href="/assets/data-structure-list.html-a268df29.js" as="script"><link rel="prefetch" href="/assets/data-structure-overview.html-85d0b05a.js" as="script"><link rel="prefetch" href="/assets/data-structure-tree.html-1d1a3420.js" as="script"><link rel="prefetch" href="/assets/design-adapter.html-3e892dc7.js" as="script"><link rel="prefetch" href="/assets/design-bridge.html-91b363b8.js" as="script"><link rel="prefetch" href="/assets/design-builder.html-6fd2408c.js" as="script"><link rel="prefetch" href="/assets/design-chain.html-73c4f586.js" as="script"><link rel="prefetch" href="/assets/design-command.html-d6dfccee.js" as="script"><link rel="prefetch" href="/assets/design-composite.html-057a7bcf.js" as="script"><link rel="prefetch" href="/assets/design-decorator.html-1955d9ac.js" as="script"><link rel="prefetch" href="/assets/design-facade.html-c34c2259.js" as="script"><link rel="prefetch" href="/assets/design-factory.html-89999af1.js" as="script"><link rel="prefetch" href="/assets/design-flyweight.html-f4f2afe1.js" as="script"><link rel="prefetch" href="/assets/design-interpreter.html-982ac126.js" as="script"><link rel="prefetch" href="/assets/design-iterator.html-59b9d18b.js" as="script"><link rel="prefetch" href="/assets/design-mediator.html-a73e3179.js" as="script"><link rel="prefetch" href="/assets/design-memento.html-495efbd1.js" as="script"><link rel="prefetch" href="/assets/design-observer.html-fbadf9f5.js" as="script"><link rel="prefetch" href="/assets/design-overview.html-fb49535c.js" as="script"><link rel="prefetch" href="/assets/design-prototype.html-5e661e49.js" as="script"><link rel="prefetch" href="/assets/design-proxy.html-69ed90aa.js" as="script"><link rel="prefetch" href="/assets/design-singleton.html-a594ad7a.js" as="script"><link rel="prefetch" href="/assets/design-state.html-b91f3529.js" as="script"><link rel="prefetch" href="/assets/design-strategy.html-586d3ac2.js" as="script"><link rel="prefetch" href="/assets/design-template.html-12aa47cf.js" as="script"><link rel="prefetch" href="/assets/design-visitor.html-51d45c95.js" as="script"><link rel="prefetch" href="/assets/docker.html-2f412609.js" as="script"><link rel="prefetch" href="/assets/滑动窗口.html-2903c1b6.js" as="script"><link rel="prefetch" href="/assets/linux-command.html-db80ac58.js" as="script"><link rel="prefetch" href="/assets/linux-core.html-3f065eb0.js" as="script"><link rel="prefetch" href="/assets/linux-overview.html-7f61946a.js" as="script"><link rel="prefetch" href="/assets/encoding.html-3b631fc3.js" as="script"><link rel="prefetch" href="/assets/encryption-algorithm.html-bf387256.js" as="script"><link rel="prefetch" href="/assets/network.html-279991aa.js" as="script"><link rel="prefetch" href="/assets/temp.html-733f02e6.js" as="script"><link rel="prefetch" href="/assets/spring-batch.html-7466d243.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-a46b20f9.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-d4e7a5e5.js" as="script"><link rel="prefetch" href="/assets/spring-framework-overview.html-49552513.js" as="script"><link rel="prefetch" href="/assets/spring-boot-condition.html-f38f1a16.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-commons.html-b2df0b2e.js" as="script"><link rel="prefetch" href="/assets/spring-source-overview.html-3ac2c8f4.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-gateway.html-79d8ca10.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-182fff59.js" as="script"><link rel="prefetch" href="/assets/cloud-openfeign-action.html-6173210d.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-9dd99fbf.js" as="script"><link rel="prefetch" href="/assets/nacos-client-discovery.html-43257632.js" as="script"><link rel="prefetch" href="/assets/nacos-naming-source-service-register.html-f2d19ed3.js" as="script"><link rel="prefetch" href="/assets/nacos-overview.html-d85018d2.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-f7479565.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-f62e5a6b.js" as="script"><link rel="prefetch" href="/assets/git.html-476f511a.js" as="script"><link rel="prefetch" href="/assets/sentinel-source.html-e706b7a6.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-sentinel.html-031a7566.js" as="script"><link rel="prefetch" href="/assets/junit4.html-7674a247.js" as="script"><link rel="prefetch" href="/assets/junit5.html-5d65839e.js" as="script"><link rel="prefetch" href="/assets/maven.html-be6f6316.js" as="script"><link rel="prefetch" href="/assets/reactor.html-b7f3a608.js" as="script"><link rel="prefetch" href="/assets/1.tcp-id-model.html-763c065d.js" as="script"><link rel="prefetch" href="/assets/2.what_happen_url.html-ed893ab5.js" as="script"><link rel="prefetch" href="/assets/3.how_os_deal_network_package.html-003c9378.js" as="script"><link rel="prefetch" href="/assets/1.http_interview.html-81e5ff34.js" as="script"><link rel="prefetch" href="/assets/2.http_optimize.html-c31dc84d.js" as="script"><link rel="prefetch" href="/assets/3_https_rsa.html-d8314292.js" as="script"><link rel="prefetch" href="/assets/4_https_ecdhe.html-5333ed6a.js" as="script"><link rel="prefetch" href="/assets/5_https_optimize.html-1b5cb67c.js" as="script"><link rel="prefetch" href="/assets/6_http2.html-f5c4545f.js" as="script"><link rel="prefetch" href="/assets/7_http3.html-22194a12.js" as="script"><link rel="prefetch" href="/assets/1_tcp_interview.html-80022c5b.js" as="script"><link rel="prefetch" href="/assets/2_tcp_feature.html-a38fb885.js" as="script"><link rel="prefetch" href="/assets/3_tcp_tcpdump.html-7fa54232.js" as="script"><link rel="prefetch" href="/assets/1_ip_base.html-0a16f0d2.js" as="script"><link rel="prefetch" href="/assets/2_ping.html-31b5dbb5.js" as="script"><link rel="prefetch" href="/assets/3_ping_lo.html-4c54a1d5.js" as="script"><link rel="prefetch" href="/assets/1.how-cpu-run.html-230d707d.js" as="script"><link rel="prefetch" href="/assets/2.storage.html-189910cd.js" as="script"><link rel="prefetch" href="/assets/3.how-make-cpu-run-faster.html-4051d2c2.js" as="script"><link rel="prefetch" href="/assets/4.cpu-mesi.html-07cf201e.js" as="script"><link rel="prefetch" href="/assets/5.how-cup-deal-task.html-0e3ee3df.js" as="script"><link rel="prefetch" href="/assets/6.soft-interrupt.html-1bea4976.js" as="script"><link rel="prefetch" href="/assets/7.float.html-92f8ff81.js" as="script"><link rel="prefetch" href="/assets/linux-vs-windows.html-d0be38b1.js" as="script"><link rel="prefetch" href="/assets/1.vmem.html-b282b546.js" as="script"><link rel="prefetch" href="/assets/2.malloc.html-350861f0.js" as="script"><link rel="prefetch" href="/assets/3.mem-reclaim.html-ee770ad0.js" as="script"><link rel="prefetch" href="/assets/4.alloc-mem.html-541cad7b.js" as="script"><link rel="prefetch" href="/assets/5.cache-lru.html-6e272aa2.js" as="script"><link rel="prefetch" href="/assets/6.linux-mem.html-7d761356.js" as="script"><link rel="prefetch" href="/assets/7.linux-mem-2.html-25dc77c0.js" as="script"><link rel="prefetch" href="/assets/spring-collection-annotation.html-7395ab82.js" as="script"><link rel="prefetch" href="/assets/application-context.html-8ef65b1e.js" as="script"><link rel="prefetch" href="/assets/bean-factory-post-processor.html-a2e97494.js" as="script"><link rel="prefetch" href="/assets/bean-factory.html-982a8ae7.js" as="script"><link rel="prefetch" href="/assets/bean-post-processor.html-a79c4714.js" as="script"><link rel="prefetch" href="/assets/i18n-and-event.html-bad25ca9.js" as="script"><link rel="prefetch" href="/assets/package-scan.html-3652f543.js" as="script"><link rel="prefetch" href="/assets/spring-bean-create.html-a1f3b825.js" as="script"><link rel="prefetch" href="/assets/starting-finished.html-20e89aec.js" as="script"><link rel="prefetch" href="/assets/starting-overview.html-9a415d8c.js" as="script"><link rel="prefetch" href="/assets/starting-prepare.html-f22dce60.js" as="script"><link rel="prefetch" href="/assets/starting-summary.html-f0b9950a.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-init.html-7095a9cc.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-listener.html-8020b96c.js" as="script"><link rel="prefetch" href="/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/assets/index.html-79ea5b2c.js" as="script"><link rel="prefetch" href="/assets/index.html-c2745466.js" as="script"><link rel="prefetch" href="/assets/index.html-e7a2b372.js" as="script"><link rel="prefetch" href="/assets/index.html-c7a0896e.js" as="script"><link rel="prefetch" href="/assets/index.html-44e4fbd1.js" as="script"><link rel="prefetch" href="/assets/index.html-deb73f95.js" as="script"><link rel="prefetch" href="/assets/index.html-9923d923.js" as="script"><link rel="prefetch" href="/assets/index.html-f8852d02.js" as="script"><link rel="prefetch" href="/assets/index.html-ebc6e775.js" as="script"><link rel="prefetch" href="/assets/index.html-5391a96f.js" as="script"><link rel="prefetch" href="/assets/index.html-7f9a590b.js" as="script"><link rel="prefetch" href="/assets/index.html-bdfce464.js" as="script"><link rel="prefetch" href="/assets/index.html-7bc2e619.js" as="script"><link rel="prefetch" href="/assets/index.html-d28f4614.js" as="script"><link rel="prefetch" href="/assets/index.html-19a53cb3.js" as="script"><link rel="prefetch" href="/assets/index.html-2dbf58c9.js" as="script"><link rel="prefetch" href="/assets/index.html-5135c839.js" as="script"><link rel="prefetch" href="/assets/index.html-ceb8d736.js" as="script"><link rel="prefetch" href="/assets/index.html-e7623640.js" as="script"><link rel="prefetch" href="/assets/index.html-09445423.js" as="script"><link rel="prefetch" href="/assets/index.html-4228b788.js" as="script"><link rel="prefetch" href="/assets/index.html-b2987ab3.js" as="script"><link rel="prefetch" href="/assets/index.html-ae4432a1.js" as="script"><link rel="prefetch" href="/assets/index.html-db047aee.js" as="script"><link rel="prefetch" href="/assets/index.html-36ab6168.js" as="script"><link rel="prefetch" href="/assets/index.html-0bee4d7c.js" as="script"><link rel="prefetch" href="/assets/index.html-844edecf.js" as="script"><link rel="prefetch" href="/assets/index.html-6afc1b6b.js" as="script"><link rel="prefetch" href="/assets/index.html-e48a03aa.js" as="script"><link rel="prefetch" href="/assets/index.html-1bcb9a21.js" as="script"><link rel="prefetch" href="/assets/index.html-d2431a2d.js" as="script"><link rel="prefetch" href="/assets/index.html-6bad5551.js" as="script"><link rel="prefetch" href="/assets/index.html-8196e289.js" as="script"><link rel="prefetch" href="/assets/index.html-b674839b.js" as="script"><link rel="prefetch" href="/assets/index.html-a2aeccdb.js" as="script"><link rel="prefetch" href="/assets/index.html-915f74ea.js" as="script"><link rel="prefetch" href="/assets/index.html-83711a9e.js" as="script"><link rel="prefetch" href="/assets/index.html-9df5b5ad.js" as="script"><link rel="prefetch" href="/assets/index.html-10287dda.js" as="script"><link rel="prefetch" href="/assets/index.html-63a7add0.js" as="script"><link rel="prefetch" href="/assets/index.html-c84f755d.js" as="script"><link rel="prefetch" href="/assets/index.html-57c02b1b.js" as="script"><link rel="prefetch" href="/assets/index.html-2e53f4cf.js" as="script"><link rel="prefetch" href="/assets/index.html-df942fbe.js" as="script"><link rel="prefetch" href="/assets/index.html-aa4a854c.js" as="script"><link rel="prefetch" href="/assets/index.html-420a9f57.js" as="script"><link rel="prefetch" href="/assets/index.html-27efb3f0.js" as="script"><link rel="prefetch" href="/assets/index.html-ca596762.js" as="script"><link rel="prefetch" href="/assets/index.html-9ba7568f.js" as="script"><link rel="prefetch" href="/assets/index.html-385adf3b.js" as="script"><link rel="prefetch" href="/assets/index.html-95b73732.js" as="script"><link rel="prefetch" href="/assets/index.html-74bd633c.js" as="script"><link rel="prefetch" href="/assets/index.html-b480d660.js" as="script"><link rel="prefetch" href="/assets/index.html-9b56ea57.js" as="script"><link rel="prefetch" href="/assets/index.html-2cc6561e.js" as="script"><link rel="prefetch" href="/assets/index.html-5e502638.js" as="script"><link rel="prefetch" href="/assets/index.html-2cbc0496.js" as="script"><link rel="prefetch" href="/assets/index.html-60de7f02.js" as="script"><link rel="prefetch" href="/assets/index.html-c6491f7f.js" as="script"><link rel="prefetch" href="/assets/index.html-cd02df7a.js" as="script"><link rel="prefetch" href="/assets/index.html-7cb87159.js" as="script"><link rel="prefetch" href="/assets/index.html-3454e09f.js" as="script"><link rel="prefetch" href="/assets/index.html-91025ccb.js" as="script"><link rel="prefetch" href="/assets/index.html-5477af0e.js" as="script"><link rel="prefetch" href="/assets/index.html-0a65ea49.js" as="script"><link rel="prefetch" href="/assets/index.html-88930a72.js" as="script"><link rel="prefetch" href="/assets/index.html-19de02d9.js" as="script"><link rel="prefetch" href="/assets/index.html-2e547c56.js" as="script"><link rel="prefetch" href="/assets/index.html-71fc6e23.js" as="script"><link rel="prefetch" href="/assets/index.html-b8bdf50b.js" as="script"><link rel="prefetch" href="/assets/index.html-982f8e31.js" as="script"><link rel="prefetch" href="/assets/index.html-4fe1b55c.js" as="script"><link rel="prefetch" href="/assets/index.html-a680cb33.js" as="script"><link rel="prefetch" href="/assets/index.html-148fdd8d.js" as="script"><link rel="prefetch" href="/assets/index.html-e50ac7ec.js" as="script"><link rel="prefetch" href="/assets/index.html-e31220f1.js" as="script"><link rel="prefetch" href="/assets/index.html-9547815a.js" as="script"><link rel="prefetch" href="/assets/database-overview.html-bf5a741e.js" as="script"><link rel="prefetch" href="/assets/new-concept-2.html-6f3b2b25.js" as="script"><link rel="prefetch" href="/assets/java-overview.html-067f7926.js" as="script"><link rel="prefetch" href="/assets/middleware-overview.html-15aa65af.js" as="script"><link rel="prefetch" href="/assets/quality-overview.html-dab125f3.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-overview.html-046b29af.js" as="script"><link rel="prefetch" href="/assets/gitbook.html-74e1e46c.js" as="script"><link rel="prefetch" href="/assets/tools-overview.html-88f73a44.js" as="script"><link rel="prefetch" href="/assets/mongo.html-f45aa07b.js" as="script"><link rel="prefetch" href="/assets/mysql-advance.html-d4781d95.js" as="script"><link rel="prefetch" href="/assets/mysql-apply.html-f53931bd.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-ddc120b1.js" as="script"><link rel="prefetch" href="/assets/mysql-devops.html-34ca0aca.js" as="script"><link rel="prefetch" href="/assets/redis-action.html-e6135234.js" as="script"><link rel="prefetch" href="/assets/redis-base.html-282cc863.js" as="script"><link rel="prefetch" href="/assets/redis-cluster.html-ee22e43e.js" as="script"><link rel="prefetch" href="/assets/redis-overview.html-a0e44f9b.js" as="script"><link rel="prefetch" href="/assets/java-annotation.html-4b8ffbdf.js" as="script"><link rel="prefetch" href="/assets/java-base.html-9e2fa80c.js" as="script"><link rel="prefetch" href="/assets/java-enum.html-e293d98f.js" as="script"><link rel="prefetch" href="/assets/java-reflect.html-f55632a0.js" as="script"><link rel="prefetch" href="/assets/java-regex.html-242eeb4d.js" as="script"><link rel="prefetch" href="/assets/java-sql.html-63152732.js" as="script"><link rel="prefetch" href="/assets/java-time.html-f1e232b1.js" as="script"><link rel="prefetch" href="/assets/java-version-feature.html-4cfc377a.js" as="script"><link rel="prefetch" href="/assets/java-collection-list.html-90348734.js" as="script"><link rel="prefetch" href="/assets/java-collection-map.html-3f85bbcd.js" as="script"><link rel="prefetch" href="/assets/heima-concurrent-base.html-e0bacd70.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-base.html-6de5edf3.js" as="script"><link rel="prefetch" href="/assets/Java-concurrent-container.html-ecd26c2a.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-interview.html-eaca9d9e.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-lock.html-69a14b96.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-pool.html-8180e464.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-tools.html-d1d3a7a0.js" as="script"><link rel="prefetch" href="/assets/java-10-feature.html-276395e9.js" as="script"><link rel="prefetch" href="/assets/java-11-feature.html-c0227493.js" as="script"><link rel="prefetch" href="/assets/java-8-feature.html-04a9e421.js" as="script"><link rel="prefetch" href="/assets/java-9-feature.html-416ebcdb.js" as="script"><link rel="prefetch" href="/assets/java-feature-overview.html-2e23671a.js" as="script"><link rel="prefetch" href="/assets/java-bio.html-dd9f780a.js" as="script"><link rel="prefetch" href="/assets/java-io-bio.html-8b93bbf7.js" as="script"><link rel="prefetch" href="/assets/java-io-summary.html-08a31d55.js" as="script"><link rel="prefetch" href="/assets/java-io.html-78f23c38.js" as="script"><link rel="prefetch" href="/assets/java-nio-1.html-3a498f28.js" as="script"><link rel="prefetch" href="/assets/java-nio-10.html-c0885531.js" as="script"><link rel="prefetch" href="/assets/java-nio-11.html-4594533d.js" as="script"><link rel="prefetch" href="/assets/java-nio-12.html-5fedb311.js" as="script"><link rel="prefetch" href="/assets/java-nio-2.html-25938840.js" as="script"><link rel="prefetch" href="/assets/java-nio-3.html-aaa6dc70.js" as="script"><link rel="prefetch" href="/assets/java-nio-4.html-de2df48e.js" as="script"><link rel="prefetch" href="/assets/java-nio-5.html-ea4bad31.js" as="script"><link rel="prefetch" href="/assets/java-nio-6.html-0cb9a600.js" as="script"><link rel="prefetch" href="/assets/java-nio-7.html-5bb2ffc1.js" as="script"><link rel="prefetch" href="/assets/java-nio-8.html-5eb3887b.js" as="script"><link rel="prefetch" href="/assets/java-nio-9.html-94696f1f.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-1.html-f719b051.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-2.html-6f343d9b.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-3.html-ffaabc7c.js" as="script"><link rel="prefetch" href="/assets/java-nio-base-4.html-b440817e.js" as="script"><link rel="prefetch" href="/assets/java-memory-model.html-08352b56.js" as="script"><link rel="prefetch" href="/assets/jvm-class-file-structure.html-a1f900f0.js" as="script"><link rel="prefetch" href="/assets/jvm-class-loader.html-fc7e3313.js" as="script"><link rel="prefetch" href="/assets/jvm-garbage-collection.html-a8cba259.js" as="script"><link rel="prefetch" href="/assets/jvm-memory-structure.html-0f3e776b.js" as="script"><link rel="prefetch" href="/assets/JVM概览.html-873fa565.js" as="script"><link rel="prefetch" href="/assets/JVM调优.html-d195ed58.js" as="script"><link rel="prefetch" href="/assets/java-servlet.html-df47df73.js" as="script"><link rel="prefetch" href="/assets/HikariCP-base.html-5018df8f.js" as="script"><link rel="prefetch" href="/assets/HikariCP-source.html-33019ff9.js" as="script"><link rel="prefetch" href="/assets/jackson-overview.html-8d420722.js" as="script"><link rel="prefetch" href="/assets/kafka-broker.html-4f4c0663.js" as="script"><link rel="prefetch" href="/assets/kafka-consumer.html-57d73556.js" as="script"><link rel="prefetch" href="/assets/kafka-old.html-dc1c919c.js" as="script"><link rel="prefetch" href="/assets/kafka-overview.html-f173d1d3.js" as="script"><link rel="prefetch" href="/assets/kafka-producer.html-53faca27.js" as="script"><link rel="prefetch" href="/assets/spring-kafka.html-daeda40f.js" as="script"><link rel="prefetch" href="/assets/log-framework.html-8fce8e99.js" as="script"><link rel="prefetch" href="/assets/1.Hello World.html-925066e8.js" as="script"><link rel="prefetch" href="/assets/2.Global Config.html-9d093328.js" as="script"><link rel="prefetch" href="/assets/mybatis-plus.html-93f2c284.js" as="script"><link rel="prefetch" href="/assets/index.html-7c97bc31.js" as="script"><link rel="prefetch" href="/assets/1.netty-nio.html-29126cc2.js" as="script"><link rel="prefetch" href="/assets/netty-junior-01.html-b639fc73.js" as="script"><link rel="prefetch" href="/assets/netty-junior-02.html-01ee2084.js" as="script"><link rel="prefetch" href="/assets/netty-junior-03.html-2dedc958.js" as="script"><link rel="prefetch" href="/assets/netty-junior-04.html-36ea1957.js" as="script"><link rel="prefetch" href="/assets/nginx.html-75b6b8bb.js" as="script"><link rel="prefetch" href="/assets/sharding-sphere.html-2e0332e1.js" as="script"><link rel="prefetch" href="/assets/shiro-overview.html-f879cfae.js" as="script"><link rel="prefetch" href="/assets/xxl-job.html-04ed7e05.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-f87e5c6b.js" as="script"><link rel="prefetch" href="/assets/data-structure-dynamic.html-172a5faa.js" as="script"><link rel="prefetch" href="/assets/data-structure-list.html-14320cd1.js" as="script"><link rel="prefetch" href="/assets/data-structure-overview.html-2277c99f.js" as="script"><link rel="prefetch" href="/assets/data-structure-tree.html-6e4c2a9f.js" as="script"><link rel="prefetch" href="/assets/design-adapter.html-efbc9111.js" as="script"><link rel="prefetch" href="/assets/design-bridge.html-79d5de6b.js" as="script"><link rel="prefetch" href="/assets/design-builder.html-b5415b9f.js" as="script"><link rel="prefetch" href="/assets/design-chain.html-2b6e527e.js" as="script"><link rel="prefetch" href="/assets/design-command.html-0256fdc5.js" as="script"><link rel="prefetch" href="/assets/design-composite.html-4fe2e2df.js" as="script"><link rel="prefetch" href="/assets/design-decorator.html-625a7937.js" as="script"><link rel="prefetch" href="/assets/design-facade.html-cd09b476.js" as="script"><link rel="prefetch" href="/assets/design-factory.html-3f747014.js" as="script"><link rel="prefetch" href="/assets/design-flyweight.html-1507c59e.js" as="script"><link rel="prefetch" href="/assets/design-interpreter.html-e346ea99.js" as="script"><link rel="prefetch" href="/assets/design-iterator.html-1d1f0947.js" as="script"><link rel="prefetch" href="/assets/design-mediator.html-e4218513.js" as="script"><link rel="prefetch" href="/assets/design-memento.html-f1aee226.js" as="script"><link rel="prefetch" href="/assets/design-observer.html-3318e6b8.js" as="script"><link rel="prefetch" href="/assets/design-overview.html-ac17a095.js" as="script"><link rel="prefetch" href="/assets/design-prototype.html-e5d4ed5c.js" as="script"><link rel="prefetch" href="/assets/design-proxy.html-f4fa8b5e.js" as="script"><link rel="prefetch" href="/assets/design-singleton.html-80db8943.js" as="script"><link rel="prefetch" href="/assets/design-state.html-55137b0e.js" as="script"><link rel="prefetch" href="/assets/design-strategy.html-01f53277.js" as="script"><link rel="prefetch" href="/assets/design-template.html-b18785d0.js" as="script"><link rel="prefetch" href="/assets/design-visitor.html-ba7df8ae.js" as="script"><link rel="prefetch" href="/assets/docker.html-36e624ac.js" as="script"><link rel="prefetch" href="/assets/滑动窗口.html-d5560ed3.js" as="script"><link rel="prefetch" href="/assets/linux-command.html-5ac729ab.js" as="script"><link rel="prefetch" href="/assets/linux-core.html-9a82ba07.js" as="script"><link rel="prefetch" href="/assets/linux-overview.html-62b8ed1f.js" as="script"><link rel="prefetch" href="/assets/encoding.html-e0020b09.js" as="script"><link rel="prefetch" href="/assets/encryption-algorithm.html-cca9ff29.js" as="script"><link rel="prefetch" href="/assets/network.html-93aa4d4f.js" as="script"><link rel="prefetch" href="/assets/temp.html-9c27b610.js" as="script"><link rel="prefetch" href="/assets/spring-batch.html-074f0073.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-7db75b79.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-30cf1567.js" as="script"><link rel="prefetch" href="/assets/spring-framework-overview.html-4a524051.js" as="script"><link rel="prefetch" href="/assets/spring-boot-condition.html-fbd92287.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-commons.html-a91d4c24.js" as="script"><link rel="prefetch" href="/assets/spring-source-overview.html-7fb04876.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-gateway.html-f4e59290.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-2434bc19.js" as="script"><link rel="prefetch" href="/assets/cloud-openfeign-action.html-a16b88a1.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-e09ccc93.js" as="script"><link rel="prefetch" href="/assets/nacos-client-discovery.html-6d90d727.js" as="script"><link rel="prefetch" href="/assets/nacos-naming-source-service-register.html-2bb0defb.js" as="script"><link rel="prefetch" href="/assets/nacos-overview.html-d17ad67e.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-7a2220e4.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-8582471f.js" as="script"><link rel="prefetch" href="/assets/git.html-8443cd6b.js" as="script"><link rel="prefetch" href="/assets/sentinel-source.html-a6d4bcc9.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-sentinel.html-c72dcf5f.js" as="script"><link rel="prefetch" href="/assets/junit4.html-78d0d49c.js" as="script"><link rel="prefetch" href="/assets/junit5.html-04eb1e31.js" as="script"><link rel="prefetch" href="/assets/maven.html-51839f14.js" as="script"><link rel="prefetch" href="/assets/reactor.html-86ad8ef7.js" as="script"><link rel="prefetch" href="/assets/1.tcp-id-model.html-2b3fd757.js" as="script"><link rel="prefetch" href="/assets/2.what_happen_url.html-c79ef5d0.js" as="script"><link rel="prefetch" href="/assets/3.how_os_deal_network_package.html-ef0044c1.js" as="script"><link rel="prefetch" href="/assets/1.http_interview.html-3b34bd65.js" as="script"><link rel="prefetch" href="/assets/2.http_optimize.html-adbd8f19.js" as="script"><link rel="prefetch" href="/assets/3_https_rsa.html-b22aace6.js" as="script"><link rel="prefetch" href="/assets/4_https_ecdhe.html-511d0758.js" as="script"><link rel="prefetch" href="/assets/5_https_optimize.html-012bb9a3.js" as="script"><link rel="prefetch" href="/assets/6_http2.html-3df89e28.js" as="script"><link rel="prefetch" href="/assets/7_http3.html-81528eff.js" as="script"><link rel="prefetch" href="/assets/1_tcp_interview.html-15a1839a.js" as="script"><link rel="prefetch" href="/assets/2_tcp_feature.html-709a2401.js" as="script"><link rel="prefetch" href="/assets/3_tcp_tcpdump.html-ee2e0064.js" as="script"><link rel="prefetch" href="/assets/1_ip_base.html-61791c51.js" as="script"><link rel="prefetch" href="/assets/2_ping.html-1545f3d5.js" as="script"><link rel="prefetch" href="/assets/3_ping_lo.html-96dc3aaa.js" as="script"><link rel="prefetch" href="/assets/1.how-cpu-run.html-c039a65a.js" as="script"><link rel="prefetch" href="/assets/2.storage.html-d26c011d.js" as="script"><link rel="prefetch" href="/assets/3.how-make-cpu-run-faster.html-25034b40.js" as="script"><link rel="prefetch" href="/assets/4.cpu-mesi.html-378ae154.js" as="script"><link rel="prefetch" href="/assets/5.how-cup-deal-task.html-a2809e01.js" as="script"><link rel="prefetch" href="/assets/6.soft-interrupt.html-a9a36029.js" as="script"><link rel="prefetch" href="/assets/7.float.html-3ad72496.js" as="script"><link rel="prefetch" href="/assets/linux-vs-windows.html-5a5933c2.js" as="script"><link rel="prefetch" href="/assets/1.vmem.html-6bf8bcde.js" as="script"><link rel="prefetch" href="/assets/2.malloc.html-ae65985a.js" as="script"><link rel="prefetch" href="/assets/3.mem-reclaim.html-ee4876d7.js" as="script"><link rel="prefetch" href="/assets/4.alloc-mem.html-e9bfed41.js" as="script"><link rel="prefetch" href="/assets/5.cache-lru.html-5079fbee.js" as="script"><link rel="prefetch" href="/assets/6.linux-mem.html-f50e87dc.js" as="script"><link rel="prefetch" href="/assets/7.linux-mem-2.html-1d2519da.js" as="script"><link rel="prefetch" href="/assets/spring-collection-annotation.html-c79d9d3b.js" as="script"><link rel="prefetch" href="/assets/application-context.html-37c9cc1d.js" as="script"><link rel="prefetch" href="/assets/bean-factory-post-processor.html-1a6ff2f6.js" as="script"><link rel="prefetch" href="/assets/bean-factory.html-b62ac642.js" as="script"><link rel="prefetch" href="/assets/bean-post-processor.html-fda32ad8.js" as="script"><link rel="prefetch" href="/assets/i18n-and-event.html-3ea03882.js" as="script"><link rel="prefetch" href="/assets/package-scan.html-523517f8.js" as="script"><link rel="prefetch" href="/assets/spring-bean-create.html-6f0fb831.js" as="script"><link rel="prefetch" href="/assets/starting-finished.html-1002f8ac.js" as="script"><link rel="prefetch" href="/assets/starting-overview.html-9ee62b8a.js" as="script"><link rel="prefetch" href="/assets/starting-prepare.html-1ce6d7ef.js" as="script"><link rel="prefetch" href="/assets/starting-summary.html-ffab2eb8.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-init.html-8f271cc8.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-listener.html-00c66173.js" as="script"><link rel="prefetch" href="/assets/404.html-fc9ecce7.js" as="script"><link rel="prefetch" href="/assets/index.html-61aa57c1.js" as="script"><link rel="prefetch" href="/assets/index.html-66346733.js" as="script"><link rel="prefetch" href="/assets/index.html-c44edcb2.js" as="script"><link rel="prefetch" href="/assets/index.html-9ab44edf.js" as="script"><link rel="prefetch" href="/assets/index.html-14235715.js" as="script"><link rel="prefetch" href="/assets/index.html-1c850d55.js" as="script"><link rel="prefetch" href="/assets/index.html-82326569.js" as="script"><link rel="prefetch" href="/assets/index.html-c0fd1ce0.js" as="script"><link rel="prefetch" href="/assets/index.html-69217812.js" as="script"><link rel="prefetch" href="/assets/index.html-55c5548e.js" as="script"><link rel="prefetch" href="/assets/index.html-4d273105.js" as="script"><link rel="prefetch" href="/assets/index.html-d2619b71.js" as="script"><link rel="prefetch" href="/assets/index.html-0137e75d.js" as="script"><link rel="prefetch" href="/assets/index.html-952c4f5b.js" as="script"><link rel="prefetch" href="/assets/index.html-a79db16c.js" as="script"><link rel="prefetch" href="/assets/index.html-c7f5224f.js" as="script"><link rel="prefetch" href="/assets/index.html-274dc9a6.js" as="script"><link rel="prefetch" href="/assets/index.html-dc937796.js" as="script"><link rel="prefetch" href="/assets/index.html-c0f0ded0.js" as="script"><link rel="prefetch" href="/assets/index.html-0e7ec348.js" as="script"><link rel="prefetch" href="/assets/index.html-0b6c3732.js" as="script"><link rel="prefetch" href="/assets/index.html-da6ac119.js" as="script"><link rel="prefetch" href="/assets/index.html-54c209dc.js" as="script"><link rel="prefetch" href="/assets/index.html-92b877ce.js" as="script"><link rel="prefetch" href="/assets/index.html-88c793e2.js" as="script"><link rel="prefetch" href="/assets/index.html-563a2905.js" as="script"><link rel="prefetch" href="/assets/index.html-41d0d807.js" as="script"><link rel="prefetch" href="/assets/index.html-9b394c57.js" as="script"><link rel="prefetch" href="/assets/index.html-cab46ac8.js" as="script"><link rel="prefetch" href="/assets/index.html-963da0d5.js" as="script"><link rel="prefetch" href="/assets/index.html-913ac59e.js" as="script"><link rel="prefetch" href="/assets/index.html-01491717.js" as="script"><link rel="prefetch" href="/assets/index.html-f4165558.js" as="script"><link rel="prefetch" href="/assets/index.html-6eafb175.js" as="script"><link rel="prefetch" href="/assets/index.html-593c43d0.js" as="script"><link rel="prefetch" href="/assets/index.html-85eef305.js" as="script"><link rel="prefetch" href="/assets/index.html-f0822bd5.js" as="script"><link rel="prefetch" href="/assets/index.html-790844aa.js" as="script"><link rel="prefetch" href="/assets/index.html-765f9715.js" as="script"><link rel="prefetch" href="/assets/index.html-a6119cb3.js" as="script"><link rel="prefetch" href="/assets/index.html-89c45c7e.js" as="script"><link rel="prefetch" href="/assets/index.html-b15d0ffd.js" as="script"><link rel="prefetch" href="/assets/index.html-1dc07838.js" as="script"><link rel="prefetch" href="/assets/index.html-2cf8acf6.js" as="script"><link rel="prefetch" href="/assets/index.html-8ef7b954.js" as="script"><link rel="prefetch" href="/assets/index.html-de8e63d3.js" as="script"><link rel="prefetch" href="/assets/index.html-103bcf8e.js" as="script"><link rel="prefetch" href="/assets/index.html-84111c44.js" as="script"><link rel="prefetch" href="/assets/index.html-2bb75d04.js" as="script"><link rel="prefetch" href="/assets/index.html-d35658e5.js" as="script"><link rel="prefetch" href="/assets/index.html-cf39c5ea.js" as="script"><link rel="prefetch" href="/assets/index.html-cef0e1a2.js" as="script"><link rel="prefetch" href="/assets/index.html-0dc75cd7.js" as="script"><link rel="prefetch" href="/assets/index.html-d7b58b52.js" as="script"><link rel="prefetch" href="/assets/index.html-ff81b8ed.js" as="script"><link rel="prefetch" href="/assets/index.html-458f9eb1.js" as="script"><link rel="prefetch" href="/assets/index.html-a0970280.js" as="script"><link rel="prefetch" href="/assets/index.html-ac270ea1.js" as="script"><link rel="prefetch" href="/assets/index.html-ebf0e708.js" as="script"><link rel="prefetch" href="/assets/index.html-6204c629.js" as="script"><link rel="prefetch" href="/assets/index.html-830490bc.js" as="script"><link rel="prefetch" href="/assets/index.html-8dc92e72.js" as="script"><link rel="prefetch" href="/assets/index.html-efa2d1c4.js" as="script"><link rel="prefetch" href="/assets/index.html-18692e24.js" as="script"><link rel="prefetch" href="/assets/index.html-c79d2e8a.js" as="script"><link rel="prefetch" href="/assets/index.html-cc20b5d2.js" as="script"><link rel="prefetch" href="/assets/index.html-650347cf.js" as="script"><link rel="prefetch" href="/assets/index.html-c7a183d5.js" as="script"><link rel="prefetch" href="/assets/index.html-04f88729.js" as="script"><link rel="prefetch" href="/assets/index.html-806420c1.js" as="script"><link rel="prefetch" href="/assets/index.html-a0df35c5.js" as="script"><link rel="prefetch" href="/assets/index.html-99b65895.js" as="script"><link rel="prefetch" href="/assets/index.html-5ba927a7.js" as="script"><link rel="prefetch" href="/assets/index.html-72c854d1.js" as="script"><link rel="prefetch" href="/assets/index.html-99edc393.js" as="script"><link rel="prefetch" href="/assets/index.html-0d5cc9fe.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-d1f15dbb.js" as="script"><link rel="prefetch" href="/assets/pageview-4c1e2df7.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><!----><!----><span class="vp-site-name">-_- !</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="Java 笔记" class="vp-link nav-link nav-link" href="/java/java-overview.html"><!---->Java 笔记<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="SpringFramwork" class="vp-link nav-link nav-link" href="/spring/spring-framework/spring-framework-overview.html"><!---->SpringFramwork<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Spring Cloud"><span class="title"><!---->Spring Cloud</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="Spring Cloud Overview" class="vp-link nav-link nav-link" href="/spring-cloud/spring-cloud-overview.html"><!---->Spring Cloud Overview<!----></a></li><li class="dropdown-item"><a aria-label="Spring Cloud Nacos" class="vp-link nav-link nav-link" href="/spring-cloud/spring-cloud-alibaba-nacos.html"><!---->Spring Cloud Nacos<!----></a></li><li class="dropdown-item"><a aria-label="Spring Cloud Sentinel" class="vp-link nav-link nav-link" href="/spring-cloud/spring-cloud-alibaba-sentinel.html"><!---->Spring Cloud Sentinel<!----></a></li><li class="dropdown-item"><a aria-label="Spring Cloud Seate" class="vp-link nav-link nav-link" href="/spring-cloud/spring-cloud-alibaba-seate.html"><!---->Spring Cloud Seate<!----></a></li><li class="dropdown-item"><a aria-label="Spring Cloud Ribbon" class="vp-link nav-link nav-link" href="/spring-cloud/spring-cloud-ribbon/spring-cloud-ribbon.html"><!---->Spring Cloud Ribbon<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="数据库" class="vp-link nav-link nav-link" href="/database/database-overview.html"><!---->数据库<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="自我修养" class="vp-link nav-link nav-link" href="/quality/quality-overview.html"><!---->自我修养<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="中间件" class="vp-link nav-link nav-link" href="/middleware/middleware-overview.html"><!---->中间件<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="工具包" class="vp-link nav-link nav-link" href="/tools/tools-overview.html"><!---->工具包<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="新概念" class="vp-link nav-link nav-link" href="/english/new-concept-2.html"><!---->新概念<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="常用工具总结" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tools/tools-overview.html"><!---->常用工具总结<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">常用开发工具</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="JUnit5使用" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tools/junit/junit5.html"><!---->JUnit5使用<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Junit 4" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tools/junit/junit4.html"><!---->Junit 4<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Maven" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tools/maven/maven.html"><!---->Maven<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Git 使用" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/tools/git/git.html"><!---->Git 使用<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Gitlab 自动发布流程构建" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/tools/gitlab/gitlab.html"><!---->Gitlab 自动发布流程构建<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="一：CI/CD是什么？" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#一-ci-cd是什么"><!---->一：CI/CD是什么？<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="持续集成的好处是什么？" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#持续集成的好处是什么"><!---->持续集成的好处是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="持续交付的好处是什么？" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#持续交付的好处是什么"><!---->持续交付的好处是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="持续部署的好处是什么？" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#持续部署的好处是什么"><!---->持续部署的好处是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="二：GitLab的安装" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#二-gitlab的安装"><!---->二：GitLab的安装<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="三：GitLab Runner" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#三-gitlab-runner"><!---->三：GitLab Runner<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="3.1 GitLab Runner 简介" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_3-1-gitlab-runner-简介"><!---->3.1 GitLab Runner 简介<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.2 GitLab Runner安装" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_3-2-gitlab-runner安装"><!---->3.2 GitLab Runner安装<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.3 GitLab Runner 注册" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_3-3-gitlab-runner-注册"><!---->3.3 GitLab Runner 注册<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.4 GitLab Runner 执行器" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_3-4-gitlab-runner-执行器"><!---->3.4 GitLab Runner 执行器<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.5 GitLab Runner 命令总结" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_3-5-gitlab-runner-命令总结"><!---->3.5 GitLab Runner 命令总结<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.6 运行流水线任务" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_3-6-运行流水线任务"><!---->3.6 运行流水线任务<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="四：GitLab PipLine" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#四-gitlab-pipline"><!---->四：GitLab PipLine<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="4.1 GitLab Pipline 语法" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/tools/gitlab/gitlab.html#_4-1-gitlab-pipline-语法"><!---->4.1 GitLab Pipline 语法<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Gitlab 自动发布流程构建</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-10-30T12:56:09.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 21 分钟</span><meta property="timeRequired" content="PT21M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#一-ci-cd是什么">一：CI/CD是什么？</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#持续集成的好处是什么">持续集成的好处是什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#持续交付的好处是什么">持续交付的好处是什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#持续部署的好处是什么">持续部署的好处是什么？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#二-gitlab的安装">二：GitLab的安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#三-gitlab-runner">三：GitLab Runner</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-1-gitlab-runner-简介">3.1 GitLab Runner 简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-2-gitlab-runner安装">3.2 GitLab Runner安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-3-gitlab-runner-注册">3.3 GitLab Runner 注册</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-4-gitlab-runner-执行器">3.4 GitLab Runner 执行器</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-5-gitlab-runner-命令总结">3.5 GitLab Runner 命令总结</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_3-6-运行流水线任务">3.6 运行流水线任务</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#四-gitlab-pipline">四：GitLab PipLine</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#_4-1-gitlab-pipline-语法">4.1 GitLab Pipline 语法</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="gitlab-自动发布流程构建" tabindex="-1"><a class="header-anchor" href="#gitlab-自动发布流程构建" aria-hidden="true">#</a> Gitlab 自动发布流程构建</h1><h2 id="一-ci-cd是什么" tabindex="-1"><a class="header-anchor" href="#一-ci-cd是什么" aria-hidden="true">#</a> 一：CI/CD是什么？</h2><p>我们的开发模式经历了如下的转变：瀑布模型-&gt;敏捷开发→<a href="https://cloud.tencent.com/product/coding?from=10680" target="_blank" rel="noopener noreferrer">DevOps<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>(Development、Operations的组合词，是一组过程、方法与系统的统称)</p><p>后来随着DevOps的兴起，出现了持续集成（Continuous Integration）、持续交付（Continuous Delivery） 、<a href="https://cloud.tencent.com/product/coding-cd?from=10680" target="_blank" rel="noopener noreferrer">持续部署<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>（Continuous Deployment） 的新方法，关于持续集成、持续交付、持续部署，总结如下：</p><ul><li><strong>持续集成</strong>的重点是将各个开发人员的工作集合到一个代码仓库中。通常，每天都要进行几次，主要目的是尽早发现集成错误，使团队更加紧密结合，更好地协作。</li><li><strong>持续交付</strong>的目的是最小化部署或释放过程中固有的摩擦。它的实现通常能够将构建部署的每个步骤自动化，以便任何时刻能够安全地完成代码发布（理想情况下）。</li><li><strong>持续部署</strong>是一种更高程度的自动化，无论何时对代码进行重大更改，都会自动进行构建/部署。</li></ul><h3 id="持续集成的好处是什么" tabindex="-1"><a class="header-anchor" href="#持续集成的好处是什么" aria-hidden="true">#</a> 持续集成的好处是什么？</h3><p>持续集成可以使问题尽早暴露，从而也降低了解决问题的难度，正如老马所说，持续集成无法消除bug，但却能大大降低修复的难度和时间。</p><h3 id="持续交付的好处是什么" tabindex="-1"><a class="header-anchor" href="#持续交付的好处是什么" aria-hidden="true">#</a> 持续交付的好处是什么？</h3><p>持续交付的好处在于快速获取用户反馈；适应市场变化和商业策略的变化。开发团队保证每次提交的修改都是可上线的修改，那么决定何时上线，上线哪部分功能则完全由产品业务团队决定。</p><p>虽然持续交付有显著的优点，但也有不成立的时候，比如对于嵌入式系统的开发，往往需要软硬件的配合。</p><h3 id="持续部署的好处是什么" tabindex="-1"><a class="header-anchor" href="#持续部署的好处是什么" aria-hidden="true">#</a> 持续部署的好处是什么？</h3><p>持续部署的目标是通过减少批量工作的大小，并加快团队工作的节奏，帮助开发团队在其开发流程中消除浪费。这使团队能够一直处于一种可持续的平稳流状态， 让团队更容易去创新、试验，并达到可持续的生产率</p><h2 id="二-gitlab的安装" tabindex="-1"><a class="header-anchor" href="#二-gitlab的安装" aria-hidden="true">#</a> 二：GitLab的安装</h2><h2 id="三-gitlab-runner" tabindex="-1"><a class="header-anchor" href="#三-gitlab-runner" aria-hidden="true">#</a> 三：GitLab Runner</h2><h3 id="_3-1-gitlab-runner-简介" tabindex="-1"><a class="header-anchor" href="#_3-1-gitlab-runner-简介" aria-hidden="true">#</a> 3.1 GitLab Runner 简介</h3><ul><li>GitLab Runner 是一个开源项目，用于运行作业并将结果发送会GitLab</li><li>与GitLab结合使用，GitLab CI 是GitLab随附的用于协调作业的开源持续击集成服务</li><li>GitLab Runner 是用Go编写的，可以在Linux、Windows和MacOS操作系统上运行</li><li>容器部署需要使用最新Docker版本，GitLab Runner 需要最小的Docker v1.13.0</li><li>GitLab Runner 版本应与GitLab版本同步。（避免版本不一致导致的差异）</li><li>可以根据需要配置任意数量的Runner</li></ul><h4 id="_3-1-1-gitlab-runner-特点" tabindex="-1"><a class="header-anchor" href="#_3-1-1-gitlab-runner-特点" aria-hidden="true">#</a> 3.1.1 GitLab Runner 特点</h4><ul><li><p>作业运行控制：同时执行多个作业</p></li><li><p>作业运行环境：</p><ul><li><p>在本地、使用Docker容器、使用Docker容器并通过SSH执行作业。</p></li><li><p>使用Docker容器在不同的云和虚拟化管理程序上自动缩放。</p></li><li><p>连接到远程SSH服务器。</p></li></ul></li><li><p>支持Bash,Windows Batch和Windows PowerShell。</p></li><li><p>允许自定义作业运行环境。</p></li><li><p>自动重新加载配置，无需重启。</p></li><li><p>易于安装，可作为Linux,macOS和Windows的服务。</p></li></ul><h4 id="_3-1-2-gitlab-runner的类型与状态" tabindex="-1"><a class="header-anchor" href="#_3-1-2-gitlab-runner的类型与状态" aria-hidden="true">#</a> 3.1.2 GitLab Runner的类型与状态</h4><ul><li>类到 <ul><li>shared共享类型，运行整个平台项目的作业(gitlab)</li><li>group项目组类型，运行特定group下的所有项目的作业(group)</li><li>specific项目类型，运行指定的项目作业(project.)</li></ul></li><li>状态 <ul><li>locked:锁定状态，无法运行项目作业</li><li>paused:.暂停状态，暂时不会接受新的作业</li></ul></li></ul><h3 id="_3-2-gitlab-runner安装" tabindex="-1"><a class="header-anchor" href="#_3-2-gitlab-runner安装" aria-hidden="true">#</a> 3.2 GitLab Runner安装</h3><p>**系统环境：**可以在Linux,mac0S,FreeBSD和Windows.上安装和使用GitLab Runner。</p><p>**部署方式：**二进制文件、rpm/deb软件包、Docker、Kubernetes</p><h4 id="_3-2-1-通过包管理工具安装" tabindex="-1"><a class="header-anchor" href="#_3-2-1-通过包管理工具安装" aria-hidden="true">#</a> 3.2.1 通过包管理工具安装</h4><p>Add GitLab&#39;s official repository:.添加官方仓库</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For Debian/Ubuntu/Mint</span>
<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span>

<span class="token comment"># For RHEL/CentoS/Fedora</span>
<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新runner</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For Debian/Ubuntu/Mint</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gitlab-runner

<span class="token comment"># For RHEL/Centos/Fedora</span>
<span class="token function">sudo</span> yum update
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Install the latest version of GitLab Runner:安装最新版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For Debian/Ubuntu/Mint</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gitlab-runner

<span class="token comment"># For RHEL/CentoS/Fedora</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To install a specific version of GitLab Runner:安装指定版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># for DEB based systems</span>
<span class="token function">apt-cache</span> madison gitlab-runner
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gitlab-runner<span class="token operator">=</span><span class="token number">10.0</span>.0

<span class="token comment"># for RPM based systems</span>
yum list gitlab-runner <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner-10.0.0-1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-2-手动deb-rpm包安装" tabindex="-1"><a class="header-anchor" href="#_3-2-2-手动deb-rpm包安装" aria-hidden="true">#</a> 3.2.2 手动deb/rpm包安装</h4><p>下载软件包</p><ol><li>https://gitlab-runner--downloads.s3.amazonaws.com/latest/index.html上找到最新的文件名和选项。</li><li>选择一个版本并下载二进制文件，如文档所述，该文件用于下载任何其他标记的GitLab Runner发行版。</li></ol><p>例如，对于Debian?或Ubuntu:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-LJO</span> https://gitlab-runner-downloads.s3.amazonaws.com/latest/deb/gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
dpkg <span class="token parameter variable">-i</span> gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
dpkg <span class="token parameter variable">-i</span> gitlab-runner <span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例如，对于CentOS或Red Hat Enterprise Linux:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-LJO</span> https://gitlab-runner-downloads.s3.amazonaws.com/latest/rpm/gitlab-runner <span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-i</span> gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-3-二进制文件安装" tabindex="-1"><a class="header-anchor" href="#_3-2-3-二进制文件安装" aria-hidden="true">#</a> 3.2.3 二进制文件安装</h4><p>下载指定版本：将上面URL中的latest切换为v12.9。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Linux x86-64</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
<span class="token comment"># Linux x86</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-386
<span class="token comment"># Linux arm</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm
<span class="token comment"># Linux arm64</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加执行权限</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个gitlab用户</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">--comment</span> <span class="token string">&#39;GitLab Runner&#39;</span>--create-home gitlab-runner <span class="token parameter variable">--shell</span> /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装并作为服务运行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-runner <span class="token function">install</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>gitlab-runner --working-directory<span class="token operator">=</span>/home/gitlab-runner
<span class="token function">sudo</span> gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>更新</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 停止服务</span>
<span class="token function">sudo</span> gitlab-runner stop
<span class="token comment"># 下载新版本二进制包</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
<span class="token comment"># 赋予执行权限</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner
<span class="token comment"># 启动服务</span>
<span class="token function">sudo</span> gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-4-mac-os系统下的安装-手动" tabindex="-1"><a class="header-anchor" href="#_3-2-4-mac-os系统下的安装-手动" aria-hidden="true">#</a> 3.2.4 Mac OS系统下的安装 - 手动</h4><p>下载二进制包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>授予其执行权限：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>将Runner作为服务安装并启动它：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~
gitlab-runner <span class="token function">install</span>
gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-5-mac-os-系统下的安装-自动" tabindex="-1"><a class="header-anchor" href="#_3-2-5-mac-os-系统下的安装-自动" aria-hidden="true">#</a> 3.2.5 Mac OS 系统下的安装 - 自动</h4><p>安装，启动</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>brew install gitlab-runner
brew services.start gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>更新</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-runner stop

<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-o</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64

<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner

gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-gitlab-runner-注册" tabindex="-1"><a class="header-anchor" href="#_3-3-gitlab-runner-注册" aria-hidden="true">#</a> 3.3 GitLab Runner 注册</h3><ul><li>注册步骤： <ul><li>获取runner token -&gt; 进行注册</li></ul></li><li>GitLabRunner类型 <ul><li>shared：运行整个平台项目的作业(gitlab)</li><li>group：运行特定group下的所有项目的作业(group）</li><li>specific：运行指定的项目作业(project)</li><li>locked：无法运行项目作业</li><li>paused：不会运行作业</li></ul></li></ul><h4 id="_3-3-1-获取注册token" tabindex="-1"><a class="header-anchor" href="#_3-3-1-获取注册token" aria-hidden="true">#</a> 3.3.1 获取注册token</h4><p>获取Shared类型的Token</p><p><img src="/assets/image-20221030125007909-101e42c1.png" alt="image-20221030125007909"></p><p>获取Group类型的Token</p><p><img src="/assets/image-20221030125250140-17bb5f84.png" alt="image-20221030125250140"></p><p>获取Special类型的Token</p><p><img src="/assets/image-20221030125548727-e0b1d719.png" alt="image-20221030125548727"></p><h4 id="_3-3-2-gitlab-runner-的注册" tabindex="-1"><a class="header-anchor" href="#_3-3-2-gitlab-runner-的注册" aria-hidden="true">#</a> 3.3.2 GitLab Runner 的注册</h4><p>runner的注册采用的是交互式的方式：</p><p>通过执行<code>sudo gitlab-runner register</code>进行注册，过程中需要输入以下一些参数：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># gitlab 的url：</span>
http://127.0.0.1:10001
<span class="token comment"># runner 的 token ：</span>
DR9XssZPEdqymnQBVDpb
<span class="token comment"># runner 的描述信息 - 用于辨识该注册所属的群组或项目，可以设置为方便区分的字符串：</span>
test-shard
<span class="token comment"># runner 的 tag - 标签用于后续CI配置中选择此执行器，后期可以通过gitlab界面更改：</span>
build
<span class="token comment"># 选择执行器 - 后续CI任务的执行方式，docker方式运行的请选择docker ： </span>
shell
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面是一个完整的注册流程：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>xuliang@xuliang-vm:~$ <span class="token function">sudo</span> gitlab-runner register
Runtime platform                                    <span class="token assign-left variable">arch</span><span class="token operator">=</span>amd64 <span class="token assign-left variable">os</span><span class="token operator">=</span>linux <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">12303</span> <span class="token assign-left variable">revision</span><span class="token operator">=</span>0d4137b8 <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">15.5</span>.0
Running <span class="token keyword">in</span> system-mode.                            
                                                   
Enter the GitLab instance URL <span class="token punctuation">(</span>for example, https://gitlab.com/<span class="token punctuation">)</span>:
http://127.0.0.1:10001
Enter the registration token:
DR9XssZPEdqymnQBVDpb
Enter a description <span class="token keyword">for</span> the runner:
<span class="token punctuation">[</span>xuliang-vm<span class="token punctuation">]</span>: test-shard
Enter tags <span class="token keyword">for</span> the runner <span class="token punctuation">(</span>comma-separated<span class="token punctuation">)</span>:
build,deploy
Enter optional maintenance note <span class="token keyword">for</span> the runner:

Registering runner<span class="token punctuation">..</span>. succeeded                     <span class="token assign-left variable">runner</span><span class="token operator">=</span>DR9XssZP
Enter an executor: docker-ssh, shell, ssh, kubernetes, docker-ssh+machine, instance, custom, docker, parallels, virtualbox, docker+machine:
shell
Runner registered successfully. Feel <span class="token function">free</span> to start it, but <span class="token keyword">if</span> it&#39;s running already the config should be automatically reloaded<span class="token operator">!</span>
 
Configuration <span class="token punctuation">(</span>with the authentication token<span class="token punctuation">)</span> was saved <span class="token keyword">in</span> <span class="token string">&quot;/etc/gitlab-runner/config.toml&quot;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-gitlab-runner-执行器" tabindex="-1"><a class="header-anchor" href="#_3-4-gitlab-runner-执行器" aria-hidden="true">#</a> 3.4 GitLab Runner 执行器</h3><h4 id="_3-4-1-背景介绍" tabindex="-1"><a class="header-anchor" href="#_3-4-1-背景介绍" aria-hidden="true">#</a> 3.4.1 背景介绍</h4><p>GitLab CI/CD的流水线真正的执行环境是GitLab Runner提供的执行器，为了满足各种各样的需求，GitLab CI/CD支持的执行器有很多种，最常用的是Docker， shell，Kubernets三种。每一种执行器都与自己的特性，了解各个执行器的特性，并选择合适的执行器才能让我们流水线更加可靠，稳健。下面我就给大家讲解一下各种执行器的特性。</p><h4 id="_3-4-2-执行器类型" tabindex="-1"><a class="header-anchor" href="#_3-4-2-执行器类型" aria-hidden="true">#</a> 3.4.2 执行器类型</h4><p>GitLab Runner支持的执行器有以下几种：</p><ul><li>SSH</li><li>Shell</li><li>Parallels</li><li>VirtualBox</li><li>Docker</li><li>Docker Machine (auto-scaling)</li><li>Kubernetes</li><li>Custom</li></ul><p>GitLab Runner 支持的执行器有GitLab Runner的安装方式有关也和宿主机环境有关。</p><h4 id="_3-4-3-执行器特性对比1" tabindex="-1"><a class="header-anchor" href="#_3-4-3-执行器特性对比1" aria-hidden="true">#</a> 3.4.3 执行器特性对比1</h4><table><thead><tr><th>执行器</th><th>SSH</th><th>Shell</th><th>VirtualBox</th><th>Parallels</th><th>Docker</th><th>Kubernetes</th><th>Custom</th></tr></thead><tbody><tr><td>每次build清空build环境</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>conditional (4)</td></tr><tr><td>如果以前的克隆存在，请重新使用它</td><td>✓</td><td>✓</td><td>✗</td><td>✗</td><td>✓</td><td>✗</td><td>conditional (4)</td></tr><tr><td>runner文件系统访问受到保护（5）</td><td>✓</td><td>✗</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>conditional (4)</td></tr><tr><td>迁移runner机器</td><td>✗</td><td>✗</td><td>partial</td><td>partial</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>复杂的构建环境</td><td>✗</td><td>✗（2）</td><td>✓（3）</td><td>✓（3）</td><td>✓</td><td>✓</td><td>conditional (4)</td></tr><tr><td>调试构建问题</td><td>容易</td><td>容易</td><td>困难</td><td>困难</td><td>中等</td><td>中等</td><td>中等</td></tr></tbody></table><p>标注解释</p><ol><li>迁移时需要在新的机器上安装所依赖的应用，服务，工具包</li><li>要求所有依赖手动安装</li><li>例如使用 https://www.vagrantup.com/docs/providers/virtualbox</li><li>取决于您正在配置的环境类型。它可以在每个构建之间完全隔离或共享。</li><li>当runner的文件系统访问不受保护时，作业可以访问整个系统，包括运行程序的令牌，以及其他作业的缓存和代码。执行器被标记为 ✓ 默认情况下不允许运行程序访问文件系统。但是，安全缺陷或某些配置可能会允许作业从其容器中跳出并访问文件系统宿主runner</li></ol><p>对于ssh和shell执行器，在构建完成后，并不会自动清空构建目录。其他执行器则会。所以如果你用的是Shell执行器，会在Runner的build目录下找到构建的文件和产物，而当你是使用Shell执行器时，如果以及克隆过项目了，则会重新使用它。虽然shell执行器使用的宿主机环境，运行足够快，但在使用时，必须手动安装所有构建环境，依赖，而且可能存在越权的问题。如果你是一个追求速度，可以使用Shell执行器，如果你追求灵活性，稳健，可以使用Dokcer执行器，如果你对自动扩缩容有一定要求，建议上Kubernets。</p><h4 id="_3-4-4-执行器特性对比2" tabindex="-1"><a class="header-anchor" href="#_3-4-4-执行器特性对比2" aria-hidden="true">#</a> 3.4.4 执行器特性对比2</h4><table><thead><tr><th>Executor</th><th>SSH</th><th>Shell</th><th>VirtualBox</th><th>Parallels</th><th>Docker</th><th>Kubernetes</th><th>Custom</th></tr></thead><tbody><tr><td>保护变量</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>GitLab Runner 执行命令行</td><td>✗</td><td>✓</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>支持<code>.gitlab-ci.yml</code> ：image</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td><td>✓ (via <a href="https://blog.csdn.net/github_35631540/article/details/custom.md#stages" target="_blank" rel="noopener noreferrer"><code>$CUSTOM_ENV_CI_JOB_IMAGE</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>支持<code>.gitlab-ci.yml</code>: services</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>支持<code>.gitlab-ci.yml</code>: cache</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>支持<code>.gitlab-ci.yml</code>: artifacts</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>跨阶段制品传递</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>使用 GitLab 私有镜像仓库</td><td>n/a</td><td>n/a</td><td>n/a</td><td>n/a</td><td>✓</td><td>✓</td><td>n/a</td></tr><tr><td>集成 Web terminal</td><td>✗</td><td>✓ (UNIX)</td><td>✗</td><td>✗</td><td>✓</td><td>✓ (1)</td><td>✗</td></tr></tbody></table><p>在上面的执行器特性对比中需要注意的是如果是Shell执行器，无法使用docker镜像和<code>services</code>关键词。即使你的宿主机已经安装的Docker。此外控制台调试之后Docker与k8s以及，unix的shell执行器可以使用。</p><h3 id="_3-5-gitlab-runner-命令总结" tabindex="-1"><a class="header-anchor" href="#_3-5-gitlab-runner-命令总结" aria-hidden="true">#</a> 3.5 GitLab Runner 命令总结</h3><p>gitlab-runner删除无效runner</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-runner verify <span class="token parameter variable">--delete</span> <span class="token parameter variable">--name</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看帮助</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-runner <span class="token parameter variable">--help</span>
gitlab-runner <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token parameter variable">--help</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置文件路径</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 配置文件</span>
<span class="token comment"># 当gitlab-runner作为超级用户（root）执行时，在* nix系统上</span>
/etc/gitlab-runner/config.toml

<span class="token comment"># 当gitlab-runner以非root身份执行时，在* nix系统上</span>
~/.gitlab-runner/config.toml 

<span class="token comment"># 在其他系统上</span>
./config.toml 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注册</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 注册</span>
gitlab-runner register <span class="token parameter variable">--name</span> my-runner <span class="token parameter variable">--url</span> http://gitlab.example.com --registration-token my-registration-token

<span class="token comment"># 或者通过在register命令之前配置环境变量：</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CI_SERVER_URL</span><span class="token operator">=</span>http://gitlab.example.com
<span class="token builtin class-name">export</span> <span class="token assign-left variable">RUNNER_NAME</span><span class="token operator">=</span>my-runner
<span class="token builtin class-name">export</span> <span class="token assign-left variable">REGISTRATION_TOKEN</span><span class="token operator">=</span>my-registration-token
<span class="token builtin class-name">export</span> <span class="token assign-left variable">REGISTER_NON_INTERACTIVE</span><span class="token operator">=</span>true
gitlab-runner register

<span class="token comment"># 非互动注册，可以在非交互/无人值守模式下使用注册。</span>
gitlab-runner register --non-interactive <span class="token operator">&lt;</span>other-arguments<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注销</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 取消注册所有附加的注册者</span>
gitlab-runner unregister --all-runners

<span class="token comment"># 要取消注册特定的跑步者，首先通过执行gitlab-runner list获取注册者的详细信息</span>
gitlab-runner list
<span class="token comment"># 再根据信息注销，按注册令牌</span>
gitlab-runner unregister <span class="token parameter variable">--url</span> http://gitlab.example.com/ <span class="token parameter variable">--token</span> t0k3n
<span class="token comment"># 按名字</span>
gitlab-runner unregister <span class="token parameter variable">--name</span> hj_project
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装gitlab-runner install</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#复制gitlab-runner到/usr/bin/目录下</span>
<span class="token function">cp</span> /root/gitlab-runner-linux-amd64  /usr/bin/gitlab-runner

<span class="token comment">#赋予可执行权限</span>
<span class="token function">chmod</span> +x /usr/bin/gitlab-runner

<span class="token comment"># 创建符号链接文件</span>
<span class="token function">ln</span> <span class="token parameter variable">-s</span>  /usr/bin/gitlab-runner /usr/local/bin/gitlab-runner

<span class="token comment"># 创建 GitLab Runner用户</span>
<span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">--comment</span> <span class="token string">&#39;GitLab Runner&#39;</span> --create-home gitlab-runner <span class="token parameter variable">--shell</span> /bin/bash

<span class="token comment"># 修改gitla-runner密码</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;gitlab-runner&quot;</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> gitlab-runner
<span class="token comment"># 安装</span>
gitlab-runner <span class="token function">install</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>gitlab-runner --working-directory<span class="token operator">=</span>/home/gitlab-runner

<span class="token comment"># 把服务添加成随机启动</span>
<span class="token function">chkconfig</span> gitlab-runner on

<span class="token comment"># 给gitl-runner用户可以sudo执行/usr/local/bin/gitlab-runner的权限</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Cmnd_Alias CMD = /usr/bin/systemctl,/usr/bin/gitlab-runner,/usr/bin/vim&quot;</span> <span class="token operator">&gt;&gt;</span>/etc/sudoers.d/gitlab-runner
<span class="token builtin class-name">echo</span> <span class="token string">&quot;gitlab-runner ALL=(ALL)       NOPASSWD:CMD&quot;</span> <span class="token operator">&gt;&gt;</span>/etc/sudoers.d/gitlab-runner

<span class="token comment"># 运行</span>
gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>卸载</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">!</span>/bin/bash
<span class="token comment"># 卸载gitlab-runner</span>

<span class="token comment"># 停止服务</span>
gitlab-runner stop

<span class="token comment"># 取消随机启动</span>
<span class="token function">chkconfig</span> gitlab-runner off

<span class="token comment"># 卸载服务</span>
gitlab-runner uninstall

<span class="token comment"># 清理文件</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/gitlab-runner
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/local/bin/gitlab-runner
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/bin/gitlab-runner
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/sudoers.d/gitlab-runner

<span class="token comment"># 删除用户</span>
<span class="token function">userdel</span> <span class="token parameter variable">-r</span> gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-运行流水线任务" tabindex="-1"><a class="header-anchor" href="#_3-6-运行流水线任务" aria-hidden="true">#</a> 3.6 运行流水线任务</h3><p>脚本</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> deploy
  
<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">tags</span><span class="token punctuation">:</span> 
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;mvn<span class="token punctuation">-</span>clean
    <span class="token punctuation">-</span> echo &quot;mvn install&quot;
    
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> deploy
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;hello deploy&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四-gitlab-pipline" tabindex="-1"><a class="header-anchor" href="#四-gitlab-pipline" aria-hidden="true">#</a> 四：GitLab PipLine</h2><p>GitLab CI的每个实例都有一个称为Lint的嵌入式调试工具，该工具可以验证.gitlab--ci.yml文件的内容</p><h3 id="_4-1-gitlab-pipline-语法" tabindex="-1"><a class="header-anchor" href="#_4-1-gitlab-pipline-语法" aria-hidden="true">#</a> 4.1 GitLab Pipline 语法</h3><h4 id="_4-1-1-job" tabindex="-1"><a class="header-anchor" href="#_4-1-1-job" aria-hidden="true">#</a> 4.1.1 Job</h4><p>在每个项目中，使用名为.gitlab-ci.yml的YAML文件配置GitLab CI/CD管道。在文件中可以定义一个或多个作业(job)。每个作业必须具有唯一的名称（不能使用关键字），每个作业是独立执行的。作业定义了在约束条件下进行相关操作，每个作业至少要包含一个script。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job1</span><span class="token punctuation">:</span>
  script<span class="token punctuation">:</span><span class="token string">&quot;execute-script-for-jobl&quot;</span>
<span class="token key atrule">job2</span><span class="token punctuation">:</span>
  script<span class="token punctuation">:</span><span class="token string">&quot;execute-script-for-job2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里在pipeline中定义了两个作业，每个作业运行不同的命令。命令可以是shell或脚本。</p><p>一个样例</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">before_script</span><span class="token punctuation">:</span>
  echo &quot;before<span class="token punctuation">-</span>script <span class="token tag">!</span><span class="token tag">!</span>&quot;
  
<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com
  
<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> codescan
  <span class="token punctuation">-</span> deploy
  
<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;before<span class="token punctuation">-</span>script in job&quot;
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;mvn clean
    <span class="token punctuation">-</span> echo &quot;mvn install&quot;
    <span class="token punctuation">-</span> echo &quot;$DOMAIN&quot;
  <span class="token key atrule">after_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;after script in buildjob&quot;

<span class="token key atrule">unittest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;run test&quot;

<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;hello deploy&quot;
    <span class="token punctuation">-</span> sleep 2;
    
<span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
    
<span class="token key atrule">after_script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> echo &quot;after<span class="token punctuation">-</span>script <span class="token tag">!</span><span class="token tag">!</span>&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-2-script" tabindex="-1"><a class="header-anchor" href="#_4-1-2-script" aria-hidden="true">#</a> 4.1.2 Script</h4><p>每个作业至少要包含一个script。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> uname <span class="token punctuation">-</span>a
    <span class="token punctuation">-</span> bundle exec rspec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**注意：**有时，script命令需要用单引号或双引号引起来。例如，包含冒号命令(😃，需要加引号，以便被包裹的YML解析器知道来解释整个事情作为一个字符串，而不是一个&quot;键:值&quot;对。使用特殊字符时要小心：<code>:</code>，<code>{</code>，<code>}</code>,<code>[</code>,<code>]</code>,<code>,</code>,<code>&amp;</code>,<code>*</code>,<code>#</code>,<code>?</code>,<code>|</code>,<code>-</code>，<code>&lt;</code>，<code>&gt;</code>，<code>=</code>,<code>!</code>，<code>%</code>，<code>@</code>，```</p><h4 id="_4-1-3-before-script" tabindex="-1"><a class="header-anchor" href="#_4-1-3-before-script" aria-hidden="true">#</a> 4.1.3 before_script</h4><p>用于定义一个命令，该命令在每个作业之前运行。必须是一个数组。指定的script与主脚本中指定的任何脚本串联在一起，并在单个shell中一起执行。</p><p>before_script失败导致整个作业失败，其他作业将不再执行。作业失败不会影响after_script运行。</p><h4 id="_4-1-4-after-script" tabindex="-1"><a class="header-anchor" href="#_4-1-4-after-script" aria-hidden="true">#</a> 4.1.4 after_script</h4><p>用于定义在每个作业（包括失败的作业）之后运行的命令。</p><p>这必须是一个数组。</p><p>指定的脚本在新的shell中执行，与任何before_script或script脚本分开。</p><p>after_script失败不会影响作业失败。</p><h4 id="_4-1-5-stages" tabindex="-1"><a class="header-anchor" href="#_4-1-5-stages" aria-hidden="true">#</a> 4.1.5 stages</h4><p>用于定义作业可以使用的阶段，并且是全局定义的。</p><p>同一阶段的作业并行运行，不同阶段按顺序执行。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> codescan
  <span class="token punctuation">-</span> deploy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20221101130132410-7c72a740.png" alt="image-20221101130132410"></p><h4 id="_4-1-6-pre-post" tabindex="-1"><a class="header-anchor" href="#_4-1-6-pre-post" aria-hidden="true">#</a> 4.1.6 .pre&amp;.post</h4><p>.pre始终是整个管道的第一个运行阶段，.post始终是整个管道的最后一个运行阶段。用户定义的阶段都在两者之间运行。.pre和.post的顺序无法更改。如果管道仅包含.pre或.post阶段的作业，则不会创建管道。</p><p><img src="/assets/image-20221101130548178-37101ef1.png" alt="image-20221101130548178"></p><h4 id="_4-1-7-stage" tabindex="-1"><a class="header-anchor" href="#_4-1-7-stage" aria-hidden="true">#</a> 4.1.7 stage</h4><p>是按Job定义的，并且依赖于全局定义的stages。它允许将作业分为不同的阶段，并且同一stage作业可以并行执行（取决于特定条件）。</p><p><img src="/assets/image-20221101131201855-35608521.png" alt="image-20221101131201855"></p><p>可能遇到的问题：阶段并没有并行运行。在这里我把这两个阶段在同一个runner运行了，所以需要修改runner每次运行的作业数量。默认是1，改为10.</p><p><img src="/assets/image-20221101131407013-53a29412.png" alt="image-20221101131407013"></p><p>vim /etc/gitlab-runner/config.toml 更改后自动加载无需重启。</p><div class="language-toml line-numbers-mode" data-ext="toml"><pre class="language-toml"><code>concurrent <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-1-8-variables" tabindex="-1"><a class="header-anchor" href="#_4-1-8-variables" aria-hidden="true">#</a> 4.1.8 variables</h4><p>定义变量，pipeline变量、job变量。job变量优先级最大。</p><h4 id="_4-1-9-tags" tabindex="-1"><a class="header-anchor" href="#_4-1-9-tags" aria-hidden="true">#</a> 4.1.9 tags</h4><p>用于从允许运行该项目的所有Runner列表中选择特定的Runner，在Runner注册期间，您可以指定Runner的标签。</p><p><img src="/assets/image-20221102084714149-6127ea5e.png" alt="image-20221102084714149"></p><h4 id="_4-1-10-allow-failure" tabindex="-1"><a class="header-anchor" href="#_4-1-10-allow-failure" aria-hidden="true">#</a> 4.1.10 allow_failure</h4><p>allow_failure允许作业失败，默认值为false。启用后，如果作业失败，该作业将在用户界面中显示橙色警告。但是，管道的逻辑流程将认为作业成功/通过，并且不会被阻塞。假设所有其他作业均成功，则该作业的阶段及其管道将显示相同的橙色警告。但是，关联的提交将被标记为&quot;通过&quot;，而不会发出警告。</p><p><img src="/assets/image-20221102085341241-e58e7445.png" alt="image-20221102085341241"></p><h4 id="_4-1-11-when" tabindex="-1"><a class="header-anchor" href="#_4-1-11-when" aria-hidden="true">#</a> 4.1.11 when</h4><p>控制作业的运行</p><ul><li><strong>on_success：</strong> 前面阶段中的所有作业都成功时才执行作业，默认值。</li><li>**on_failure：**当前面阶段出现失败时执行。</li><li>**always：**总是执行作业。</li><li>**manual：**手动执行作业。</li><li>**delayed：**延迟执行作业。</li></ul><p><img src="/assets/image-20221102085956655-a50f9b4c.png" alt="image-20221102085956655"></p><p>demo</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">timedrollout</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &#39;Rolling out 10% <span class="token punctuation">...</span> &#39;
  <span class="token key atrule">when</span><span class="token punctuation">:</span> delayed
  <span class="token key atrule">start_in</span><span class="token punctuation">:</span> <span class="token string">&#39;30&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-12-retry" tabindex="-1"><a class="header-anchor" href="#_4-1-12-retry" aria-hidden="true">#</a> 4.1.12 retry</h4><ul><li>配置在失败的情况下重试作业的次数。</li><li>当作业失败并配置了retry，将再次处理该作业，直到达到retry关键字指定的次数。</li><li>如果retry设置为2，并且作业在第二次运行成功（第一次重试)，则不会再次重试。retry值必须是一个正整数，等于或大于0，但小于或等于2（最多两次重试，总共运行3次）。</li></ul><p><strong>精确匹配错误</strong></p><p>默认情况下，在失败情况下重试作业。max：最大重试次数when：重试失败的错误类型</p><ul><li>always：在发生任何故障时重试（默认）。</li><li>unknown_failure：当失败原因未知时。</li><li>script_failure：脚本失败时重试。</li><li>api_failure：API失败重试。</li><li>stuck_or_timeout_failure：作业卡住或超时时。</li><li>runner_system_failure：运行系统发生故障。</li><li>missing_dependency_failure：如果依赖丢失。</li><li>runner_unsupported：Runner不受支持。</li><li>stale_schedule：无法执行延迟的作业。</li><li>job_execution_timeout：脚本超出了为作业设置的最大执行时间。</li><li>archived_failure：作业已存档且无法运行。</li><li>unmet_prerequisites：作业未能完成先决条件任务。</li><li>scheduler_failure：调度程序未能将作业分配给运行scheduler_failure。</li><li>data_integrity_failure：检测到结构完整性问题。</li></ul><p><strong>demo</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">unittest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ech &quot;run test&quot;
  <span class="token key atrule">retry</span><span class="token punctuation">:</span>
    <span class="token key atrule">max</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">when</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> script_failure
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-13-timeout" tabindex="-1"><a class="header-anchor" href="#_4-1-13-timeout" aria-hidden="true">#</a> 4.1.13 timeout</h4><p>作业级别的超时可以超过项目级别超时，但不能超过Runner特定的超时。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> build.sh
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 3 hours 30 minutes

<span class="token key atrule">test</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> rspec
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 3h 30m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-14-parallel" tabindex="-1"><a class="header-anchor" href="#_4-1-14-parallel" aria-hidden="true">#</a> 4.1.14 parallel</h4><p>并行作业</p><ul><li>配置要并行运行的作业实例数，此值必须大于或等于2并且小于或等于50。</li><li>这将创建N个并行运行的同一作业实例.它们从job_name 1/N到job_name N/N依次命名。</li></ul><blockquote><p>实验脚本demo</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">before script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> echo &quot;before<span class="token punctuation">-</span>script<span class="token tag">!</span><span class="token tag">!</span>&quot;

<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com

<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> codescan
  <span class="token punctuation">-</span> deploy

<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">inherit</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">variables</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">before script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;before<span class="token punctuation">-</span>script in job&quot;
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span>master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;mvnclean
    <span class="token punctuation">-</span> echo &quot;mvn install&quot;
    <span class="token punctuation">-</span> echo &quot;S(DOMAIN)&quot;
    <span class="token punctuation">-</span> false <span class="token important">&amp;&amp;</span> true exit_code=$<span class="token punctuation">?</span>
    <span class="token punctuation">-</span> if <span class="token punctuation">[</span> $exit_code <span class="token punctuation">-</span>ne 0 <span class="token punctuation">]</span>; then echo &quot;Previous command failed&quot;; fi;
    <span class="token punctuation">-</span> sleep 2;
  <span class="token key atrule">after script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;after script in job&quot;

<span class="token key atrule">unittest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;run test&quot;
    
<span class="token key atrule">interfacetest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;run test&quot;
    <span class="token punctuation">-</span> sleep 2;    
    
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> deploy
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;hello deploy&quot;
    <span class="token punctuation">-</span> sleep 2;
  <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
  <span class="token key atrule">allow_failure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  
<span class="token key atrule">timedrollout</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &#39;Rolling out 10% <span class="token punctuation">...</span> &#39;
  <span class="token key atrule">when</span><span class="token punctuation">:</span> delayed
  <span class="token key atrule">start_in</span><span class="token punctuation">:</span> <span class="token string">&#39;30&#39;</span>

<span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token key atrule">after_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;after<span class="token punctuation">-</span>script&quot;    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-15-only-except-限制分支标签" tabindex="-1"><a class="header-anchor" href="#_4-1-15-only-except-限制分支标签" aria-hidden="true">#</a> 4.1.15 only &amp; except 限制分支标签</h4><p>简单了解，逐渐被rules替代了</p><ul><li>only和except用分支策略来限制jobs构建： <ul><li>only定义哪些分支和标签的git项目将会被job执行。</li><li>except定义哪些分支和标签的git项目将不会被job执行。</li></ul></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job</span><span class="token punctuation">:</span>
  <span class="token comment"># use regexp</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /^issue<span class="token punctuation">-</span>.<span class="token important">*$/</span>
  <span class="token comment"># use special keyword</span>
  <span class="token key atrule">except</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> branches
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>branches</td><td>当管道的Git引用是分支时.</td></tr><tr><td>tags</td><td>当管道的Git引用是标签时，</td></tr><tr><td>api</td><td>当第二个管道API触发了管道时（不是触发器API)</td></tr><tr><td>external</td><td>使用除GitLab以外的CI服务时.</td></tr><tr><td>pipelines</td><td>对于多项目触发器，使用带有CI_JOB_TOKEN的API创建.</td></tr><tr><td>pushes</td><td>管道由用户的git push触发.</td></tr><tr><td>schedules</td><td>For scheduled pipelines.</td></tr><tr><td>triggers</td><td>对于使用触发令牌创建的管道，</td></tr><tr><td>web</td><td>对于使用GitLab UI中的&quot;运行管道&quot;按钮创建的管道（在项目的Pipelines下）.</td></tr><tr><td>merge_requests</td><td>创建或更新合并请求时（请参阅管道以了解合并请求）</td></tr><tr><td>external_pull_requests</td><td>在GitHub上创建或请求外部拉取请求时（有关外部拉取请求，请参见管道）.</td></tr><tr><td>chat</td><td>对于使用GitLab ChatOps命令创建的作业，</td></tr></tbody></table><h4 id="_4-1-16-rules-构建规则" tabindex="-1"><a class="header-anchor" href="#_4-1-16-rules-构建规则" aria-hidden="true">#</a> 4.1.16 rules 构建规则</h4><ul><li>rules允许按顺序评估单个规则，直到匹配并为作业动态提供属性。</li><li>rules不能only/except与only/except组合使用。</li></ul><p>可用的规则：</p><ul><li>if（如果条件匹配）</li><li>changes（指定文件发生变化）</li><li>exists（指定文件存在）</li></ul><p>，</p><h5 id="rules-if-条件匹配" tabindex="-1"><a class="header-anchor" href="#rules-if-条件匹配" aria-hidden="true">#</a> rules-if-条件匹配</h5><ul><li>如果DOMAIN的值匹配，则需要手动运行。</li><li>不匹配on_success。</li><li>条件判断从上到下，匹配即停止。</li><li>多条件匹配可以使用&amp;&amp; ||</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com
  
<span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token comment">#parallel:5</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> &#39;$DOMAIN ==&quot;example.com&quot;
      when<span class="token punctuation">:</span>manual
	<span class="token punctuation">-</span> when<span class="token punctuation">:</span>on_success
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="rules-changes-文件变化" tabindex="-1"><a class="header-anchor" href="#rules-changes-文件变化" aria-hidden="true">#</a> rules-changes-文件变化</h5><ul><li>接受文件路径数组。</li><li>如果提交中Jenkinsfile文件发生的变化则为true。</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token comment">#parallel:5</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">changes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Jenkinsfile
      when<span class="token punctuation">:</span>manual
    <span class="token punctuation">-</span> if<span class="token punctuation">:</span>&#39;$DOMAIN =&quot;example.com&quot;
      when<span class="token punctuation">:</span>on_success
    <span class="token punctuation">-</span> when<span class="token punctuation">:</span>on success
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="rules-exists-文件存在" tabindex="-1"><a class="header-anchor" href="#rules-exists-文件存在" aria-hidden="true">#</a> rules-exists-文件存在</h5><ul><li>接受文件路径数组。</li><li>当仓库中存在指定的文件时操作。</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token comment">#parallel:5</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">exists</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Jenkinsfile
      <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
    <span class="token punctuation">-</span> <span class="token key atrule">changes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Jenkinsfile
      <span class="token key atrule">when</span><span class="token punctuation">:</span> on_success
    <span class="token punctuation">-</span> if;&#39;$DOMAIN ==&quot;example.com&quot;
      <span class="token key atrule">when</span><span class="token punctuation">:</span> on_success
    <span class="token punctuation">-</span> <span class="token key atrule">when</span><span class="token punctuation">:</span> on_success
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="rules-allow-failure-允许失败" tabindex="-1"><a class="header-anchor" href="#rules-allow-failure-允许失败" aria-hidden="true">#</a> rules-allow_failure-允许失败</h5><ul><li>使用allow failure: true</li><li>rules: 在不停止管道本身的情况下允许作业失败或手动作业等待操作。</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> <span class="token string">&quot;echo Hello,Rules!&quot;</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> if<span class="token punctuation">:</span>&#39;$CI_MERGE_REQUEST_TARGET_BRANCH_NAME ==&quot;master&quot;
      <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
      <span class="token key atrule">allow_failure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在此示例中，如果第一个规则匹配，则作业将具有以下when: manual和allow_failure: true。</p><h4 id="_4-1-17-workflow" tabindex="-1"><a class="header-anchor" href="#_4-1-17-workflow" aria-hidden="true">#</a> 4.1.17 workflow</h4><p>workflow -rules - 管道创建</p><ul><li>顶级workf1ow关键字适用于整个管道，并将确定是否创建管道。</li><li>when: 可以设置为always或never, 如果未提供，则默认值always。</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com
  
<span class="token key atrule">workflow</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> &#39;$DOMAIN &quot;example.com&quot;&quot;
    <span class="token punctuation">-</span> <span class="token key atrule">when</span><span class="token punctuation">:</span> always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-18-cache" tabindex="-1"><a class="header-anchor" href="#_4-1-18-cache" aria-hidden="true">#</a> 4.1.18 cache</h4><p>缓存</p><ul><li>存储编译项目所需的运行时依赖项，指定项目工作空间中需要在j0b之间缓存的文件或目录。</li><li>全局cache定义在job之外，针对所有job生效。job中cache优先于全局。</li></ul><p><strong>cache：paths</strong></p><ul><li>在job build中定义缓存，将会缓存target目录下的所有.jar文件。</li><li>当在全局定义了cache:paths会被job中覆盖。以下实例将缓存target目录。</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>build;
  <span class="token key atrule">script</span><span class="token punctuation">:</span> test
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> target/<span class="token important">*.jar</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> my/files
    
<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> echo &quot;hello&quot;
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">key</span><span class="token punctuation">:</span> build
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> target/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: key - 缓存标记</strong></p><p>为缓存做个标记，可以配置job、分支为key来实现分支、作业特定的缓存。为不同job定义了不同的cache:key时，会为每个job分配一个独立的cache。cache:key 变量可以使用任何预定义变量，默认default。从GitLab9.0开始，默认情况下所有内容都在管道和作业之间共享。</p><p>按照分支来设置缓存</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">[</span>CI_COMMIT_REF_SLUG<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: key: files:</strong></p><p>文件变化自动创建缓存</p><p>files:文件发生变化自动重新生成缓存(files最多指定两个文件)，提交的时候检查指定的文件。根据指定的文件生成密钥计算SHA校验和，如果文件未改变值为default。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cache:
  key:
    files:
      - Gemfile.lock
      - package.json I
  paths:
    - vendor/ruby
    - node_modules
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: key: prefix:</strong></p><p>组合生成SHA校验和</p><p>prefix: 允许给定prefix的值与指定文件生成的秘钥组合。在这里定义了全局的cache，如果文件发生变化则值为rspec-xxx111111111222222，未发生变化为rspec-default。</p><p><img src="/assets/image-20221114123402861-089a5d46.png" alt="image-20221114123402861"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span>
    <span class="token key atrule">files</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Gemfile.lock
    <span class="token key atrule">prefix</span><span class="token punctuation">:</span> $<span class="token punctuation">[</span>CIJOB_NAME)
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> vendor/ruby
  <span class="token key atrule">rspec</span><span class="token punctuation">:</span>
    <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> bundle exec rspec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: policy:</strong> - 缓存策略</p><p>默认：在执行开始时下载文件，并在结束时重新上传文件。</p><p>policy:pull 跳过下载步骤，policy: push 跳过上传步骤</p><p><img src="/assets/image-20221114124210197-9b00aaae.png" alt="image-20221114124210197"></p><h4 id="_4-1-19-artifacts" tabindex="-1"><a class="header-anchor" href="#_4-1-19-artifacts" aria-hidden="true">#</a> 4.1.19 artifacts</h4><p>用于指定在作业成功或者失败时应附加到作业的文件或目录的列表。作业完成后，工件将被发送到GitLab,并可在GitLab UI中下载。</p><p>制品，就是Java项目编程完成后的Jar包。其他语言的可能是一些XMl文件，或者HTML文件等。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> target/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>artifacts-制品创建</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">default-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mvn test <span class="token punctuation">-</span>U
  <span class="token key atrule">except</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> tags

<span class="token key atrule">release-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mvn package <span class="token punctuation">-</span>U
  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> target/<span class="token important">*.war</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> tags
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-20-dependencies" tabindex="-1"><a class="header-anchor" href="#_4-1-20-dependencies" aria-hidden="true">#</a> 4.1.20 dependencies</h4></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 895252461@qq.com">诗人都藏在水底</span>,<!--]--><!--[--><span class="contributor" title="email: 895252461@qq.com">xuliang</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="Git 使用" class="vp-link nav-link prev nav-link prev" href="/tools/git/git.html"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Git 使用</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-e53dd85b.js" defer></script>
  </body>
</html>
