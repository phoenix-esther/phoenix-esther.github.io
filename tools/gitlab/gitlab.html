<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.59" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>Gitlab è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º | Java æˆç¥ä¹‹è·¯</title><meta name="description" content="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª VuePress ç«™ç‚¹">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-f1658162.css" as="style"><link rel="stylesheet" href="/assets/style-f1658162.css">
    <link rel="modulepreload" href="/assets/app-0de2ad7c.js"><link rel="modulepreload" href="/assets/framework-5dde3bca.js"><link rel="modulepreload" href="/assets/gitlab.html-09e004bc.js"><link rel="modulepreload" href="/assets/gitlab.html-ee616321.js"><link rel="prefetch" href="/assets/index.html-95370337.js" as="script"><link rel="prefetch" href="/assets/database-overview.html-03717758.js" as="script"><link rel="prefetch" href="/assets/java-overview.html-44310673.js" as="script"><link rel="prefetch" href="/assets/middleware-overview.html-be4fdd51.js" as="script"><link rel="prefetch" href="/assets/quality-overview.html-a8e9bda4.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-overview.html-87409649.js" as="script"><link rel="prefetch" href="/assets/gitbook.html-fb8a8229.js" as="script"><link rel="prefetch" href="/assets/tools-overview.html-67f69dba.js" as="script"><link rel="prefetch" href="/assets/mongo.html-50bc6f68.js" as="script"><link rel="prefetch" href="/assets/mysql-advance.html-e06a1ce2.js" as="script"><link rel="prefetch" href="/assets/mysql-apply.html-a6b2d1c2.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-d91fdb11.js" as="script"><link rel="prefetch" href="/assets/mysql-devops.html-0b9fc6f6.js" as="script"><link rel="prefetch" href="/assets/redis-base.html-fbc05584.js" as="script"><link rel="prefetch" href="/assets/redis-cluster.html-07744daf.js" as="script"><link rel="prefetch" href="/assets/redis-overview.html-1bcd1133.js" as="script"><link rel="prefetch" href="/assets/java-base.html-7071cb31.js" as="script"><link rel="prefetch" href="/assets/java-sql.html-c8be449f.js" as="script"><link rel="prefetch" href="/assets/java-time.html-2c855f9e.js" as="script"><link rel="prefetch" href="/assets/java-collection-list.html-2207ee3a.js" as="script"><link rel="prefetch" href="/assets/java-collection-map.html-d30b93e7.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-base.html-8983a76d.js" as="script"><link rel="prefetch" href="/assets/Java-concurrent-container.html-3334407b.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-interview.html-bbc0a621.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-lock.html-ebf0a63c.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-pool.html-7a290f95.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-tools.html-01a740a1.js" as="script"><link rel="prefetch" href="/assets/java-bio.html-ceca2a90.js" as="script"><link rel="prefetch" href="/assets/java-io-base.html-40d5757f.js" as="script"><link rel="prefetch" href="/assets/java-nio.html-b002c449.js" as="script"><link rel="prefetch" href="/assets/Javaå†…å­˜æ¨¡å‹.html-13f8a203.js" as="script"><link rel="prefetch" href="/assets/JVMå†…å­˜ç»“æ„.html-fb577c69.js" as="script"><link rel="prefetch" href="/assets/JVMåƒåœ¾å›æ”¶.html-852577fd.js" as="script"><link rel="prefetch" href="/assets/JVMæ¦‚è§ˆ.html-eda595c7.js" as="script"><link rel="prefetch" href="/assets/JVMç±»åŠ è½½å™¨.html-ee6c0eb8.js" as="script"><link rel="prefetch" href="/assets/JVMç±»æ–‡ä»¶ç»“æ„.html-6aca785b.js" as="script"><link rel="prefetch" href="/assets/JVMè°ƒä¼˜.html-ad63cd2e.js" as="script"><link rel="prefetch" href="/assets/java-servlet.html-ef72b065.js" as="script"><link rel="prefetch" href="/assets/java-lambda.html-c21b5e3b.js" as="script"><link rel="prefetch" href="/assets/java-stream.html-797890ef.js" as="script"><link rel="prefetch" href="/assets/HikariCP-base.html-89b6d274.js" as="script"><link rel="prefetch" href="/assets/HikariCP-source.html-71542b59.js" as="script"><link rel="prefetch" href="/assets/jackson-overview.html-58553b4c.js" as="script"><link rel="prefetch" href="/assets/kafka-broker.html-8091a112.js" as="script"><link rel="prefetch" href="/assets/kafka-consumer.html-f5b2d049.js" as="script"><link rel="prefetch" href="/assets/kafka-old.html-1448d038.js" as="script"><link rel="prefetch" href="/assets/kafka-overview.html-8dd9a49b.js" as="script"><link rel="prefetch" href="/assets/kafka-producer.html-5dc9b65d.js" as="script"><link rel="prefetch" href="/assets/spring-kafka.html-bc75ec45.js" as="script"><link rel="prefetch" href="/assets/log-framework.html-76a57287.js" as="script"><link rel="prefetch" href="/assets/1.Hello World.html-b2ffe65b.js" as="script"><link rel="prefetch" href="/assets/2.Global Config.html-6a02822f.js" as="script"><link rel="prefetch" href="/assets/index.html-f37393b8.js" as="script"><link rel="prefetch" href="/assets/nginx.html-94f097bd.js" as="script"><link rel="prefetch" href="/assets/sharding-sphere.html-47e07fb1.js" as="script"><link rel="prefetch" href="/assets/shiro-overview.html-66b81094.js" as="script"><link rel="prefetch" href="/assets/data-structure-list.html-5ba0105d.js" as="script"><link rel="prefetch" href="/assets/data-structure-overview.html-85d0b05a.js" as="script"><link rel="prefetch" href="/assets/data-structure-tree.html-b7a2b7b5.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-63e9b96e.js" as="script"><link rel="prefetch" href="/assets/design-adapter.html-ca7d4d0c.js" as="script"><link rel="prefetch" href="/assets/design-bridge.html-f70c2b16.js" as="script"><link rel="prefetch" href="/assets/design-builder.html-8d44b4e2.js" as="script"><link rel="prefetch" href="/assets/design-chain.html-73c4f586.js" as="script"><link rel="prefetch" href="/assets/design-command.html-d6dfccee.js" as="script"><link rel="prefetch" href="/assets/design-composite.html-756fd116.js" as="script"><link rel="prefetch" href="/assets/design-decorator.html-826f2e24.js" as="script"><link rel="prefetch" href="/assets/design-facade.html-c448fc15.js" as="script"><link rel="prefetch" href="/assets/design-factory.html-902a65a0.js" as="script"><link rel="prefetch" href="/assets/design-flyweight.html-4459624e.js" as="script"><link rel="prefetch" href="/assets/design-interpreter.html-c630c412.js" as="script"><link rel="prefetch" href="/assets/design-iterator.html-ab1b6e0a.js" as="script"><link rel="prefetch" href="/assets/design-mediator.html-0a45de36.js" as="script"><link rel="prefetch" href="/assets/design-memento.html-4208519d.js" as="script"><link rel="prefetch" href="/assets/design-observer.html-7d34acf8.js" as="script"><link rel="prefetch" href="/assets/design-overview.html-8ae1eaca.js" as="script"><link rel="prefetch" href="/assets/design-prototype.html-843f1ba1.js" as="script"><link rel="prefetch" href="/assets/design-proxy.html-b51e83f1.js" as="script"><link rel="prefetch" href="/assets/design-singleton.html-cb4b0e72.js" as="script"><link rel="prefetch" href="/assets/design-state.html-514399be.js" as="script"><link rel="prefetch" href="/assets/design-strategy.html-586d3ac2.js" as="script"><link rel="prefetch" href="/assets/design-template.html-12aa47cf.js" as="script"><link rel="prefetch" href="/assets/design-visitor.html-ed58259a.js" as="script"><link rel="prefetch" href="/assets/æ»‘åŠ¨çª—å£.html-d4efa51b.js" as="script"><link rel="prefetch" href="/assets/linux-overview.html-f8205a0e.js" as="script"><link rel="prefetch" href="/assets/encoding.html-bb7cac1e.js" as="script"><link rel="prefetch" href="/assets/encryption-algorithm.html-47d69cef.js" as="script"><link rel="prefetch" href="/assets/temp.html-60b41fd7.js" as="script"><link rel="prefetch" href="/assets/spring-source-overview.html-3ac2c8f4.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-9b47aa32.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-d4e7a5e5.js" as="script"><link rel="prefetch" href="/assets/spring-boot-condition.html-f38f1a16.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-commons-base.html-b68d3933.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-182fff59.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-gateway.html-b56fde18.js" as="script"><link rel="prefetch" href="/assets/nacos-client-discovery.html-050d84e4.js" as="script"><link rel="prefetch" href="/assets/nacos-overview.html-755394c0.js" as="script"><link rel="prefetch" href="/assets/cloud-openfeign-action.html-6173210d.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-46fdc141.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-2f5d4e70.js" as="script"><link rel="prefetch" href="/assets/sentinel-source.html-db79abe0.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-sentinel.html-031a7566.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-90df4bc0.js" as="script"><link rel="prefetch" href="/assets/git.html-f3d86d29.js" as="script"><link rel="prefetch" href="/assets/junit4.html-7674a247.js" as="script"><link rel="prefetch" href="/assets/junit5.html-1088960a.js" as="script"><link rel="prefetch" href="/assets/maven.html-c5f718a8.js" as="script"><link rel="prefetch" href="/assets/reactor.html-b7f3a608.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-init.html-76aa84f3.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-listener.html-8020b96c.js" as="script"><link rel="prefetch" href="/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/assets/index.html-33e4c2a2.js" as="script"><link rel="prefetch" href="/assets/index.html-8ad96e03.js" as="script"><link rel="prefetch" href="/assets/index.html-b23d2171.js" as="script"><link rel="prefetch" href="/assets/index.html-8a709d0c.js" as="script"><link rel="prefetch" href="/assets/index.html-9488715d.js" as="script"><link rel="prefetch" href="/assets/index.html-fb3dd3ef.js" as="script"><link rel="prefetch" href="/assets/index.html-42d88d20.js" as="script"><link rel="prefetch" href="/assets/index.html-87f3d90a.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6c2eaf.js" as="script"><link rel="prefetch" href="/assets/index.html-df28bb11.js" as="script"><link rel="prefetch" href="/assets/index.html-78d325c5.js" as="script"><link rel="prefetch" href="/assets/index.html-0c05d7f0.js" as="script"><link rel="prefetch" href="/assets/database-overview.html-8e20b9c4.js" as="script"><link rel="prefetch" href="/assets/java-overview.html-110664f3.js" as="script"><link rel="prefetch" href="/assets/middleware-overview.html-23551371.js" as="script"><link rel="prefetch" href="/assets/quality-overview.html-c678a80a.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-overview.html-4f455e53.js" as="script"><link rel="prefetch" href="/assets/gitbook.html-82c9e715.js" as="script"><link rel="prefetch" href="/assets/tools-overview.html-ef94410e.js" as="script"><link rel="prefetch" href="/assets/mongo.html-b49ed607.js" as="script"><link rel="prefetch" href="/assets/mysql-advance.html-04da5f50.js" as="script"><link rel="prefetch" href="/assets/mysql-apply.html-93145a97.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-d6966f7f.js" as="script"><link rel="prefetch" href="/assets/mysql-devops.html-6b9ccca1.js" as="script"><link rel="prefetch" href="/assets/redis-base.html-2d4d81f6.js" as="script"><link rel="prefetch" href="/assets/redis-cluster.html-dd1dc967.js" as="script"><link rel="prefetch" href="/assets/redis-overview.html-7f2546f3.js" as="script"><link rel="prefetch" href="/assets/java-base.html-2a2487a8.js" as="script"><link rel="prefetch" href="/assets/java-sql.html-3235fb3f.js" as="script"><link rel="prefetch" href="/assets/java-time.html-c6bd518b.js" as="script"><link rel="prefetch" href="/assets/java-collection-list.html-1f5f5479.js" as="script"><link rel="prefetch" href="/assets/java-collection-map.html-9eaf3f79.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-base.html-ae299cb8.js" as="script"><link rel="prefetch" href="/assets/Java-concurrent-container.html-ebd6fec8.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-interview.html-07fbfa4a.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-lock.html-994ad73f.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-pool.html-ed4a1de5.js" as="script"><link rel="prefetch" href="/assets/java-concurrent-tools.html-8880da92.js" as="script"><link rel="prefetch" href="/assets/java-bio.html-df6fc911.js" as="script"><link rel="prefetch" href="/assets/java-io-base.html-77f89736.js" as="script"><link rel="prefetch" href="/assets/java-nio.html-bcccb204.js" as="script"><link rel="prefetch" href="/assets/Javaå†…å­˜æ¨¡å‹.html-7383b9cd.js" as="script"><link rel="prefetch" href="/assets/JVMå†…å­˜ç»“æ„.html-8d99ddf3.js" as="script"><link rel="prefetch" href="/assets/JVMåƒåœ¾å›æ”¶.html-304d9a2d.js" as="script"><link rel="prefetch" href="/assets/JVMæ¦‚è§ˆ.html-8bd4b42f.js" as="script"><link rel="prefetch" href="/assets/JVMç±»åŠ è½½å™¨.html-77d4aeac.js" as="script"><link rel="prefetch" href="/assets/JVMç±»æ–‡ä»¶ç»“æ„.html-9a5ae840.js" as="script"><link rel="prefetch" href="/assets/JVMè°ƒä¼˜.html-abf07289.js" as="script"><link rel="prefetch" href="/assets/java-servlet.html-8537acfe.js" as="script"><link rel="prefetch" href="/assets/java-lambda.html-e158a557.js" as="script"><link rel="prefetch" href="/assets/java-stream.html-ad9eb0ed.js" as="script"><link rel="prefetch" href="/assets/HikariCP-base.html-f749e904.js" as="script"><link rel="prefetch" href="/assets/HikariCP-source.html-4651cd3f.js" as="script"><link rel="prefetch" href="/assets/jackson-overview.html-1ff735d9.js" as="script"><link rel="prefetch" href="/assets/kafka-broker.html-78790cd6.js" as="script"><link rel="prefetch" href="/assets/kafka-consumer.html-3872d15c.js" as="script"><link rel="prefetch" href="/assets/kafka-old.html-4a95df91.js" as="script"><link rel="prefetch" href="/assets/kafka-overview.html-03135409.js" as="script"><link rel="prefetch" href="/assets/kafka-producer.html-f9cc0e5f.js" as="script"><link rel="prefetch" href="/assets/spring-kafka.html-0eaac2b9.js" as="script"><link rel="prefetch" href="/assets/log-framework.html-13f8b728.js" as="script"><link rel="prefetch" href="/assets/1.Hello World.html-254e923d.js" as="script"><link rel="prefetch" href="/assets/2.Global Config.html-34377212.js" as="script"><link rel="prefetch" href="/assets/index.html-6f5477e7.js" as="script"><link rel="prefetch" href="/assets/nginx.html-64c0a015.js" as="script"><link rel="prefetch" href="/assets/sharding-sphere.html-bb3296bb.js" as="script"><link rel="prefetch" href="/assets/shiro-overview.html-f4bdb923.js" as="script"><link rel="prefetch" href="/assets/data-structure-list.html-0f23b38b.js" as="script"><link rel="prefetch" href="/assets/data-structure-overview.html-f1e03c1d.js" as="script"><link rel="prefetch" href="/assets/data-structure-tree.html-a44ba30f.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-107f9ebe.js" as="script"><link rel="prefetch" href="/assets/design-adapter.html-77286312.js" as="script"><link rel="prefetch" href="/assets/design-bridge.html-00672c18.js" as="script"><link rel="prefetch" href="/assets/design-builder.html-27d852c8.js" as="script"><link rel="prefetch" href="/assets/design-chain.html-74047f74.js" as="script"><link rel="prefetch" href="/assets/design-command.html-943a7340.js" as="script"><link rel="prefetch" href="/assets/design-composite.html-463bbe40.js" as="script"><link rel="prefetch" href="/assets/design-decorator.html-34575490.js" as="script"><link rel="prefetch" href="/assets/design-facade.html-6a642241.js" as="script"><link rel="prefetch" href="/assets/design-factory.html-558c3336.js" as="script"><link rel="prefetch" href="/assets/design-flyweight.html-9a7105fb.js" as="script"><link rel="prefetch" href="/assets/design-interpreter.html-19cea0ae.js" as="script"><link rel="prefetch" href="/assets/design-iterator.html-55db2bf3.js" as="script"><link rel="prefetch" href="/assets/design-mediator.html-a639304c.js" as="script"><link rel="prefetch" href="/assets/design-memento.html-6453f1e1.js" as="script"><link rel="prefetch" href="/assets/design-observer.html-ed658ad7.js" as="script"><link rel="prefetch" href="/assets/design-overview.html-03776800.js" as="script"><link rel="prefetch" href="/assets/design-prototype.html-8fdfdb40.js" as="script"><link rel="prefetch" href="/assets/design-proxy.html-d9e3ef89.js" as="script"><link rel="prefetch" href="/assets/design-singleton.html-8c4de69b.js" as="script"><link rel="prefetch" href="/assets/design-state.html-aeddd299.js" as="script"><link rel="prefetch" href="/assets/design-strategy.html-79c37426.js" as="script"><link rel="prefetch" href="/assets/design-template.html-61d102d5.js" as="script"><link rel="prefetch" href="/assets/design-visitor.html-fefdc2c4.js" as="script"><link rel="prefetch" href="/assets/æ»‘åŠ¨çª—å£.html-a5cf52bf.js" as="script"><link rel="prefetch" href="/assets/linux-overview.html-4c5f0a4a.js" as="script"><link rel="prefetch" href="/assets/encoding.html-f5906218.js" as="script"><link rel="prefetch" href="/assets/encryption-algorithm.html-9a1f16a2.js" as="script"><link rel="prefetch" href="/assets/temp.html-bc9bd901.js" as="script"><link rel="prefetch" href="/assets/spring-source-overview.html-11cf77bb.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-base.html-f1d5d10e.js" as="script"><link rel="prefetch" href="/assets/BeanPostProcessor-ConfigurationClassPostProcessor.html-a96eba50.js" as="script"><link rel="prefetch" href="/assets/spring-boot-condition.html-925c1f11.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-commons-base.html-08854838.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-loadbalancer.html-6f95c5b7.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-gateway.html-3b5bcf8b.js" as="script"><link rel="prefetch" href="/assets/nacos-client-discovery.html-79247510.js" as="script"><link rel="prefetch" href="/assets/nacos-overview.html-13cec71c.js" as="script"><link rel="prefetch" href="/assets/cloud-openfeign-action.html-0f222092.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-openfeign.html-80b0fc34.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-ribbon.html-e2d9af9b.js" as="script"><link rel="prefetch" href="/assets/sentinel-source.html-692a3324.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-sentinel.html-bf9c4618.js" as="script"><link rel="prefetch" href="/assets/spring-cloud-alibaba-seate.html-37eed2ce.js" as="script"><link rel="prefetch" href="/assets/git.html-87ad5d64.js" as="script"><link rel="prefetch" href="/assets/junit4.html-e113cced.js" as="script"><link rel="prefetch" href="/assets/junit5.html-49a7387c.js" as="script"><link rel="prefetch" href="/assets/maven.html-dfa1482f.js" as="script"><link rel="prefetch" href="/assets/reactor.html-caf126d4.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-init.html-c9794d73.js" as="script"><link rel="prefetch" href="/assets/spring-source-web-listener.html-22512f68.js" as="script"><link rel="prefetch" href="/assets/404.html-f08c28a7.js" as="script"><link rel="prefetch" href="/assets/index.html-703427c5.js" as="script"><link rel="prefetch" href="/assets/index.html-d81ead65.js" as="script"><link rel="prefetch" href="/assets/index.html-89246e48.js" as="script"><link rel="prefetch" href="/assets/index.html-6a96e1d8.js" as="script"><link rel="prefetch" href="/assets/index.html-3f2fdf99.js" as="script"><link rel="prefetch" href="/assets/index.html-def5ae53.js" as="script"><link rel="prefetch" href="/assets/index.html-da4568d9.js" as="script"><link rel="prefetch" href="/assets/index.html-855b7bae.js" as="script"><link rel="prefetch" href="/assets/index.html-0d635afd.js" as="script"><link rel="prefetch" href="/assets/index.html-555be4ca.js" as="script"><link rel="prefetch" href="/assets/index.html-e93144aa.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-bc08675d.js" as="script"><link rel="prefetch" href="/assets/mermaid-mindmap.esm.min-d48ac69f.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">Java æˆç¥ä¹‹è·¯</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/java/java-overview.html" class="nav-link" aria-label="Java ç¬”è®°"><!---->Java ç¬”è®°<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring ç¬”è®°"><span class="title"><!---->Spring ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring IOC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/test02.html" class="nav-link" aria-label="Spring IOCè¯¦è§£"><!---->Spring IOCè¯¦è§£<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring åç½®å¤„ç†å™¨è§£æ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/spring-bean-post-processor/BeanPostProcessor-base.html" class="nav-link" aria-label="Spring åç½®å¤„ç†å™¨æ€»è§ˆ"><!---->Spring åç½®å¤„ç†å™¨æ€»è§ˆ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring Cloud"><span class="title"><!---->Spring Cloud</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-overview.html" class="nav-link" aria-label="Spring Cloud Overview"><!---->Spring Cloud Overview<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-nacos.md" class="nav-link" aria-label="Spring Cloud Nacos"><!---->Spring Cloud Nacos<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-sentinel.md" class="nav-link" aria-label="Spring Cloud Sentinel"><!---->Spring Cloud Sentinel<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-alibaba-seate.md" class="nav-link" aria-label="Spring Cloud Seate"><!---->Spring Cloud Seate<!----></a></li><li class="dropdown-item"><a href="/spring-cloud/spring-cloud-ribbon/spring-cloud-ribbon.html" class="nav-link" aria-label="Spring Cloud Ribbon"><!---->Spring Cloud Ribbon<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/database/database-overview.html" class="nav-link" aria-label="æ•°æ®åº“"><!---->æ•°æ®åº“<!----></a></div><div class="nav-item hide-in-mobile"><a href="/quality/quality-overview.html" class="nav-link" aria-label="è‡ªæˆ‘ä¿®å…»"><!---->è‡ªæˆ‘ä¿®å…»<!----></a></div><div class="nav-item hide-in-mobile"><a href="/middleware/middleware-overview.html" class="nav-link" aria-label="ä¸­é—´ä»¶"><!---->ä¸­é—´ä»¶<!----></a></div><div class="nav-item hide-in-mobile"><a href="/tools/tools-overview.html" class="nav-link" aria-label="å·¥å…·åŒ…"><!---->å·¥å…·åŒ…<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/tools/tools-overview.html" class="nav-link sidebar-link sidebar-page" aria-label="å¸¸ç”¨å·¥å…·æ€»ç»“"><!---->å¸¸ç”¨å·¥å…·æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">å¸¸ç”¨å¼€å‘å·¥å…·</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/tools/junit/junit5.html" class="nav-link sidebar-link sidebar-page" aria-label="JUnit5ä½¿ç”¨"><!---->JUnit5ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/junit/junit4.html" class="nav-link sidebar-link sidebar-page" aria-label="Junit 4"><!---->Junit 4<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/maven/maven.html" class="nav-link sidebar-link sidebar-page" aria-label="Maven"><!---->Maven<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/git.html" class="nav-link sidebar-link sidebar-page" aria-label="Git ä½¿ç”¨"><!---->Git ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/tools/gitlab/gitlab.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Gitlab è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º"><!---->Gitlab è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#ä¸€-ci-cdæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ï¼šCI/CDæ˜¯ä»€ä¹ˆï¼Ÿ"><!---->ä¸€ï¼šCI/CDæ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><!---->æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#äºŒ-gitlabçš„å®‰è£…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒï¼šGitLabçš„å®‰è£…"><!---->äºŒï¼šGitLabçš„å®‰è£…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#ä¸‰-gitlab-runner" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ï¼šGitLab Runner"><!---->ä¸‰ï¼šGitLab Runner<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-1-gitlab-runner-ç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 GitLab Runner ç®€ä»‹"><!---->3.1 GitLab Runner ç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-2-gitlab-runnerå®‰è£…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 GitLab Runnerå®‰è£…"><!---->3.2 GitLab Runnerå®‰è£…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-3-gitlab-runner-æ³¨å†Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 GitLab Runner æ³¨å†Œ"><!---->3.3 GitLab Runner æ³¨å†Œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-4-gitlab-runner-æ‰§è¡Œå™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 GitLab Runner æ‰§è¡Œå™¨"><!---->3.4 GitLab Runner æ‰§è¡Œå™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-5-gitlab-runner-å‘½ä»¤æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.5 GitLab Runner å‘½ä»¤æ€»ç»“"><!---->3.5 GitLab Runner å‘½ä»¤æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-6-è¿è¡Œæµæ°´çº¿ä»»åŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.6 è¿è¡Œæµæ°´çº¿ä»»åŠ¡"><!---->3.6 è¿è¡Œæµæ°´çº¿ä»»åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#å››-gitlab-pipline" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å››ï¼šGitLab PipLine"><!---->å››ï¼šGitLab PipLine<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/gitlab/gitlab.html#_4-1-gitlab-pipline-è¯­æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 GitLab Pipline è¯­æ³•"><!---->4.1 GitLab Pipline è¯­æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Gitlab è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-10-30T12:56:09.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 21 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT21M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#ä¸€-ci-cdæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">ä¸€ï¼šCI/CDæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#äºŒ-gitlabçš„å®‰è£…" class="router-link-active router-link-exact-active toc-link level2">äºŒï¼šGitLabçš„å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#ä¸‰-gitlab-runner" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ï¼šGitLab Runner</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-1-gitlab-runner-ç®€ä»‹" class="router-link-active router-link-exact-active toc-link level3">3.1 GitLab Runner ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-2-gitlab-runnerå®‰è£…" class="router-link-active router-link-exact-active toc-link level3">3.2 GitLab Runnerå®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-3-gitlab-runner-æ³¨å†Œ" class="router-link-active router-link-exact-active toc-link level3">3.3 GitLab Runner æ³¨å†Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-4-gitlab-runner-æ‰§è¡Œå™¨" class="router-link-active router-link-exact-active toc-link level3">3.4 GitLab Runner æ‰§è¡Œå™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-5-gitlab-runner-å‘½ä»¤æ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">3.5 GitLab Runner å‘½ä»¤æ€»ç»“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_3-6-è¿è¡Œæµæ°´çº¿ä»»åŠ¡" class="router-link-active router-link-exact-active toc-link level3">3.6 è¿è¡Œæµæ°´çº¿ä»»åŠ¡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#å››-gitlab-pipline" class="router-link-active router-link-exact-active toc-link level2">å››ï¼šGitLab PipLine</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/gitlab/gitlab.html#_4-1-gitlab-pipline-è¯­æ³•" class="router-link-active router-link-exact-active toc-link level3">4.1 GitLab Pipline è¯­æ³•</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="gitlab-è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º" tabindex="-1"><a class="header-anchor" href="#gitlab-è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º" aria-hidden="true">#</a> Gitlab è‡ªåŠ¨å‘å¸ƒæµç¨‹æ„å»º</h1><h2 id="ä¸€-ci-cdæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸€-ci-cdæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> ä¸€ï¼šCI/CDæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æˆ‘ä»¬çš„å¼€å‘æ¨¡å¼ç»å†äº†å¦‚ä¸‹çš„è½¬å˜ï¼šç€‘å¸ƒæ¨¡å‹-&gt;æ•æ·å¼€å‘â†’<a href="https://cloud.tencent.com/product/coding?from=10680" target="_blank" rel="noopener noreferrer">DevOps<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>(Developmentã€Operationsçš„ç»„åˆè¯ï¼Œæ˜¯ä¸€ç»„è¿‡ç¨‹ã€æ–¹æ³•ä¸ç³»ç»Ÿçš„ç»Ÿç§°)</p><p>åæ¥éšç€DevOpsçš„å…´èµ·ï¼Œå‡ºç°äº†æŒç»­é›†æˆï¼ˆContinuous Integrationï¼‰ã€æŒç»­äº¤ä»˜ï¼ˆContinuous Deliveryï¼‰ ã€<a href="https://cloud.tencent.com/product/coding-cd?from=10680" target="_blank" rel="noopener noreferrer">æŒç»­éƒ¨ç½²<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ˆContinuous Deploymentï¼‰ çš„æ–°æ–¹æ³•ï¼Œå…³äºæŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š</p><ul><li><strong>æŒç»­é›†æˆ</strong>çš„é‡ç‚¹æ˜¯å°†å„ä¸ªå¼€å‘äººå‘˜çš„å·¥ä½œé›†åˆåˆ°ä¸€ä¸ªä»£ç ä»“åº“ä¸­ã€‚é€šå¸¸ï¼Œæ¯å¤©éƒ½è¦è¿›è¡Œå‡ æ¬¡ï¼Œä¸»è¦ç›®çš„æ˜¯å°½æ—©å‘ç°é›†æˆé”™è¯¯ï¼Œä½¿å›¢é˜Ÿæ›´åŠ ç´§å¯†ç»“åˆï¼Œæ›´å¥½åœ°åä½œã€‚</li><li><strong>æŒç»­äº¤ä»˜</strong>çš„ç›®çš„æ˜¯æœ€å°åŒ–éƒ¨ç½²æˆ–é‡Šæ”¾è¿‡ç¨‹ä¸­å›ºæœ‰çš„æ‘©æ“¦ã€‚å®ƒçš„å®ç°é€šå¸¸èƒ½å¤Ÿå°†æ„å»ºéƒ¨ç½²çš„æ¯ä¸ªæ­¥éª¤è‡ªåŠ¨åŒ–ï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»èƒ½å¤Ÿå®‰å…¨åœ°å®Œæˆä»£ç å‘å¸ƒï¼ˆç†æƒ³æƒ…å†µä¸‹ï¼‰ã€‚</li><li><strong>æŒç»­éƒ¨ç½²</strong>æ˜¯ä¸€ç§æ›´é«˜ç¨‹åº¦çš„è‡ªåŠ¨åŒ–ï¼Œæ— è®ºä½•æ—¶å¯¹ä»£ç è¿›è¡Œé‡å¤§æ›´æ”¹ï¼Œéƒ½ä¼šè‡ªåŠ¨è¿›è¡Œæ„å»º/éƒ¨ç½²ã€‚</li></ul><h3 id="æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æŒç»­é›†æˆçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æŒç»­é›†æˆå¯ä»¥ä½¿é—®é¢˜å°½æ—©æš´éœ²ï¼Œä»è€Œä¹Ÿé™ä½äº†è§£å†³é—®é¢˜çš„éš¾åº¦ï¼Œæ­£å¦‚è€é©¬æ‰€è¯´ï¼ŒæŒç»­é›†æˆæ— æ³•æ¶ˆé™¤bugï¼Œä½†å´èƒ½å¤§å¤§é™ä½ä¿®å¤çš„éš¾åº¦å’Œæ—¶é—´ã€‚</p><h3 id="æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æŒç»­äº¤ä»˜çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æŒç»­äº¤ä»˜çš„å¥½å¤„åœ¨äºå¿«é€Ÿè·å–ç”¨æˆ·åé¦ˆï¼›é€‚åº”å¸‚åœºå˜åŒ–å’Œå•†ä¸šç­–ç•¥çš„å˜åŒ–ã€‚å¼€å‘å›¢é˜Ÿä¿è¯æ¯æ¬¡æäº¤çš„ä¿®æ”¹éƒ½æ˜¯å¯ä¸Šçº¿çš„ä¿®æ”¹ï¼Œé‚£ä¹ˆå†³å®šä½•æ—¶ä¸Šçº¿ï¼Œä¸Šçº¿å“ªéƒ¨åˆ†åŠŸèƒ½åˆ™å®Œå…¨ç”±äº§å“ä¸šåŠ¡å›¢é˜Ÿå†³å®šã€‚</p><p>è™½ç„¶æŒç»­äº¤ä»˜æœ‰æ˜¾è‘—çš„ä¼˜ç‚¹ï¼Œä½†ä¹Ÿæœ‰ä¸æˆç«‹çš„æ—¶å€™ï¼Œæ¯”å¦‚å¯¹äºåµŒå…¥å¼ç³»ç»Ÿçš„å¼€å‘ï¼Œå¾€å¾€éœ€è¦è½¯ç¡¬ä»¶çš„é…åˆã€‚</p><h3 id="æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æŒç»­éƒ¨ç½²çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æŒç»­éƒ¨ç½²çš„ç›®æ ‡æ˜¯é€šè¿‡å‡å°‘æ‰¹é‡å·¥ä½œçš„å¤§å°ï¼Œå¹¶åŠ å¿«å›¢é˜Ÿå·¥ä½œçš„èŠ‚å¥ï¼Œå¸®åŠ©å¼€å‘å›¢é˜Ÿåœ¨å…¶å¼€å‘æµç¨‹ä¸­æ¶ˆé™¤æµªè´¹ã€‚è¿™ä½¿å›¢é˜Ÿèƒ½å¤Ÿä¸€ç›´å¤„äºä¸€ç§å¯æŒç»­çš„å¹³ç¨³æµçŠ¶æ€ï¼Œ è®©å›¢é˜Ÿæ›´å®¹æ˜“å»åˆ›æ–°ã€è¯•éªŒï¼Œå¹¶è¾¾åˆ°å¯æŒç»­çš„ç”Ÿäº§ç‡</p><h2 id="äºŒ-gitlabçš„å®‰è£…" tabindex="-1"><a class="header-anchor" href="#äºŒ-gitlabçš„å®‰è£…" aria-hidden="true">#</a> äºŒï¼šGitLabçš„å®‰è£…</h2><h2 id="ä¸‰-gitlab-runner" tabindex="-1"><a class="header-anchor" href="#ä¸‰-gitlab-runner" aria-hidden="true">#</a> ä¸‰ï¼šGitLab Runner</h2><h3 id="_3-1-gitlab-runner-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_3-1-gitlab-runner-ç®€ä»‹" aria-hidden="true">#</a> 3.1 GitLab Runner ç®€ä»‹</h3><ul><li>GitLab Runner æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œç”¨äºè¿è¡Œä½œä¸šå¹¶å°†ç»“æœå‘é€ä¼šGitLab</li><li>ä¸GitLabç»“åˆä½¿ç”¨ï¼ŒGitLab CI æ˜¯GitLabéšé™„çš„ç”¨äºåè°ƒä½œä¸šçš„å¼€æºæŒç»­å‡»é›†æˆæœåŠ¡</li><li>GitLab Runner æ˜¯ç”¨Goç¼–å†™çš„ï¼Œå¯ä»¥åœ¨Linuxã€Windowså’ŒMacOSæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ</li><li>å®¹å™¨éƒ¨ç½²éœ€è¦ä½¿ç”¨æœ€æ–°Dockerç‰ˆæœ¬ï¼ŒGitLab Runner éœ€è¦æœ€å°çš„Docker v1.13.0</li><li>GitLab Runner ç‰ˆæœ¬åº”ä¸GitLabç‰ˆæœ¬åŒæ­¥ã€‚ï¼ˆé¿å…ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„å·®å¼‚ï¼‰</li><li>å¯ä»¥æ ¹æ®éœ€è¦é…ç½®ä»»æ„æ•°é‡çš„Runner</li></ul><h4 id="_3-1-1-gitlab-runner-ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#_3-1-1-gitlab-runner-ç‰¹ç‚¹" aria-hidden="true">#</a> 3.1.1 GitLab Runner ç‰¹ç‚¹</h4><ul><li><p>ä½œä¸šè¿è¡Œæ§åˆ¶ï¼šåŒæ—¶æ‰§è¡Œå¤šä¸ªä½œä¸š</p></li><li><p>ä½œä¸šè¿è¡Œç¯å¢ƒï¼š</p><ul><li><p>åœ¨æœ¬åœ°ã€ä½¿ç”¨Dockerå®¹å™¨ã€ä½¿ç”¨Dockerå®¹å™¨å¹¶é€šè¿‡SSHæ‰§è¡Œä½œä¸šã€‚</p></li><li><p>ä½¿ç”¨Dockerå®¹å™¨åœ¨ä¸åŒçš„äº‘å’Œè™šæ‹ŸåŒ–ç®¡ç†ç¨‹åºä¸Šè‡ªåŠ¨ç¼©æ”¾ã€‚</p></li><li><p>è¿æ¥åˆ°è¿œç¨‹SSHæœåŠ¡å™¨ã€‚</p></li></ul></li><li><p>æ”¯æŒBash,Windows Batchå’ŒWindows PowerShellã€‚</p></li><li><p>å…è®¸è‡ªå®šä¹‰ä½œä¸šè¿è¡Œç¯å¢ƒã€‚</p></li><li><p>è‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®ï¼Œæ— éœ€é‡å¯ã€‚</p></li><li><p>æ˜“äºå®‰è£…ï¼Œå¯ä½œä¸ºLinux,macOSå’ŒWindowsçš„æœåŠ¡ã€‚</p></li></ul><h4 id="_3-1-2-gitlab-runnerçš„ç±»å‹ä¸çŠ¶æ€" tabindex="-1"><a class="header-anchor" href="#_3-1-2-gitlab-runnerçš„ç±»å‹ä¸çŠ¶æ€" aria-hidden="true">#</a> 3.1.2 GitLab Runnerçš„ç±»å‹ä¸çŠ¶æ€</h4><ul><li>ç±»åˆ° <ul><li>sharedå…±äº«ç±»å‹ï¼Œè¿è¡Œæ•´ä¸ªå¹³å°é¡¹ç›®çš„ä½œä¸š(gitlab)</li><li>groupé¡¹ç›®ç»„ç±»å‹ï¼Œè¿è¡Œç‰¹å®šgroupä¸‹çš„æ‰€æœ‰é¡¹ç›®çš„ä½œä¸š(group)</li><li>specificé¡¹ç›®ç±»å‹ï¼Œè¿è¡ŒæŒ‡å®šçš„é¡¹ç›®ä½œä¸š(project.)</li></ul></li><li>çŠ¶æ€ <ul><li>locked:é”å®šçŠ¶æ€ï¼Œæ— æ³•è¿è¡Œé¡¹ç›®ä½œä¸š</li><li>paused:.æš‚åœçŠ¶æ€ï¼Œæš‚æ—¶ä¸ä¼šæ¥å—æ–°çš„ä½œä¸š</li></ul></li></ul><h3 id="_3-2-gitlab-runnerå®‰è£…" tabindex="-1"><a class="header-anchor" href="#_3-2-gitlab-runnerå®‰è£…" aria-hidden="true">#</a> 3.2 GitLab Runnerå®‰è£…</h3><p>**ç³»ç»Ÿç¯å¢ƒï¼š**å¯ä»¥åœ¨Linux,mac0S,FreeBSDå’ŒWindows.ä¸Šå®‰è£…å’Œä½¿ç”¨GitLab Runnerã€‚</p><p>**éƒ¨ç½²æ–¹å¼ï¼š**äºŒè¿›åˆ¶æ–‡ä»¶ã€rpm/debè½¯ä»¶åŒ…ã€Dockerã€Kubernetes</p><h4 id="_3-2-1-é€šè¿‡åŒ…ç®¡ç†å·¥å…·å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_3-2-1-é€šè¿‡åŒ…ç®¡ç†å·¥å…·å®‰è£…" aria-hidden="true">#</a> 3.2.1 é€šè¿‡åŒ…ç®¡ç†å·¥å…·å®‰è£…</h4><p>Add GitLab&#39;s official repository:.æ·»åŠ å®˜æ–¹ä»“åº“</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For Debian/Ubuntu/Mint</span>
<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span>

<span class="token comment"># For RHEL/CentoS/Fedora</span>
<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´æ–°runner</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For Debian/Ubuntu/Mint</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gitlab-runner

<span class="token comment"># For RHEL/Centos/Fedora</span>
<span class="token function">sudo</span> yum update
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Install the latest version of GitLab Runner:å®‰è£…æœ€æ–°ç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># For Debian/Ubuntu/Mint</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gitlab-runner

<span class="token comment"># For RHEL/CentoS/Fedora</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To install a specific version of GitLab Runner:å®‰è£…æŒ‡å®šç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># for DEB based systems</span>
<span class="token function">apt-cache</span> madison gitlab-runner
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> gitlab-runner<span class="token operator">=</span><span class="token number">10.0</span>.0

<span class="token comment"># for RPM based systems</span>
yum list gitlab-runner <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-runner-10.0.0-1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-2-æ‰‹åŠ¨deb-rpmåŒ…å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_3-2-2-æ‰‹åŠ¨deb-rpmåŒ…å®‰è£…" aria-hidden="true">#</a> 3.2.2 æ‰‹åŠ¨deb/rpmåŒ…å®‰è£…</h4><p>ä¸‹è½½è½¯ä»¶åŒ…</p><ol><li>https://gitlab-runner--downloads.s3.amazonaws.com/latest/index.htmlä¸Šæ‰¾åˆ°æœ€æ–°çš„æ–‡ä»¶åå’Œé€‰é¡¹ã€‚</li><li>é€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬å¹¶ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æ–‡æ¡£æ‰€è¿°ï¼Œè¯¥æ–‡ä»¶ç”¨äºä¸‹è½½ä»»ä½•å…¶ä»–æ ‡è®°çš„GitLab Runnerå‘è¡Œç‰ˆã€‚</li></ol><p>ä¾‹å¦‚ï¼Œå¯¹äºDebian?æˆ–Ubuntu:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-LJO</span> https://gitlab-runner-downloads.s3.amazonaws.com/latest/deb/gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
dpkg <span class="token parameter variable">-i</span> gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
dpkg <span class="token parameter variable">-i</span> gitlab-runner <span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œå¯¹äºCentOSæˆ–Red Hat Enterprise Linux:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-LJO</span> https://gitlab-runner-downloads.s3.amazonaws.com/latest/rpm/gitlab-runner <span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-i</span> gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.rpm
<span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> gitlab-runner_<span class="token operator">&lt;</span>arch<span class="token operator">&gt;</span>.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-3-äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_3-2-3-äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…" aria-hidden="true">#</a> 3.2.3 äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…</h4><p>ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ï¼šå°†ä¸Šé¢URLä¸­çš„lateståˆ‡æ¢ä¸ºv12.9ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># Linux x86-64</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
<span class="token comment"># Linux x86</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-386
<span class="token comment"># Linux arm</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm
<span class="token comment"># Linux arm64</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ·»åŠ æ‰§è¡Œæƒé™</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ªgitlabç”¨æˆ·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">--comment</span> <span class="token string">&#39;GitLab Runner&#39;</span>--create-home gitlab-runner <span class="token parameter variable">--shell</span> /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®‰è£…å¹¶ä½œä¸ºæœåŠ¡è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> gitlab-runner <span class="token function">install</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>gitlab-runner --working-directory<span class="token operator">=</span>/home/gitlab-runner
<span class="token function">sudo</span> gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´æ–°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åœæ­¢æœåŠ¡</span>
<span class="token function">sudo</span> gitlab-runner stop
<span class="token comment"># ä¸‹è½½æ–°ç‰ˆæœ¬äºŒè¿›åˆ¶åŒ…</span>
<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
<span class="token comment"># èµ‹äºˆæ‰§è¡Œæƒé™</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner
<span class="token comment"># å¯åŠ¨æœåŠ¡</span>
<span class="token function">sudo</span> gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-4-mac-osç³»ç»Ÿä¸‹çš„å®‰è£…-æ‰‹åŠ¨" tabindex="-1"><a class="header-anchor" href="#_3-2-4-mac-osç³»ç»Ÿä¸‹çš„å®‰è£…-æ‰‹åŠ¨" aria-hidden="true">#</a> 3.2.4 Mac OSç³»ç»Ÿä¸‹çš„å®‰è£… - æ‰‹åŠ¨</h4><p>ä¸‹è½½äºŒè¿›åˆ¶åŒ…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">--output</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆäºˆå…¶æ‰§è¡Œæƒé™ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å°†Runnerä½œä¸ºæœåŠ¡å®‰è£…å¹¶å¯åŠ¨å®ƒï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~
gitlab-runner <span class="token function">install</span>
gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-5-mac-os-ç³»ç»Ÿä¸‹çš„å®‰è£…-è‡ªåŠ¨" tabindex="-1"><a class="header-anchor" href="#_3-2-5-mac-os-ç³»ç»Ÿä¸‹çš„å®‰è£…-è‡ªåŠ¨" aria-hidden="true">#</a> 3.2.5 Mac OS ç³»ç»Ÿä¸‹çš„å®‰è£… - è‡ªåŠ¨</h4><p>å®‰è£…ï¼Œå¯åŠ¨</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>brew install gitlab-runner
brew services.start gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´æ–°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-runner stop

<span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-o</span> /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64

<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/gitlab-runner

gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-gitlab-runner-æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#_3-3-gitlab-runner-æ³¨å†Œ" aria-hidden="true">#</a> 3.3 GitLab Runner æ³¨å†Œ</h3><ul><li>æ³¨å†Œæ­¥éª¤ï¼š <ul><li>è·å–runner token -&gt; è¿›è¡Œæ³¨å†Œ</li></ul></li><li>GitLabRunnerç±»å‹ <ul><li>sharedï¼šè¿è¡Œæ•´ä¸ªå¹³å°é¡¹ç›®çš„ä½œä¸š(gitlab)</li><li>groupï¼šè¿è¡Œç‰¹å®šgroupä¸‹çš„æ‰€æœ‰é¡¹ç›®çš„ä½œä¸š(groupï¼‰</li><li>specificï¼šè¿è¡ŒæŒ‡å®šçš„é¡¹ç›®ä½œä¸š(project)</li><li>lockedï¼šæ— æ³•è¿è¡Œé¡¹ç›®ä½œä¸š</li><li>pausedï¼šä¸ä¼šè¿è¡Œä½œä¸š</li></ul></li></ul><h4 id="_3-3-1-è·å–æ³¨å†Œtoken" tabindex="-1"><a class="header-anchor" href="#_3-3-1-è·å–æ³¨å†Œtoken" aria-hidden="true">#</a> 3.3.1 è·å–æ³¨å†Œtoken</h4><p>è·å–Sharedç±»å‹çš„Token</p><p><img src="/assets/image-20221030125007909-101e42c1.png" alt="image-20221030125007909"></p><p>è·å–Groupç±»å‹çš„Token</p><p><img src="/assets/image-20221030125250140-17bb5f84.png" alt="image-20221030125250140"></p><p>è·å–Specialç±»å‹çš„Token</p><p><img src="/assets/image-20221030125548727-e0b1d719.png" alt="image-20221030125548727"></p><h4 id="_3-3-2-gitlab-runner-çš„æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#_3-3-2-gitlab-runner-çš„æ³¨å†Œ" aria-hidden="true">#</a> 3.3.2 GitLab Runner çš„æ³¨å†Œ</h4><p>runnerçš„æ³¨å†Œé‡‡ç”¨çš„æ˜¯äº¤äº’å¼çš„æ–¹å¼ï¼š</p><p>é€šè¿‡æ‰§è¡Œ<code>sudo gitlab-runner register</code>è¿›è¡Œæ³¨å†Œï¼Œè¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥ä»¥ä¸‹ä¸€äº›å‚æ•°ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># gitlab çš„urlï¼š</span>
http://127.0.0.1:10001
<span class="token comment"># runner çš„ token ï¼š</span>
DR9XssZPEdqymnQBVDpb
<span class="token comment"># runner çš„æè¿°ä¿¡æ¯ - ç”¨äºè¾¨è¯†è¯¥æ³¨å†Œæ‰€å±çš„ç¾¤ç»„æˆ–é¡¹ç›®ï¼Œå¯ä»¥è®¾ç½®ä¸ºæ–¹ä¾¿åŒºåˆ†çš„å­—ç¬¦ä¸²ï¼š</span>
test-shard
<span class="token comment"># runner çš„ tag - æ ‡ç­¾ç”¨äºåç»­CIé…ç½®ä¸­é€‰æ‹©æ­¤æ‰§è¡Œå™¨ï¼ŒåæœŸå¯ä»¥é€šè¿‡gitlabç•Œé¢æ›´æ”¹ï¼š</span>
build
<span class="token comment"># é€‰æ‹©æ‰§è¡Œå™¨ - åç»­CIä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ï¼Œdockeræ–¹å¼è¿è¡Œçš„è¯·é€‰æ‹©docker ï¼š </span>
shell
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ³¨å†Œæµç¨‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>xuliang@xuliang-vm:~$ <span class="token function">sudo</span> gitlab-runner register
Runtime platform                                    <span class="token assign-left variable">arch</span><span class="token operator">=</span>amd64 <span class="token assign-left variable">os</span><span class="token operator">=</span>linux <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token number">12303</span> <span class="token assign-left variable">revision</span><span class="token operator">=</span>0d4137b8 <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token number">15.5</span>.0
Running <span class="token keyword">in</span> system-mode.                            
                                                   
Enter the GitLab instance URL <span class="token punctuation">(</span>for example, https://gitlab.com/<span class="token punctuation">)</span>:
http://127.0.0.1:10001
Enter the registration token:
DR9XssZPEdqymnQBVDpb
Enter a description <span class="token keyword">for</span> the runner:
<span class="token punctuation">[</span>xuliang-vm<span class="token punctuation">]</span>: test-shard
Enter tags <span class="token keyword">for</span> the runner <span class="token punctuation">(</span>comma-separated<span class="token punctuation">)</span>:
build,deploy
Enter optional maintenance note <span class="token keyword">for</span> the runner:

Registering runner<span class="token punctuation">..</span>. succeeded                     <span class="token assign-left variable">runner</span><span class="token operator">=</span>DR9XssZP
Enter an executor: docker-ssh, shell, ssh, kubernetes, docker-ssh+machine, instance, custom, docker, parallels, virtualbox, docker+machine:
shell
Runner registered successfully. Feel <span class="token function">free</span> to start it, but <span class="token keyword">if</span> it&#39;s running already the config should be automatically reloaded<span class="token operator">!</span>
 
Configuration <span class="token punctuation">(</span>with the authentication token<span class="token punctuation">)</span> was saved <span class="token keyword">in</span> <span class="token string">&quot;/etc/gitlab-runner/config.toml&quot;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-gitlab-runner-æ‰§è¡Œå™¨" tabindex="-1"><a class="header-anchor" href="#_3-4-gitlab-runner-æ‰§è¡Œå™¨" aria-hidden="true">#</a> 3.4 GitLab Runner æ‰§è¡Œå™¨</h3><h4 id="_3-4-1-èƒŒæ™¯ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_3-4-1-èƒŒæ™¯ä»‹ç»" aria-hidden="true">#</a> 3.4.1 èƒŒæ™¯ä»‹ç»</h4><p>GitLab CI/CDçš„æµæ°´çº¿çœŸæ­£çš„æ‰§è¡Œç¯å¢ƒæ˜¯GitLab Runneræä¾›çš„æ‰§è¡Œå™¨ï¼Œä¸ºäº†æ»¡è¶³å„ç§å„æ ·çš„éœ€æ±‚ï¼ŒGitLab CI/CDæ”¯æŒçš„æ‰§è¡Œå™¨æœ‰å¾ˆå¤šç§ï¼Œæœ€å¸¸ç”¨çš„æ˜¯Dockerï¼Œ shellï¼ŒKubernetsä¸‰ç§ã€‚æ¯ä¸€ç§æ‰§è¡Œå™¨éƒ½ä¸è‡ªå·±çš„ç‰¹æ€§ï¼Œäº†è§£å„ä¸ªæ‰§è¡Œå™¨çš„ç‰¹æ€§ï¼Œå¹¶é€‰æ‹©åˆé€‚çš„æ‰§è¡Œå™¨æ‰èƒ½è®©æˆ‘ä»¬æµæ°´çº¿æ›´åŠ å¯é ï¼Œç¨³å¥ã€‚ä¸‹é¢æˆ‘å°±ç»™å¤§å®¶è®²è§£ä¸€ä¸‹å„ç§æ‰§è¡Œå™¨çš„ç‰¹æ€§ã€‚</p><h4 id="_3-4-2-æ‰§è¡Œå™¨ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_3-4-2-æ‰§è¡Œå™¨ç±»å‹" aria-hidden="true">#</a> 3.4.2 æ‰§è¡Œå™¨ç±»å‹</h4><p>GitLab Runneræ”¯æŒçš„æ‰§è¡Œå™¨æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>SSH</li><li>Shell</li><li>Parallels</li><li>VirtualBox</li><li>Docker</li><li>Docker Machine (auto-scaling)</li><li>Kubernetes</li><li>Custom</li></ul><p>GitLab Runner æ”¯æŒçš„æ‰§è¡Œå™¨æœ‰GitLab Runnerçš„å®‰è£…æ–¹å¼æœ‰å…³ä¹Ÿå’Œå®¿ä¸»æœºç¯å¢ƒæœ‰å…³ã€‚</p><h4 id="_3-4-3-æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”1" tabindex="-1"><a class="header-anchor" href="#_3-4-3-æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”1" aria-hidden="true">#</a> 3.4.3 æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”1</h4><table><thead><tr><th>æ‰§è¡Œå™¨</th><th>SSH</th><th>Shell</th><th>VirtualBox</th><th>Parallels</th><th>Docker</th><th>Kubernetes</th><th>Custom</th></tr></thead><tbody><tr><td>æ¯æ¬¡buildæ¸…ç©ºbuildç¯å¢ƒ</td><td>âœ—</td><td>âœ—</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>conditional (4)</td></tr><tr><td>å¦‚æœä»¥å‰çš„å…‹éš†å­˜åœ¨ï¼Œè¯·é‡æ–°ä½¿ç”¨å®ƒ</td><td>âœ“</td><td>âœ“</td><td>âœ—</td><td>âœ—</td><td>âœ“</td><td>âœ—</td><td>conditional (4)</td></tr><tr><td>runneræ–‡ä»¶ç³»ç»Ÿè®¿é—®å—åˆ°ä¿æŠ¤ï¼ˆ5ï¼‰</td><td>âœ“</td><td>âœ—</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>conditional (4)</td></tr><tr><td>è¿ç§»runneræœºå™¨</td><td>âœ—</td><td>âœ—</td><td>partial</td><td>partial</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>å¤æ‚çš„æ„å»ºç¯å¢ƒ</td><td>âœ—</td><td>âœ—ï¼ˆ2ï¼‰</td><td>âœ“ï¼ˆ3ï¼‰</td><td>âœ“ï¼ˆ3ï¼‰</td><td>âœ“</td><td>âœ“</td><td>conditional (4)</td></tr><tr><td>è°ƒè¯•æ„å»ºé—®é¢˜</td><td>å®¹æ˜“</td><td>å®¹æ˜“</td><td>å›°éš¾</td><td>å›°éš¾</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td></tr></tbody></table><p>æ ‡æ³¨è§£é‡Š</p><ol><li>è¿ç§»æ—¶éœ€è¦åœ¨æ–°çš„æœºå™¨ä¸Šå®‰è£…æ‰€ä¾èµ–çš„åº”ç”¨ï¼ŒæœåŠ¡ï¼Œå·¥å…·åŒ…</li><li>è¦æ±‚æ‰€æœ‰ä¾èµ–æ‰‹åŠ¨å®‰è£…</li><li>ä¾‹å¦‚ä½¿ç”¨ https://www.vagrantup.com/docs/providers/virtualbox</li><li>å–å†³äºæ‚¨æ­£åœ¨é…ç½®çš„ç¯å¢ƒç±»å‹ã€‚å®ƒå¯ä»¥åœ¨æ¯ä¸ªæ„å»ºä¹‹é—´å®Œå…¨éš”ç¦»æˆ–å…±äº«ã€‚</li><li>å½“runnerçš„æ–‡ä»¶ç³»ç»Ÿè®¿é—®ä¸å—ä¿æŠ¤æ—¶ï¼Œä½œä¸šå¯ä»¥è®¿é—®æ•´ä¸ªç³»ç»Ÿï¼ŒåŒ…æ‹¬è¿è¡Œç¨‹åºçš„ä»¤ç‰Œï¼Œä»¥åŠå…¶ä»–ä½œä¸šçš„ç¼“å­˜å’Œä»£ç ã€‚æ‰§è¡Œå™¨è¢«æ ‡è®°ä¸º âœ“ é»˜è®¤æƒ…å†µä¸‹ä¸å…è®¸è¿è¡Œç¨‹åºè®¿é—®æ–‡ä»¶ç³»ç»Ÿã€‚ä½†æ˜¯ï¼Œå®‰å…¨ç¼ºé™·æˆ–æŸäº›é…ç½®å¯èƒ½ä¼šå…è®¸ä½œä¸šä»å…¶å®¹å™¨ä¸­è·³å‡ºå¹¶è®¿é—®æ–‡ä»¶ç³»ç»Ÿå®¿ä¸»runner</li></ol><p>å¯¹äºsshå’Œshellæ‰§è¡Œå™¨ï¼Œåœ¨æ„å»ºå®Œæˆåï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨æ¸…ç©ºæ„å»ºç›®å½•ã€‚å…¶ä»–æ‰§è¡Œå™¨åˆ™ä¼šã€‚æ‰€ä»¥å¦‚æœä½ ç”¨çš„æ˜¯Shellæ‰§è¡Œå™¨ï¼Œä¼šåœ¨Runnerçš„buildç›®å½•ä¸‹æ‰¾åˆ°æ„å»ºçš„æ–‡ä»¶å’Œäº§ç‰©ï¼Œè€Œå½“ä½ æ˜¯ä½¿ç”¨Shellæ‰§è¡Œå™¨æ—¶ï¼Œå¦‚æœä»¥åŠå…‹éš†è¿‡é¡¹ç›®äº†ï¼Œåˆ™ä¼šé‡æ–°ä½¿ç”¨å®ƒã€‚è™½ç„¶shellæ‰§è¡Œå™¨ä½¿ç”¨çš„å®¿ä¸»æœºç¯å¢ƒï¼Œè¿è¡Œè¶³å¤Ÿå¿«ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ï¼Œå¿…é¡»æ‰‹åŠ¨å®‰è£…æ‰€æœ‰æ„å»ºç¯å¢ƒï¼Œä¾èµ–ï¼Œè€Œä¸”å¯èƒ½å­˜åœ¨è¶Šæƒçš„é—®é¢˜ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªè¿½æ±‚é€Ÿåº¦ï¼Œå¯ä»¥ä½¿ç”¨Shellæ‰§è¡Œå™¨ï¼Œå¦‚æœä½ è¿½æ±‚çµæ´»æ€§ï¼Œç¨³å¥ï¼Œå¯ä»¥ä½¿ç”¨Dokceræ‰§è¡Œå™¨ï¼Œå¦‚æœä½ å¯¹è‡ªåŠ¨æ‰©ç¼©å®¹æœ‰ä¸€å®šè¦æ±‚ï¼Œå»ºè®®ä¸ŠKubernetsã€‚</p><h4 id="_3-4-4-æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”2" tabindex="-1"><a class="header-anchor" href="#_3-4-4-æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”2" aria-hidden="true">#</a> 3.4.4 æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”2</h4><table><thead><tr><th>Executor</th><th>SSH</th><th>Shell</th><th>VirtualBox</th><th>Parallels</th><th>Docker</th><th>Kubernetes</th><th>Custom</th></tr></thead><tbody><tr><td>ä¿æŠ¤å˜é‡</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>GitLab Runner æ‰§è¡Œå‘½ä»¤è¡Œ</td><td>âœ—</td><td>âœ“</td><td>âœ—</td><td>âœ—</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>æ”¯æŒ<code>.gitlab-ci.yml</code> ï¼šimage</td><td>âœ—</td><td>âœ—</td><td>âœ—</td><td>âœ—</td><td>âœ“</td><td>âœ“</td><td>âœ“ (via <a href="https://blog.csdn.net/github_35631540/article/details/custom.md#stages" target="_blank" rel="noopener noreferrer"><code>$CUSTOM_ENV_CI_JOB_IMAGE</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>æ”¯æŒ<code>.gitlab-ci.yml</code>: services</td><td>âœ—</td><td>âœ—</td><td>âœ—</td><td>âœ—</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>æ”¯æŒ<code>.gitlab-ci.yml</code>: cache</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>æ”¯æŒ<code>.gitlab-ci.yml</code>: artifacts</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>è·¨é˜¶æ®µåˆ¶å“ä¼ é€’</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td><td>âœ“</td></tr><tr><td>ä½¿ç”¨ GitLab ç§æœ‰é•œåƒä»“åº“</td><td>n/a</td><td>n/a</td><td>n/a</td><td>n/a</td><td>âœ“</td><td>âœ“</td><td>n/a</td></tr><tr><td>é›†æˆ Web terminal</td><td>âœ—</td><td>âœ“ (UNIX)</td><td>âœ—</td><td>âœ—</td><td>âœ“</td><td>âœ“ (1)</td><td>âœ—</td></tr></tbody></table><p>åœ¨ä¸Šé¢çš„æ‰§è¡Œå™¨ç‰¹æ€§å¯¹æ¯”ä¸­éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæ˜¯Shellæ‰§è¡Œå™¨ï¼Œæ— æ³•ä½¿ç”¨dockeré•œåƒå’Œ<code>services</code>å…³é”®è¯ã€‚å³ä½¿ä½ çš„å®¿ä¸»æœºå·²ç»å®‰è£…çš„Dockerã€‚æ­¤å¤–æ§åˆ¶å°è°ƒè¯•ä¹‹åDockerä¸k8sä»¥åŠï¼Œunixçš„shellæ‰§è¡Œå™¨å¯ä»¥ä½¿ç”¨ã€‚</p><h3 id="_3-5-gitlab-runner-å‘½ä»¤æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_3-5-gitlab-runner-å‘½ä»¤æ€»ç»“" aria-hidden="true">#</a> 3.5 GitLab Runner å‘½ä»¤æ€»ç»“</h3><p>gitlab-runneråˆ é™¤æ— æ•ˆrunner</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-runner verify <span class="token parameter variable">--delete</span> <span class="token parameter variable">--name</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹å¸®åŠ©</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gitlab-runner <span class="token parameter variable">--help</span>
gitlab-runner <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token parameter variable">--help</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®æ–‡ä»¶è·¯å¾„</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># é…ç½®æ–‡ä»¶</span>
<span class="token comment"># å½“gitlab-runnerä½œä¸ºè¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰æ‰§è¡Œæ—¶ï¼Œåœ¨* nixç³»ç»Ÿä¸Š</span>
/etc/gitlab-runner/config.toml

<span class="token comment"># å½“gitlab-runnerä»¥érootèº«ä»½æ‰§è¡Œæ—¶ï¼Œåœ¨* nixç³»ç»Ÿä¸Š</span>
~/.gitlab-runner/config.toml 

<span class="token comment"># åœ¨å…¶ä»–ç³»ç»Ÿä¸Š</span>
./config.toml 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å†Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æ³¨å†Œ</span>
gitlab-runner register <span class="token parameter variable">--name</span> my-runner <span class="token parameter variable">--url</span> http://gitlab.example.com --registration-token my-registration-token

<span class="token comment"># æˆ–è€…é€šè¿‡åœ¨registerå‘½ä»¤ä¹‹å‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CI_SERVER_URL</span><span class="token operator">=</span>http://gitlab.example.com
<span class="token builtin class-name">export</span> <span class="token assign-left variable">RUNNER_NAME</span><span class="token operator">=</span>my-runner
<span class="token builtin class-name">export</span> <span class="token assign-left variable">REGISTRATION_TOKEN</span><span class="token operator">=</span>my-registration-token
<span class="token builtin class-name">export</span> <span class="token assign-left variable">REGISTER_NON_INTERACTIVE</span><span class="token operator">=</span>true
gitlab-runner register

<span class="token comment"># éäº’åŠ¨æ³¨å†Œï¼Œå¯ä»¥åœ¨éäº¤äº’/æ— äººå€¼å®ˆæ¨¡å¼ä¸‹ä½¿ç”¨æ³¨å†Œã€‚</span>
gitlab-runner register --non-interactive <span class="token operator">&lt;</span>other-arguments<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨é”€</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å–æ¶ˆæ³¨å†Œæ‰€æœ‰é™„åŠ çš„æ³¨å†Œè€…</span>
gitlab-runner unregister --all-runners

<span class="token comment"># è¦å–æ¶ˆæ³¨å†Œç‰¹å®šçš„è·‘æ­¥è€…ï¼Œé¦–å…ˆé€šè¿‡æ‰§è¡Œgitlab-runner listè·å–æ³¨å†Œè€…çš„è¯¦ç»†ä¿¡æ¯</span>
gitlab-runner list
<span class="token comment"># å†æ ¹æ®ä¿¡æ¯æ³¨é”€ï¼ŒæŒ‰æ³¨å†Œä»¤ç‰Œ</span>
gitlab-runner unregister <span class="token parameter variable">--url</span> http://gitlab.example.com/ <span class="token parameter variable">--token</span> t0k3n
<span class="token comment"># æŒ‰åå­—</span>
gitlab-runner unregister <span class="token parameter variable">--name</span> hj_project
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…gitlab-runner install</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#å¤åˆ¶gitlab-runneråˆ°/usr/bin/ç›®å½•ä¸‹</span>
<span class="token function">cp</span> /root/gitlab-runner-linux-amd64  /usr/bin/gitlab-runner

<span class="token comment">#èµ‹äºˆå¯æ‰§è¡Œæƒé™</span>
<span class="token function">chmod</span> +x /usr/bin/gitlab-runner

<span class="token comment"># åˆ›å»ºç¬¦å·é“¾æ¥æ–‡ä»¶</span>
<span class="token function">ln</span> <span class="token parameter variable">-s</span>  /usr/bin/gitlab-runner /usr/local/bin/gitlab-runner

<span class="token comment"># åˆ›å»º GitLab Runnerç”¨æˆ·</span>
<span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">--comment</span> <span class="token string">&#39;GitLab Runner&#39;</span> --create-home gitlab-runner <span class="token parameter variable">--shell</span> /bin/bash

<span class="token comment"># ä¿®æ”¹gitla-runnerå¯†ç </span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;gitlab-runner&quot;</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> gitlab-runner
<span class="token comment"># å®‰è£…</span>
gitlab-runner <span class="token function">install</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>gitlab-runner --working-directory<span class="token operator">=</span>/home/gitlab-runner

<span class="token comment"># æŠŠæœåŠ¡æ·»åŠ æˆéšæœºå¯åŠ¨</span>
<span class="token function">chkconfig</span> gitlab-runner on

<span class="token comment"># ç»™gitl-runnerç”¨æˆ·å¯ä»¥sudoæ‰§è¡Œ/usr/local/bin/gitlab-runnerçš„æƒé™</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Cmnd_Alias CMD = /usr/bin/systemctl,/usr/bin/gitlab-runner,/usr/bin/vim&quot;</span> <span class="token operator">&gt;&gt;</span>/etc/sudoers.d/gitlab-runner
<span class="token builtin class-name">echo</span> <span class="token string">&quot;gitlab-runner ALL=(ALL)       NOPASSWD:CMD&quot;</span> <span class="token operator">&gt;&gt;</span>/etc/sudoers.d/gitlab-runner

<span class="token comment"># è¿è¡Œ</span>
gitlab-runner start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸è½½</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">!</span>/bin/bash
<span class="token comment"># å¸è½½gitlab-runner</span>

<span class="token comment"># åœæ­¢æœåŠ¡</span>
gitlab-runner stop

<span class="token comment"># å–æ¶ˆéšæœºå¯åŠ¨</span>
<span class="token function">chkconfig</span> gitlab-runner off

<span class="token comment"># å¸è½½æœåŠ¡</span>
gitlab-runner uninstall

<span class="token comment"># æ¸…ç†æ–‡ä»¶</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/gitlab-runner
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/local/bin/gitlab-runner
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/bin/gitlab-runner
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/sudoers.d/gitlab-runner

<span class="token comment"># åˆ é™¤ç”¨æˆ·</span>
<span class="token function">userdel</span> <span class="token parameter variable">-r</span> gitlab-runner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-è¿è¡Œæµæ°´çº¿ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#_3-6-è¿è¡Œæµæ°´çº¿ä»»åŠ¡" aria-hidden="true">#</a> 3.6 è¿è¡Œæµæ°´çº¿ä»»åŠ¡</h3><p>è„šæœ¬</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> deploy
  
<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">tags</span><span class="token punctuation">:</span> 
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;mvn<span class="token punctuation">-</span>clean
    <span class="token punctuation">-</span> echo &quot;mvn install&quot;
    
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> deploy
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;hello deploy&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å››-gitlab-pipline" tabindex="-1"><a class="header-anchor" href="#å››-gitlab-pipline" aria-hidden="true">#</a> å››ï¼šGitLab PipLine</h2><p>GitLab CIçš„æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªç§°ä¸ºLintçš„åµŒå…¥å¼è°ƒè¯•å·¥å…·ï¼Œè¯¥å·¥å…·å¯ä»¥éªŒè¯.gitlab--ci.ymlæ–‡ä»¶çš„å†…å®¹</p><h3 id="_4-1-gitlab-pipline-è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_4-1-gitlab-pipline-è¯­æ³•" aria-hidden="true">#</a> 4.1 GitLab Pipline è¯­æ³•</h3><h4 id="_4-1-1-job" tabindex="-1"><a class="header-anchor" href="#_4-1-1-job" aria-hidden="true">#</a> 4.1.1 Job</h4><p>åœ¨æ¯ä¸ªé¡¹ç›®ä¸­ï¼Œä½¿ç”¨åä¸º.gitlab-ci.ymlçš„YAMLæ–‡ä»¶é…ç½®GitLab CI/CDç®¡é“ã€‚åœ¨æ–‡ä»¶ä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸š(job)ã€‚æ¯ä¸ªä½œä¸šå¿…é¡»å…·æœ‰å”¯ä¸€çš„åç§°ï¼ˆä¸èƒ½ä½¿ç”¨å…³é”®å­—ï¼‰ï¼Œæ¯ä¸ªä½œä¸šæ˜¯ç‹¬ç«‹æ‰§è¡Œçš„ã€‚ä½œä¸šå®šä¹‰äº†åœ¨çº¦æŸæ¡ä»¶ä¸‹è¿›è¡Œç›¸å…³æ“ä½œï¼Œæ¯ä¸ªä½œä¸šè‡³å°‘è¦åŒ…å«ä¸€ä¸ªscriptã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job1</span><span class="token punctuation">:</span>
  script<span class="token punctuation">:</span><span class="token string">&quot;execute-script-for-jobl&quot;</span>
<span class="token key atrule">job2</span><span class="token punctuation">:</span>
  script<span class="token punctuation">:</span><span class="token string">&quot;execute-script-for-job2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œåœ¨pipelineä¸­å®šä¹‰äº†ä¸¤ä¸ªä½œä¸šï¼Œæ¯ä¸ªä½œä¸šè¿è¡Œä¸åŒçš„å‘½ä»¤ã€‚å‘½ä»¤å¯ä»¥æ˜¯shellæˆ–è„šæœ¬ã€‚</p><p>ä¸€ä¸ªæ ·ä¾‹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">before_script</span><span class="token punctuation">:</span>
  echo &quot;before<span class="token punctuation">-</span>script <span class="token tag">!</span><span class="token tag">!</span>&quot;
  
<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com
  
<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> codescan
  <span class="token punctuation">-</span> deploy
  
<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;before<span class="token punctuation">-</span>script in job&quot;
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;mvn clean
    <span class="token punctuation">-</span> echo &quot;mvn install&quot;
    <span class="token punctuation">-</span> echo &quot;$DOMAIN&quot;
  <span class="token key atrule">after_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;after script in buildjob&quot;

<span class="token key atrule">unittest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;run test&quot;

<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;hello deploy&quot;
    <span class="token punctuation">-</span> sleep 2;
    
<span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
    
<span class="token key atrule">after_script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> echo &quot;after<span class="token punctuation">-</span>script <span class="token tag">!</span><span class="token tag">!</span>&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-2-script" tabindex="-1"><a class="header-anchor" href="#_4-1-2-script" aria-hidden="true">#</a> 4.1.2 Script</h4><p>æ¯ä¸ªä½œä¸šè‡³å°‘è¦åŒ…å«ä¸€ä¸ªscriptã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> uname <span class="token punctuation">-</span>a
    <span class="token punctuation">-</span> bundle exec rspec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**æ³¨æ„ï¼š**æœ‰æ—¶ï¼Œscriptå‘½ä»¤éœ€è¦ç”¨å•å¼•å·æˆ–åŒå¼•å·å¼•èµ·æ¥ã€‚ä¾‹å¦‚ï¼ŒåŒ…å«å†’å·å‘½ä»¤(ğŸ˜ƒï¼Œéœ€è¦åŠ å¼•å·ï¼Œä»¥ä¾¿è¢«åŒ…è£¹çš„YMLè§£æå™¨çŸ¥é“æ¥è§£é‡Šæ•´ä¸ªäº‹æƒ…ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª&quot;é”®:å€¼&quot;å¯¹ã€‚ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦æ—¶è¦å°å¿ƒï¼š<code>:</code>ï¼Œ<code>{</code>ï¼Œ<code>}</code>,<code>[</code>,<code>]</code>,<code>,</code>,<code>&amp;</code>,<code>*</code>,<code>#</code>,<code>?</code>,<code>|</code>,<code>-</code>ï¼Œ<code>&lt;</code>ï¼Œ<code>&gt;</code>ï¼Œ<code>=</code>,<code>!</code>ï¼Œ<code>%</code>ï¼Œ<code>@</code>ï¼Œ```</p><h4 id="_4-1-3-before-script" tabindex="-1"><a class="header-anchor" href="#_4-1-3-before-script" aria-hidden="true">#</a> 4.1.3 before_script</h4><p>ç”¨äºå®šä¹‰ä¸€ä¸ªå‘½ä»¤ï¼Œè¯¥å‘½ä»¤åœ¨æ¯ä¸ªä½œä¸šä¹‹å‰è¿è¡Œã€‚å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚æŒ‡å®šçš„scriptä¸ä¸»è„šæœ¬ä¸­æŒ‡å®šçš„ä»»ä½•è„šæœ¬ä¸²è”åœ¨ä¸€èµ·ï¼Œå¹¶åœ¨å•ä¸ªshellä¸­ä¸€èµ·æ‰§è¡Œã€‚</p><p>before_scriptå¤±è´¥å¯¼è‡´æ•´ä¸ªä½œä¸šå¤±è´¥ï¼Œå…¶ä»–ä½œä¸šå°†ä¸å†æ‰§è¡Œã€‚ä½œä¸šå¤±è´¥ä¸ä¼šå½±å“after_scriptè¿è¡Œã€‚</p><h4 id="_4-1-4-after-script" tabindex="-1"><a class="header-anchor" href="#_4-1-4-after-script" aria-hidden="true">#</a> 4.1.4 after_script</h4><p>ç”¨äºå®šä¹‰åœ¨æ¯ä¸ªä½œä¸šï¼ˆåŒ…æ‹¬å¤±è´¥çš„ä½œä¸šï¼‰ä¹‹åè¿è¡Œçš„å‘½ä»¤ã€‚</p><p>è¿™å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p><p>æŒ‡å®šçš„è„šæœ¬åœ¨æ–°çš„shellä¸­æ‰§è¡Œï¼Œä¸ä»»ä½•before_scriptæˆ–scriptè„šæœ¬åˆ†å¼€ã€‚</p><p>after_scriptå¤±è´¥ä¸ä¼šå½±å“ä½œä¸šå¤±è´¥ã€‚</p><h4 id="_4-1-5-stages" tabindex="-1"><a class="header-anchor" href="#_4-1-5-stages" aria-hidden="true">#</a> 4.1.5 stages</h4><p>ç”¨äºå®šä¹‰ä½œä¸šå¯ä»¥ä½¿ç”¨çš„é˜¶æ®µï¼Œå¹¶ä¸”æ˜¯å…¨å±€å®šä¹‰çš„ã€‚</p><p>åŒä¸€é˜¶æ®µçš„ä½œä¸šå¹¶è¡Œè¿è¡Œï¼Œä¸åŒé˜¶æ®µæŒ‰é¡ºåºæ‰§è¡Œã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> codescan
  <span class="token punctuation">-</span> deploy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20221101130132410-7c72a740.png" alt="image-20221101130132410"></p><h4 id="_4-1-6-pre-post" tabindex="-1"><a class="header-anchor" href="#_4-1-6-pre-post" aria-hidden="true">#</a> 4.1.6 .pre&amp;.post</h4><p>.preå§‹ç»ˆæ˜¯æ•´ä¸ªç®¡é“çš„ç¬¬ä¸€ä¸ªè¿è¡Œé˜¶æ®µï¼Œ.postå§‹ç»ˆæ˜¯æ•´ä¸ªç®¡é“çš„æœ€åä¸€ä¸ªè¿è¡Œé˜¶æ®µã€‚ç”¨æˆ·å®šä¹‰çš„é˜¶æ®µéƒ½åœ¨ä¸¤è€…ä¹‹é—´è¿è¡Œã€‚.preå’Œ.postçš„é¡ºåºæ— æ³•æ›´æ”¹ã€‚å¦‚æœç®¡é“ä»…åŒ…å«.preæˆ–.posté˜¶æ®µçš„ä½œä¸šï¼Œåˆ™ä¸ä¼šåˆ›å»ºç®¡é“ã€‚</p><p><img src="/assets/image-20221101130548178-37101ef1.png" alt="image-20221101130548178"></p><h4 id="_4-1-7-stage" tabindex="-1"><a class="header-anchor" href="#_4-1-7-stage" aria-hidden="true">#</a> 4.1.7 stage</h4><p>æ˜¯æŒ‰Jobå®šä¹‰çš„ï¼Œå¹¶ä¸”ä¾èµ–äºå…¨å±€å®šä¹‰çš„stagesã€‚å®ƒå…è®¸å°†ä½œä¸šåˆ†ä¸ºä¸åŒçš„é˜¶æ®µï¼Œå¹¶ä¸”åŒä¸€stageä½œä¸šå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼ˆå–å†³äºç‰¹å®šæ¡ä»¶ï¼‰ã€‚</p><p><img src="/assets/image-20221101131201855-35608521.png" alt="image-20221101131201855"></p><p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šé˜¶æ®µå¹¶æ²¡æœ‰å¹¶è¡Œè¿è¡Œã€‚åœ¨è¿™é‡Œæˆ‘æŠŠè¿™ä¸¤ä¸ªé˜¶æ®µåœ¨åŒä¸€ä¸ªrunnerè¿è¡Œäº†ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹runneræ¯æ¬¡è¿è¡Œçš„ä½œä¸šæ•°é‡ã€‚é»˜è®¤æ˜¯1ï¼Œæ”¹ä¸º10.</p><p><img src="/assets/image-20221101131407013-53a29412.png" alt="image-20221101131407013"></p><p>vim /etc/gitlab-runner/config.toml æ›´æ”¹åè‡ªåŠ¨åŠ è½½æ— éœ€é‡å¯ã€‚</p><div class="language-toml line-numbers-mode" data-ext="toml"><pre class="language-toml"><code>concurrent <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-1-8-variables" tabindex="-1"><a class="header-anchor" href="#_4-1-8-variables" aria-hidden="true">#</a> 4.1.8 variables</h4><p>å®šä¹‰å˜é‡ï¼Œpipelineå˜é‡ã€jobå˜é‡ã€‚jobå˜é‡ä¼˜å…ˆçº§æœ€å¤§ã€‚</p><h4 id="_4-1-9-tags" tabindex="-1"><a class="header-anchor" href="#_4-1-9-tags" aria-hidden="true">#</a> 4.1.9 tags</h4><p>ç”¨äºä»å…è®¸è¿è¡Œè¯¥é¡¹ç›®çš„æ‰€æœ‰Runneråˆ—è¡¨ä¸­é€‰æ‹©ç‰¹å®šçš„Runnerï¼Œåœ¨Runneræ³¨å†ŒæœŸé—´ï¼Œæ‚¨å¯ä»¥æŒ‡å®šRunnerçš„æ ‡ç­¾ã€‚</p><p><img src="/assets/image-20221102084714149-6127ea5e.png" alt="image-20221102084714149"></p><h4 id="_4-1-10-allow-failure" tabindex="-1"><a class="header-anchor" href="#_4-1-10-allow-failure" aria-hidden="true">#</a> 4.1.10 allow_failure</h4><p>allow_failureå…è®¸ä½œä¸šå¤±è´¥ï¼Œé»˜è®¤å€¼ä¸ºfalseã€‚å¯ç”¨åï¼Œå¦‚æœä½œä¸šå¤±è´¥ï¼Œè¯¥ä½œä¸šå°†åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºæ©™è‰²è­¦å‘Šã€‚ä½†æ˜¯ï¼Œç®¡é“çš„é€»è¾‘æµç¨‹å°†è®¤ä¸ºä½œä¸šæˆåŠŸ/é€šè¿‡ï¼Œå¹¶ä¸”ä¸ä¼šè¢«é˜»å¡ã€‚å‡è®¾æ‰€æœ‰å…¶ä»–ä½œä¸šå‡æˆåŠŸï¼Œåˆ™è¯¥ä½œä¸šçš„é˜¶æ®µåŠå…¶ç®¡é“å°†æ˜¾ç¤ºç›¸åŒçš„æ©™è‰²è­¦å‘Šã€‚ä½†æ˜¯ï¼Œå…³è”çš„æäº¤å°†è¢«æ ‡è®°ä¸º&quot;é€šè¿‡&quot;ï¼Œè€Œä¸ä¼šå‘å‡ºè­¦å‘Šã€‚</p><p><img src="/assets/image-20221102085341241-e58e7445.png" alt="image-20221102085341241"></p><h4 id="_4-1-11-when" tabindex="-1"><a class="header-anchor" href="#_4-1-11-when" aria-hidden="true">#</a> 4.1.11 when</h4><p>æ§åˆ¶ä½œä¸šçš„è¿è¡Œ</p><ul><li><strong>on_successï¼š</strong> å‰é¢é˜¶æ®µä¸­çš„æ‰€æœ‰ä½œä¸šéƒ½æˆåŠŸæ—¶æ‰æ‰§è¡Œä½œä¸šï¼Œé»˜è®¤å€¼ã€‚</li><li>**on_failureï¼š**å½“å‰é¢é˜¶æ®µå‡ºç°å¤±è´¥æ—¶æ‰§è¡Œã€‚</li><li>**alwaysï¼š**æ€»æ˜¯æ‰§è¡Œä½œä¸šã€‚</li><li>**manualï¼š**æ‰‹åŠ¨æ‰§è¡Œä½œä¸šã€‚</li><li>**delayedï¼š**å»¶è¿Ÿæ‰§è¡Œä½œä¸šã€‚</li></ul><p><img src="/assets/image-20221102085956655-a50f9b4c.png" alt="image-20221102085956655"></p><p>demo</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">timedrollout</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &#39;Rolling out 10% <span class="token punctuation">...</span> &#39;
  <span class="token key atrule">when</span><span class="token punctuation">:</span> delayed
  <span class="token key atrule">start_in</span><span class="token punctuation">:</span> <span class="token string">&#39;30&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-12-retry" tabindex="-1"><a class="header-anchor" href="#_4-1-12-retry" aria-hidden="true">#</a> 4.1.12 retry</h4><ul><li>é…ç½®åœ¨å¤±è´¥çš„æƒ…å†µä¸‹é‡è¯•ä½œä¸šçš„æ¬¡æ•°ã€‚</li><li>å½“ä½œä¸šå¤±è´¥å¹¶é…ç½®äº†retryï¼Œå°†å†æ¬¡å¤„ç†è¯¥ä½œä¸šï¼Œç›´åˆ°è¾¾åˆ°retryå…³é”®å­—æŒ‡å®šçš„æ¬¡æ•°ã€‚</li><li>å¦‚æœretryè®¾ç½®ä¸º2ï¼Œå¹¶ä¸”ä½œä¸šåœ¨ç¬¬äºŒæ¬¡è¿è¡ŒæˆåŠŸï¼ˆç¬¬ä¸€æ¬¡é‡è¯•)ï¼Œåˆ™ä¸ä¼šå†æ¬¡é‡è¯•ã€‚retryå€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œç­‰äºæˆ–å¤§äº0ï¼Œä½†å°äºæˆ–ç­‰äº2ï¼ˆæœ€å¤šä¸¤æ¬¡é‡è¯•ï¼Œæ€»å…±è¿è¡Œ3æ¬¡ï¼‰ã€‚</li></ul><p><strong>ç²¾ç¡®åŒ¹é…é”™è¯¯</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å¤±è´¥æƒ…å†µä¸‹é‡è¯•ä½œä¸šã€‚maxï¼šæœ€å¤§é‡è¯•æ¬¡æ•°whenï¼šé‡è¯•å¤±è´¥çš„é”™è¯¯ç±»å‹</p><ul><li>alwaysï¼šåœ¨å‘ç”Ÿä»»ä½•æ•…éšœæ—¶é‡è¯•ï¼ˆé»˜è®¤ï¼‰ã€‚</li><li>unknown_failureï¼šå½“å¤±è´¥åŸå› æœªçŸ¥æ—¶ã€‚</li><li>script_failureï¼šè„šæœ¬å¤±è´¥æ—¶é‡è¯•ã€‚</li><li>api_failureï¼šAPIå¤±è´¥é‡è¯•ã€‚</li><li>stuck_or_timeout_failureï¼šä½œä¸šå¡ä½æˆ–è¶…æ—¶æ—¶ã€‚</li><li>runner_system_failureï¼šè¿è¡Œç³»ç»Ÿå‘ç”Ÿæ•…éšœã€‚</li><li>missing_dependency_failureï¼šå¦‚æœä¾èµ–ä¸¢å¤±ã€‚</li><li>runner_unsupportedï¼šRunnerä¸å—æ”¯æŒã€‚</li><li>stale_scheduleï¼šæ— æ³•æ‰§è¡Œå»¶è¿Ÿçš„ä½œä¸šã€‚</li><li>job_execution_timeoutï¼šè„šæœ¬è¶…å‡ºäº†ä¸ºä½œä¸šè®¾ç½®çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ã€‚</li><li>archived_failureï¼šä½œä¸šå·²å­˜æ¡£ä¸”æ— æ³•è¿è¡Œã€‚</li><li>unmet_prerequisitesï¼šä½œä¸šæœªèƒ½å®Œæˆå…ˆå†³æ¡ä»¶ä»»åŠ¡ã€‚</li><li>scheduler_failureï¼šè°ƒåº¦ç¨‹åºæœªèƒ½å°†ä½œä¸šåˆ†é…ç»™è¿è¡Œscheduler_failureã€‚</li><li>data_integrity_failureï¼šæ£€æµ‹åˆ°ç»“æ„å®Œæ•´æ€§é—®é¢˜ã€‚</li></ul><p><strong>demo</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">unittest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ech &quot;run test&quot;
  <span class="token key atrule">retry</span><span class="token punctuation">:</span>
    <span class="token key atrule">max</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">when</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> script_failure
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-13-timeout" tabindex="-1"><a class="header-anchor" href="#_4-1-13-timeout" aria-hidden="true">#</a> 4.1.13 timeout</h4><p>ä½œä¸šçº§åˆ«çš„è¶…æ—¶å¯ä»¥è¶…è¿‡é¡¹ç›®çº§åˆ«è¶…æ—¶ï¼Œä½†ä¸èƒ½è¶…è¿‡Runnerç‰¹å®šçš„è¶…æ—¶ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> build.sh
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 3 hours 30 minutes

<span class="token key atrule">test</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> rspec
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 3h 30m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-14-parallel" tabindex="-1"><a class="header-anchor" href="#_4-1-14-parallel" aria-hidden="true">#</a> 4.1.14 parallel</h4><p>å¹¶è¡Œä½œä¸š</p><ul><li>é…ç½®è¦å¹¶è¡Œè¿è¡Œçš„ä½œä¸šå®ä¾‹æ•°ï¼Œæ­¤å€¼å¿…é¡»å¤§äºæˆ–ç­‰äº2å¹¶ä¸”å°äºæˆ–ç­‰äº50ã€‚</li><li>è¿™å°†åˆ›å»ºNä¸ªå¹¶è¡Œè¿è¡Œçš„åŒä¸€ä½œä¸šå®ä¾‹.å®ƒä»¬ä»job_name 1/Nåˆ°job_name N/Nä¾æ¬¡å‘½åã€‚</li></ul><blockquote><p>å®éªŒè„šæœ¬demo</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">before script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> echo &quot;before<span class="token punctuation">-</span>script<span class="token tag">!</span><span class="token tag">!</span>&quot;

<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com

<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
  <span class="token punctuation">-</span> codescan
  <span class="token punctuation">-</span> deploy

<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">inherit</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">variables</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">before script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;before<span class="token punctuation">-</span>script in job&quot;
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span>master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;mvnclean
    <span class="token punctuation">-</span> echo &quot;mvn install&quot;
    <span class="token punctuation">-</span> echo &quot;S(DOMAIN)&quot;
    <span class="token punctuation">-</span> false <span class="token important">&amp;&amp;</span> true exit_code=$<span class="token punctuation">?</span>
    <span class="token punctuation">-</span> if <span class="token punctuation">[</span> $exit_code <span class="token punctuation">-</span>ne 0 <span class="token punctuation">]</span>; then echo &quot;Previous command failed&quot;; fi;
    <span class="token punctuation">-</span> sleep 2;
  <span class="token key atrule">after script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;after script in job&quot;

<span class="token key atrule">unittest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;run test&quot;
    
<span class="token key atrule">interfacetest</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;run test&quot;
    <span class="token punctuation">-</span> sleep 2;    
    
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> deploy
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;hello deploy&quot;
    <span class="token punctuation">-</span> sleep 2;
  <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
  <span class="token key atrule">allow_failure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  
<span class="token key atrule">timedrollout</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &#39;Rolling out 10% <span class="token punctuation">...</span> &#39;
  <span class="token key atrule">when</span><span class="token punctuation">:</span> delayed
  <span class="token key atrule">start_in</span><span class="token punctuation">:</span> <span class="token string">&#39;30&#39;</span>

<span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token key atrule">after_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;after<span class="token punctuation">-</span>script&quot;    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-15-only-except-é™åˆ¶åˆ†æ”¯æ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_4-1-15-only-except-é™åˆ¶åˆ†æ”¯æ ‡ç­¾" aria-hidden="true">#</a> 4.1.15 only &amp; except é™åˆ¶åˆ†æ”¯æ ‡ç­¾</h4><p>ç®€å•äº†è§£ï¼Œé€æ¸è¢«rulesæ›¿ä»£äº†</p><ul><li>onlyå’Œexceptç”¨åˆ†æ”¯ç­–ç•¥æ¥é™åˆ¶jobsæ„å»ºï¼š <ul><li>onlyå®šä¹‰å“ªäº›åˆ†æ”¯å’Œæ ‡ç­¾çš„gité¡¹ç›®å°†ä¼šè¢«jobæ‰§è¡Œã€‚</li><li>exceptå®šä¹‰å“ªäº›åˆ†æ”¯å’Œæ ‡ç­¾çš„gité¡¹ç›®å°†ä¸ä¼šè¢«jobæ‰§è¡Œã€‚</li></ul></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job</span><span class="token punctuation">:</span>
  <span class="token comment"># use regexp</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> /^issue<span class="token punctuation">-</span>.<span class="token important">*$/</span>
  <span class="token comment"># use special keyword</span>
  <span class="token key atrule">except</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> branches
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>branches</td><td>å½“ç®¡é“çš„Gitå¼•ç”¨æ˜¯åˆ†æ”¯æ—¶.</td></tr><tr><td>tags</td><td>å½“ç®¡é“çš„Gitå¼•ç”¨æ˜¯æ ‡ç­¾æ—¶ï¼Œ</td></tr><tr><td>api</td><td>å½“ç¬¬äºŒä¸ªç®¡é“APIè§¦å‘äº†ç®¡é“æ—¶ï¼ˆä¸æ˜¯è§¦å‘å™¨API)</td></tr><tr><td>external</td><td>ä½¿ç”¨é™¤GitLabä»¥å¤–çš„CIæœåŠ¡æ—¶.</td></tr><tr><td>pipelines</td><td>å¯¹äºå¤šé¡¹ç›®è§¦å‘å™¨ï¼Œä½¿ç”¨å¸¦æœ‰CI_JOB_TOKENçš„APIåˆ›å»º.</td></tr><tr><td>pushes</td><td>ç®¡é“ç”±ç”¨æˆ·çš„git pushè§¦å‘.</td></tr><tr><td>schedules</td><td>For scheduled pipelines.</td></tr><tr><td>triggers</td><td>å¯¹äºä½¿ç”¨è§¦å‘ä»¤ç‰Œåˆ›å»ºçš„ç®¡é“ï¼Œ</td></tr><tr><td>web</td><td>å¯¹äºä½¿ç”¨GitLab UIä¸­çš„&quot;è¿è¡Œç®¡é“&quot;æŒ‰é’®åˆ›å»ºçš„ç®¡é“ï¼ˆåœ¨é¡¹ç›®çš„Pipelinesä¸‹ï¼‰.</td></tr><tr><td>merge_requests</td><td>åˆ›å»ºæˆ–æ›´æ–°åˆå¹¶è¯·æ±‚æ—¶ï¼ˆè¯·å‚é˜…ç®¡é“ä»¥äº†è§£åˆå¹¶è¯·æ±‚ï¼‰</td></tr><tr><td>external_pull_requests</td><td>åœ¨GitHubä¸Šåˆ›å»ºæˆ–è¯·æ±‚å¤–éƒ¨æ‹‰å–è¯·æ±‚æ—¶ï¼ˆæœ‰å…³å¤–éƒ¨æ‹‰å–è¯·æ±‚ï¼Œè¯·å‚è§ç®¡é“ï¼‰.</td></tr><tr><td>chat</td><td>å¯¹äºä½¿ç”¨GitLab ChatOpså‘½ä»¤åˆ›å»ºçš„ä½œä¸šï¼Œ</td></tr></tbody></table><h4 id="_4-1-16-rules-æ„å»ºè§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_4-1-16-rules-æ„å»ºè§„åˆ™" aria-hidden="true">#</a> 4.1.16 rules æ„å»ºè§„åˆ™</h4><ul><li>ruleså…è®¸æŒ‰é¡ºåºè¯„ä¼°å•ä¸ªè§„åˆ™ï¼Œç›´åˆ°åŒ¹é…å¹¶ä¸ºä½œä¸šåŠ¨æ€æä¾›å±æ€§ã€‚</li><li>rulesä¸èƒ½only/exceptä¸only/exceptç»„åˆä½¿ç”¨ã€‚</li></ul><p>å¯ç”¨çš„è§„åˆ™ï¼š</p><ul><li>ifï¼ˆå¦‚æœæ¡ä»¶åŒ¹é…ï¼‰</li><li>changesï¼ˆæŒ‡å®šæ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼‰</li><li>existsï¼ˆæŒ‡å®šæ–‡ä»¶å­˜åœ¨ï¼‰</li></ul><p>ï¼Œ</p><h5 id="rules-if-æ¡ä»¶åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#rules-if-æ¡ä»¶åŒ¹é…" aria-hidden="true">#</a> rules-if-æ¡ä»¶åŒ¹é…</h5><ul><li>å¦‚æœDOMAINçš„å€¼åŒ¹é…ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è¿è¡Œã€‚</li><li>ä¸åŒ¹é…on_successã€‚</li><li>æ¡ä»¶åˆ¤æ–­ä»ä¸Šåˆ°ä¸‹ï¼ŒåŒ¹é…å³åœæ­¢ã€‚</li><li>å¤šæ¡ä»¶åŒ¹é…å¯ä»¥ä½¿ç”¨&amp;&amp; ||</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com
  
<span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token comment">#parallel:5</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> &#39;$DOMAIN ==&quot;example.com&quot;
      when<span class="token punctuation">:</span>manual
	<span class="token punctuation">-</span> when<span class="token punctuation">:</span>on_success
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="rules-changes-æ–‡ä»¶å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#rules-changes-æ–‡ä»¶å˜åŒ–" aria-hidden="true">#</a> rules-changes-æ–‡ä»¶å˜åŒ–</h5><ul><li>æ¥å—æ–‡ä»¶è·¯å¾„æ•°ç»„ã€‚</li><li>å¦‚æœæäº¤ä¸­Jenkinsfileæ–‡ä»¶å‘ç”Ÿçš„å˜åŒ–åˆ™ä¸ºtrueã€‚</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token comment">#parallel:5</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">changes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Jenkinsfile
      when<span class="token punctuation">:</span>manual
    <span class="token punctuation">-</span> if<span class="token punctuation">:</span>&#39;$DOMAIN =&quot;example.com&quot;
      when<span class="token punctuation">:</span>on_success
    <span class="token punctuation">-</span> when<span class="token punctuation">:</span>on success
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="rules-exists-æ–‡ä»¶å­˜åœ¨" tabindex="-1"><a class="header-anchor" href="#rules-exists-æ–‡ä»¶å­˜åœ¨" aria-hidden="true">#</a> rules-exists-æ–‡ä»¶å­˜åœ¨</h5><ul><li>æ¥å—æ–‡ä»¶è·¯å¾„æ•°ç»„ã€‚</li><li>å½“ä»“åº“ä¸­å­˜åœ¨æŒ‡å®šçš„æ–‡ä»¶æ—¶æ“ä½œã€‚</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">codescan</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> codescan
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> build
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;codescan&quot;
    <span class="token punctuation">-</span> sleep 5;
  <span class="token comment">#parallel:5</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">exists</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Jenkinsfile
      <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
    <span class="token punctuation">-</span> <span class="token key atrule">changes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Jenkinsfile
      <span class="token key atrule">when</span><span class="token punctuation">:</span> on_success
    <span class="token punctuation">-</span> if;&#39;$DOMAIN ==&quot;example.com&quot;
      <span class="token key atrule">when</span><span class="token punctuation">:</span> on_success
    <span class="token punctuation">-</span> <span class="token key atrule">when</span><span class="token punctuation">:</span> on_success
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="rules-allow-failure-å…è®¸å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#rules-allow-failure-å…è®¸å¤±è´¥" aria-hidden="true">#</a> rules-allow_failure-å…è®¸å¤±è´¥</h5><ul><li>ä½¿ç”¨allow failure: true</li><li>rules: åœ¨ä¸åœæ­¢ç®¡é“æœ¬èº«çš„æƒ…å†µä¸‹å…è®¸ä½œä¸šå¤±è´¥æˆ–æ‰‹åŠ¨ä½œä¸šç­‰å¾…æ“ä½œã€‚</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> <span class="token string">&quot;echo Hello,Rules!&quot;</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> if<span class="token punctuation">:</span>&#39;$CI_MERGE_REQUEST_TARGET_BRANCH_NAME ==&quot;master&quot;
      <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
      <span class="token key atrule">allow_failure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè§„åˆ™åŒ¹é…ï¼Œåˆ™ä½œä¸šå°†å…·æœ‰ä»¥ä¸‹when: manualå’Œallow_failure: trueã€‚</p><h4 id="_4-1-17-workflow" tabindex="-1"><a class="header-anchor" href="#_4-1-17-workflow" aria-hidden="true">#</a> 4.1.17 workflow</h4><p>workflow -rules - ç®¡é“åˆ›å»º</p><ul><li>é¡¶çº§workf1owå…³é”®å­—é€‚ç”¨äºæ•´ä¸ªç®¡é“ï¼Œå¹¶å°†ç¡®å®šæ˜¯å¦åˆ›å»ºç®¡é“ã€‚</li><li>when: å¯ä»¥è®¾ç½®ä¸ºalwaysæˆ–never, å¦‚æœæœªæä¾›ï¼Œåˆ™é»˜è®¤å€¼alwaysã€‚</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">DOMAIN</span><span class="token punctuation">:</span> example.com
  
<span class="token key atrule">workflow</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> &#39;$DOMAIN &quot;example.com&quot;&quot;
    <span class="token punctuation">-</span> <span class="token key atrule">when</span><span class="token punctuation">:</span> always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-18-cache" tabindex="-1"><a class="header-anchor" href="#_4-1-18-cache" aria-hidden="true">#</a> 4.1.18 cache</h4><p>ç¼“å­˜</p><ul><li>å­˜å‚¨ç¼–è¯‘é¡¹ç›®æ‰€éœ€çš„è¿è¡Œæ—¶ä¾èµ–é¡¹ï¼ŒæŒ‡å®šé¡¹ç›®å·¥ä½œç©ºé—´ä¸­éœ€è¦åœ¨j0bä¹‹é—´ç¼“å­˜çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚</li><li>å…¨å±€cacheå®šä¹‰åœ¨jobä¹‹å¤–ï¼Œé’ˆå¯¹æ‰€æœ‰jobç”Ÿæ•ˆã€‚jobä¸­cacheä¼˜å…ˆäºå…¨å±€ã€‚</li></ul><p><strong>cacheï¼špaths</strong></p><ul><li>åœ¨job buildä¸­å®šä¹‰ç¼“å­˜ï¼Œå°†ä¼šç¼“å­˜targetç›®å½•ä¸‹çš„æ‰€æœ‰.jaræ–‡ä»¶ã€‚</li><li>å½“åœ¨å…¨å±€å®šä¹‰äº†cache:pathsä¼šè¢«jobä¸­è¦†ç›–ã€‚ä»¥ä¸‹å®ä¾‹å°†ç¼“å­˜targetç›®å½•ã€‚</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>build;
  <span class="token key atrule">script</span><span class="token punctuation">:</span> test
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> target/<span class="token important">*.jar</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> my/files
    
<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span> echo &quot;hello&quot;
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">key</span><span class="token punctuation">:</span> build
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> target/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: key - ç¼“å­˜æ ‡è®°</strong></p><p>ä¸ºç¼“å­˜åšä¸ªæ ‡è®°ï¼Œå¯ä»¥é…ç½®jobã€åˆ†æ”¯ä¸ºkeyæ¥å®ç°åˆ†æ”¯ã€ä½œä¸šç‰¹å®šçš„ç¼“å­˜ã€‚ä¸ºä¸åŒjobå®šä¹‰äº†ä¸åŒçš„cache:keyæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªjobåˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„cacheã€‚cache:key å˜é‡å¯ä»¥ä½¿ç”¨ä»»ä½•é¢„å®šä¹‰å˜é‡ï¼Œé»˜è®¤defaultã€‚ä»GitLab9.0å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰å†…å®¹éƒ½åœ¨ç®¡é“å’Œä½œä¸šä¹‹é—´å…±äº«ã€‚</p><p>æŒ‰ç…§åˆ†æ”¯æ¥è®¾ç½®ç¼“å­˜</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">[</span>CI_COMMIT_REF_SLUG<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: key: files:</strong></p><p>æ–‡ä»¶å˜åŒ–è‡ªåŠ¨åˆ›å»ºç¼“å­˜</p><p>files:æ–‡ä»¶å‘ç”Ÿå˜åŒ–è‡ªåŠ¨é‡æ–°ç”Ÿæˆç¼“å­˜(filesæœ€å¤šæŒ‡å®šä¸¤ä¸ªæ–‡ä»¶)ï¼Œæäº¤çš„æ—¶å€™æ£€æŸ¥æŒ‡å®šçš„æ–‡ä»¶ã€‚æ ¹æ®æŒ‡å®šçš„æ–‡ä»¶ç”Ÿæˆå¯†é’¥è®¡ç®—SHAæ ¡éªŒå’Œï¼Œå¦‚æœæ–‡ä»¶æœªæ”¹å˜å€¼ä¸ºdefaultã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cache:
  key:
    files:
      - Gemfile.lock
      - package.json I
  paths:
    - vendor/ruby
    - node_modules
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: key: prefix:</strong></p><p>ç»„åˆç”ŸæˆSHAæ ¡éªŒå’Œ</p><p>prefix: å…è®¸ç»™å®šprefixçš„å€¼ä¸æŒ‡å®šæ–‡ä»¶ç”Ÿæˆçš„ç§˜é’¥ç»„åˆã€‚åœ¨è¿™é‡Œå®šä¹‰äº†å…¨å±€çš„cacheï¼Œå¦‚æœæ–‡ä»¶å‘ç”Ÿå˜åŒ–åˆ™å€¼ä¸ºrspec-xxx111111111222222ï¼Œæœªå‘ç”Ÿå˜åŒ–ä¸ºrspec-defaultã€‚</p><p><img src="/assets/image-20221114123402861-089a5d46.png" alt="image-20221114123402861"></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span>
    <span class="token key atrule">files</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> Gemfile.lock
    <span class="token key atrule">prefix</span><span class="token punctuation">:</span> $<span class="token punctuation">[</span>CIJOB_NAME)
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> vendor/ruby
  <span class="token key atrule">rspec</span><span class="token punctuation">:</span>
    <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> bundle exec rspec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cache: policy:</strong> - ç¼“å­˜ç­–ç•¥</p><p>é»˜è®¤ï¼šåœ¨æ‰§è¡Œå¼€å§‹æ—¶ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶åœ¨ç»“æŸæ—¶é‡æ–°ä¸Šä¼ æ–‡ä»¶ã€‚</p><p>policy:pull è·³è¿‡ä¸‹è½½æ­¥éª¤ï¼Œpolicy: push è·³è¿‡ä¸Šä¼ æ­¥éª¤</p><p><img src="/assets/image-20221114124210197-9b00aaae.png" alt="image-20221114124210197"></p><h4 id="_4-1-19-artifacts" tabindex="-1"><a class="header-anchor" href="#_4-1-19-artifacts" aria-hidden="true">#</a> 4.1.19 artifacts</h4><p>ç”¨äºæŒ‡å®šåœ¨ä½œä¸šæˆåŠŸæˆ–è€…å¤±è´¥æ—¶åº”é™„åŠ åˆ°ä½œä¸šçš„æ–‡ä»¶æˆ–ç›®å½•çš„åˆ—è¡¨ã€‚ä½œä¸šå®Œæˆåï¼Œå·¥ä»¶å°†è¢«å‘é€åˆ°GitLab,å¹¶å¯åœ¨GitLab UIä¸­ä¸‹è½½ã€‚</p><p>åˆ¶å“ï¼Œå°±æ˜¯Javaé¡¹ç›®ç¼–ç¨‹å®Œæˆåçš„JaråŒ…ã€‚å…¶ä»–è¯­è¨€çš„å¯èƒ½æ˜¯ä¸€äº›XMlæ–‡ä»¶ï¼Œæˆ–è€…HTMLæ–‡ä»¶ç­‰ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> target/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>artifacts-åˆ¶å“åˆ›å»º</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">default-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mvn test <span class="token punctuation">-</span>U
  <span class="token key atrule">except</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> tags

<span class="token key atrule">release-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mvn package <span class="token punctuation">-</span>U
  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
  <span class="token key atrule">paths</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> target/<span class="token important">*.war</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> tags
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-1-20-dependencies" tabindex="-1"><a class="header-anchor" href="#_4-1-20-dependencies" aria-hidden="true">#</a> 4.1.20 dependencies</h4></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 895252461@qq.com">xuliang</span>,<!--]--><!--[--><span class="contributor" title="email: 895252461@qq.com">è¯—äººéƒ½è—åœ¨æ°´åº•</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/tools/git/git.html" class="nav-link prev" aria-label="Git ä½¿ç”¨"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Git ä½¿ç”¨</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-0de2ad7c.js" defer></script>
  </body>
</html>
